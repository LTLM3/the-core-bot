{
  "meta": {
    "source_docx": "THE CORE BOT_FUNCTIONAL FLOW_FINAL_UPDATED.docx",
    "generated_at_utc": "2026-01-31T12:08:10Z",
    "schema_version": "2.1",
    "notes": [
      "Machine-readable functional flow extracted from the provided DOCX.",
      "UI identifiers are the literal UI tags (e.g., [UI: Initiation-button-1]).",
      "Text blocks preserve ordering; line breaks inside blocks are represented with \\n in JSON strings.",
      "Normalized UI tags to match components catalog and added structured 'instructions' hints for timers/idempotency/visibility without altering original semantics."
    ]
  },
  "global_rules": [
    {
      "rule_id": "rule_001",
      "title": "MAPPING / SNAPSHOT RULES",
      "text": "Roll Call channel selection is constrained to channels mapped to active Event check-in roles for the guild.",
      "ui_refs": []
    },
    {
      "rule_id": "rule_002",
      "title": "MAPPING / SNAPSHOT RULES FOR KEYS & ID’s",
      "text": "Hybrid storage rule (keys + snapshots)\nRule: For any selection that uses a key-to-ID configuration mapping, the system stores both:\nthe key (for UI + intent), and\nthe resolved ID snapshot (used for execution/awarding).\nHybrid objects\nRoll call targeting stores:\nchannel_key\nresolved_channel_id (snapshot)\nEvent check-in role allocation stores:\ncheck_in_role_key\nresolved_role_id (snapshot)\nResolution timing\nRule: The resolved ID snapshot is captured on finalization (when the Operator submits the Upload flow / commits the draft).\nRule: While still in draft, the system may preview the resolved ID, but does not treat it as final until commit.\nExecution always uses snapshot\nRule: When awarding, posting, or allocating roles, the bot uses the resolved snapshot IDs stored on the finalized record (not the current mapping).",
      "ui_refs": []
    },
    {
      "rule_id": "rule_003",
      "title": "‘ACCESS’ BUTTON REFRESH",
      "text": "Clicking any terminal access button (initiation / terminal / operator terminal / lt terminal) aborts any active transition between screens (if present) and returns to the initial booting screen or main menu.",
      "ui_refs": []
    },
    {
      "rule_id": "rule_004",
      "title": "DRAFT IDENTITY & PERSISTENCE / REFRESH",
      "text": "Draft identity\nRule: All drafts are scoped per guild_id + operator_user_id + draft_type.\nRule: Draft types:\nobjective_upload_draft\nobjective_edit_draft (per objective_id being edited)\nevent_upload_draft\nevent_edit_draft (per event_id being edited)\ncommand_roll_call_draft\ncommand_announcement_draft\ncommand_merit_transfer_draft\nlt_add_merits_draft\nlt_deduct_merits_draft\nlt_suspend_user_draft\nDraft persistence + refresh\nRule: Clicking [UI: Operator-Terminal-access-button] // [UI: LT-Terminal-access-button] // [UI: Terminal-access-button] is idempotent and re-renders the operator’s current draft state for the current screen context.\nRule: If Operator or LT has an in-progress draft for a flow, returning to that flow loads it with all saved values + completion states.\nDraft expiration (TTL)\nRule: Drafts expire after 24 hours of inactivity.\nRule: When an Operator or LT re-enters a flow and the draft is expired, system behaves as “no draft exists” (fresh state).\nDraft exclusivity (no shared drafting)\nRule: Operator A can never view or modify Operator B’s drafts.\nRule: Two operators can simultaneously create drafts in the same guild without conflict.\nGLOBAL SYSTEM RULE – INTERACTION ACKNOWLEDGEMENT\nAny button clicks in server text channels, ephemeral messages, or DMs that interact with the bot must automatically trigger a System ACK (via deferUpdate, reply, or ephemeral reply) within 3 seconds, before any timers, transitions, or logic are executed.\nGLOBAL SYSTEM RULE – EPHEMERAL MESSAGE LIFETIME\nAny valid button interaction updates or replaces the active ephemeral terminal message, effectively refreshing the session.\nIf the ephemeral message expires or is no longer editable, it is discarded and the user must click [UI: Terminal-access-button] again to re-enter the terminal flow.\nOr if user is in the welcome initiation terminal they must click [UI: Initiation-button-1].\nGLOBAL SYSTEM RULE – DIRECT MESSAGE RATE LIMITING\nThe bot enforces per-user DM rate limits.\nRepeated button interactions (e.g. Try Again, Check-in toggles, resubmission attempts) will not cause duplicate DM messages to be sent within a defined cooldown period. This cooldown period will be 5 seconds, once the cooldown period has elapsed, a subsequent eligible interaction may trigger the DM.",
      "ui_refs": [
        "[UI: Initiation-button-1]",
        "[UI: LT-Terminal-access-button]",
        "[UI: Operator-Terminal-access-button]",
        "[UI: Terminal-access-button]"
      ]
    },
    {
      "rule_id": "rule_005",
      "title": "OBJECTIVE PROOF FILE LIMIT",
      "text": "If user uploads a file greater than 8mb, it will NOT be accepted and [UI: Terminal-objectives-submit DM text-2-error-file-size] DM will be sent.",
      "ui_refs": [
        "[UI: Terminal-objectives-submit DM text-2-error-file-size]"
      ]
    },
    {
      "rule_id": "rule_006",
      "title": "MENU NAVIGATION",
      "text": "Navigation between menus for Initiation / Terminal / Operator terminal is performed by editing the same ephemeral message and replacing the visible buttons with the buttons relevant to the current screen. Disabled buttons only apply during transitions.",
      "ui_refs": []
    },
    {
      "rule_id": "rule_007",
      "title": "SINGLE DRAFT RULE",
      "text": "Each operator may have at most one active draft objective at a time.",
      "ui_refs": []
    },
    {
      "rule_id": "rule_008",
      "title": "SINGLE ACTIVE UPLOAD STATE",
      "text": "Only one file attach state may be active per user at any time.",
      "ui_refs": []
    }
  ],
  "flows": [
    {
      "flow_id": "welcome",
      "title": "Welcome",
      "channel_ui": "[UI: Discord channel-welcome]",
      "channel_ids": {
        "testing": "1450403483441172573",
        "production": "1464092644975181908"
      },
      "preface": "All steps take place in text channels:\nTesting channel ID: 1450403483441172573\nProduction channel ID: 1464092644975181908\nPre-face: Only users with pre-allocated paid member role can view this text channel (auto-applied if they connect their YouTube channel to their discord account).",
      "steps": [
        {
          "step_id": "welcome.step_1",
          "step_code": "Step 1",
          "title": "Welcome screen (all content here is public facing + permanent)",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Initiation-button-1]",
                "[UI: Initiation-text-1]",
                "[UI: Welcome-video]"
              ],
              "text": "Embedded welcome video [UI: Welcome-video]\nWelcome text [UI: Initiation-text-1]\nBegin button [UI: Initiation-button-1]"
            }
          ],
          "ui_refs": [
            "[UI: Initiation-button-1]",
            "[UI: Initiation-text-1]",
            "[UI: Welcome-video]"
          ]
        },
        {
          "step_id": "welcome.step_2",
          "step_code": "Step 2",
          "title": "Begin button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Initiation-button-1]",
                "[UI: Initiation-transitional GIF-1]"
              ],
              "text": "Trigger ephemeral message\nPlay transitional GIF [UI: Initiation-transitional GIF-1] (3 loops – bot will have countdown timer 3x duration of GIF)\nDisable Begin button [UI: Initiation-button-1]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 3
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Initiation-button-1]",
            "[UI: Initiation-transitional GIF-1]"
          ]
        },
        {
          "step_id": "welcome.step_3",
          "step_code": "Step 3",
          "title": "Post-transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Initiation-button-2A]",
                "[UI: Initiation-screen-charter GIF]"
              ],
              "text": "Timer expires on transitional GIF → ephemeral message updates to Initiation Terminal GIF [UI: Initiation-screen-charter GIF]\nShow Accept button [UI: Initiation-button-2A]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Initiation-button-2A]",
            "[UI: Initiation-screen-charter GIF]"
          ]
        },
        {
          "step_id": "welcome.step_4",
          "step_code": "Step 4",
          "title": "Accept button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Initiation-button-2A]",
                "[UI: Initiation-transitional GIF-2]"
              ],
              "text": "Ephemeral updates to transitional GIF [UI: Initiation-transitional GIF-2] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\nDisable Accept button [UI: Initiation-button-2A]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Initiation-button-2A]",
            "[UI: Initiation-transitional GIF-2]"
          ]
        },
        {
          "step_id": "welcome.step_5",
          "step_code": "Step 5",
          "title": "Post-2nd transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Initiation-button-3A]",
                "[UI: Initiation-button-3B]",
                "[UI: Initiation-screen-introduction GIF]",
                "[UI: Initiation-transitional GIF-2]"
              ],
              "text": "Timer expires on transitional GIF [UI: Initiation-transitional GIF-2] → ephemeral message updates to next Initiation Terminal GIF [UI: Initiation-screen-introduction GIF]\nShow I Understand button [UI: Initiation-button-3A] + another Back button [UI: Initiation-button-3B]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If ‘Back’ button is clicked",
              "ui_refs": [
                "[UI: Initiation-button-2A]",
                "[UI: Initiation-button-3A]",
                "[UI: Initiation-button-3B]",
                "[UI: Initiation-screen-charter GIF]",
                "[UI: Initiation-transitional GIF-2-back]"
              ],
              "text": "Ephemeral updates to [UI: Initiation-transitional GIF-2-back] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\nDisable both [UI: Initiation-button-3A] + Back button [UI: Initiation-button-3B]\nTimer expires on transitional GIF [UI: Initiation-transitional GIF-2-back] → ephemeral message updates to previous Initiation Terminal GIF [UI: Initiation-screen-charter GIF]\nShow Accept button [UI: Initiation-button-2A]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Initiation-button-2A]",
            "[UI: Initiation-button-3A]",
            "[UI: Initiation-button-3B]",
            "[UI: Initiation-screen-charter GIF]",
            "[UI: Initiation-screen-introduction GIF]",
            "[UI: Initiation-transitional GIF-2-back]",
            "[UI: Initiation-transitional GIF-2]"
          ]
        },
        {
          "step_id": "welcome.step_6",
          "step_code": "Step 6",
          "title": "I Understand button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Initiation-button-3A]",
                "[UI: Initiation-button-3B]",
                "[UI: Initiation-transitional GIF-3]"
              ],
              "text": "Ephemeral updates to transitional GIF [UI: Initiation-transitional GIF-3] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\nDisable both Understand [UI: Initiation-button-3A] + Back buttons [UI: Initiation-button-3B]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Initiation-button-3A]",
            "[UI: Initiation-button-3B]",
            "[UI: Initiation-transitional GIF-3]"
          ]
        },
        {
          "step_id": "welcome.step_7",
          "step_code": "Step 7",
          "title": "Post-3rd transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Initiation-button-4A]",
                "[UI: Initiation-button-4B]",
                "[UI: Initiation-button-4C]",
                "[UI: Initiation-screen-comms opt in GIF]",
                "[UI: Initiation-transitional GIF-3]"
              ],
              "text": "Timer expires on transitional GIF [UI: Initiation-transitional GIF-3] → ephemeral message updates to next Initiation Terminal GIF [UI: Initiation-screen-comms opt in GIF]\nShow Yes button [UI: Initiation-button-4A] + No button [UI: Initiation-button-4B] + Back button [UI: Initiation-button-4C]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If ‘Back’ button is clicked",
              "ui_refs": [
                "[UI: Initiation-button-3A]",
                "[UI: Initiation-button-3B]",
                "[UI: Initiation-button-4A]",
                "[UI: Initiation-button-4B]",
                "[UI: Initiation-button-4C]",
                "[UI: Initiation-screen-introduction GIF]",
                "[UI: Initiation-transitional GIF-3-back]"
              ],
              "text": "Ephemeral updates to [UI: Initiation-transitional GIF-3-back] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\nDisable Yes button [UI: Initiation-button-4A] + No button [UI: Initiation-button-4B]  + Back button [UI: Initiation-button-4C]\nTimer expires on transitional GIF [UI: Initiation-transitional GIF-3-back] → ephemeral message updates to previous Initiation Terminal GIF [UI: Initiation-screen-introduction GIF]\nShow Understand [UI: Initiation-button-3A] + Back buttons [UI: Initiation-button-3B]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If ‘No’ button is clicked",
              "ui_refs": [
                "[UI: Discord Role The Core]",
                "[UI: Initiation-button-4A]",
                "[UI: Initiation-button-4B]",
                "[UI: Initiation-button-4C]",
                "[UI: Initiation-screen-congratulations GIF]",
                "[UI: Initiation-transitional GIF-4-no]"
              ],
              "text": "• Ephemeral updates to transitional GIF [UI: Initiation-transitional GIF-4-no] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\n• Disable Yes button [UI: Initiation-button-4A] + No button [UI: Initiation-button-4B]  + Back button [UI: Initiation-button-4C]\nTimer expires on transitional GIF [UI: Initiation-transitional GIF-4-no] → ephemeral message updates to next Initiation Terminal GIF [UI: Initiation-screen-congratulations GIF] + allocates Discord role [UI: Discord Role The Core] to user.\nNo buttons shown on this screen.",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Discord Role The Core]",
            "[UI: Initiation-button-3A]",
            "[UI: Initiation-button-3B]",
            "[UI: Initiation-button-4A]",
            "[UI: Initiation-button-4B]",
            "[UI: Initiation-button-4C]",
            "[UI: Initiation-screen-comms opt in GIF]",
            "[UI: Initiation-screen-congratulations GIF]",
            "[UI: Initiation-screen-introduction GIF]",
            "[UI: Initiation-transitional GIF-3-back]",
            "[UI: Initiation-transitional GIF-3]",
            "[UI: Initiation-transitional GIF-4-no]"
          ]
        },
        {
          "step_id": "welcome.step_8",
          "step_code": "Step 8",
          "title": "Yes button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Comms Opt In Success DM text]",
                "[UI: Comms Opt In Success DM-button-A]",
                "[UI: Comms Opt In Success DM-button-B]",
                "[UI: Discord Role The Core Signal]",
                "[UI: Initiation-button-4A]",
                "[UI: Initiation-button-4B]",
                "[UI: Initiation-button-4C]",
                "[UI: Initiation-transitional GIF-4]"
              ],
              "text": "• Ephemeral updates to transitional GIF [UI: Initiation-transitional GIF-4] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\n• Disable Yes button [UI: Initiation-button-4A] + No button [UI: Initiation-button-4B]  + Back button [UI: Initiation-button-4C]\nDM is sent to user with text [UI: Comms Opt In Success DM text] + buttons [UI: Comms Opt In Success DM-button-A] & [UI: Comms Opt In Success DM-button-B]. But [UI: Comms Opt In Success DM-button-A] is disabled (as they are already opted in).\nDiscord role [UI: Discord Role The Core Signal] is assigned to user.\n• By clicking ‘Yes’ button the bot uses the current guild_id to assign the corresponding role / role ID.\nRole IDs (configuration; server-specific):\nRole ID: 1462377585135845488 (Production – configuration ID)\nRole ID: 1462377755013288025 (Testing – configuration ID)",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If user clicks [UI: Comms Opt In Success DM-button-B] then the [UI: Discord Role The Core Signal] role will be removed and the [UI: Comms Opt Out Success DM text] DM will be sent with the ‘Opt In’ and ‘Opt Out’ buttons underneath but remember, if they have Opted in, the Opt In button will be disabled, if they have Opted Out then the Opt Out button will be disabled – this auto updates depending on their opt status.",
              "ui_refs": [
                "[UI: Comms Opt In Success DM text]",
                "[UI: Comms Opt In Success DM-button-A]",
                "[UI: Comms Opt In Success DM-button-B]",
                "[UI: Comms Opt Out Success DM text]",
                "[UI: Discord Role The Core Signal]",
                "[UI: Initiation-button-4A]",
                "[UI: Initiation-button-4B]",
                "[UI: Initiation-button-4C]",
                "[UI: Initiation-button-4D]",
                "[UI: Initiation-screen-comms opt in GIF]",
                "[UI: Initiation-screen-comms opt in text-error]",
                "[UI: Initiation-transitional GIF-4]"
              ],
              "text": "Yes button clicked but DM fails to send.\n• If DM fails to send:\n• Ephemeral updates to add text under [UI: Initiation-screen-comms opt in GIF] GIF, but [UI: Initiation-screen-comms opt in GIF] stays, it is not replaced. The text is [UI: Initiation-screen-comms opt in text-error] Discord role [UI: Discord Role The Core Signal] is still assigned to user. Button [UI: Initiation-button-4A] changes to [UI: Initiation-button-4D].\n• If user clicks [UI: Initiation-button-4D] then DM [UI: Comms Opt In Success DM text] + buttons [UI: Comms Opt In Success DM-button-A] & [UI: Comms Opt In Success DM-button-B] is sent in DM. But [UI: Comms Opt In Success DM-button-A] is disabled (as they are already opted in). The Yes button [UI: Initiation-button-4A] + No button [UI: Initiation-button-4B]  + Back button [UI: Initiation-button-4C] become disabled.\n• If it fails again, the ‘Try again’ button [UI: Initiation-button-4D] re-enables.\n• If DM succeeds, disable Try Again button [UI: Initiation-button-4D] + No button [UI: Initiation-button-4B]  + Back button [UI: Initiation-button-4C], Ephemeral updates to transitional GIF [UI: Initiation-transitional GIF-4] (plays only 1 loop – bot will have countdown timer 1x duration of GIF), moves to step 9.",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Comms Opt In Success DM text]",
            "[UI: Comms Opt In Success DM-button-A]",
            "[UI: Comms Opt In Success DM-button-B]",
            "[UI: Comms Opt Out Success DM text]",
            "[UI: Discord Role The Core Signal]",
            "[UI: Initiation-button-4A]",
            "[UI: Initiation-button-4B]",
            "[UI: Initiation-button-4C]",
            "[UI: Initiation-button-4D]",
            "[UI: Initiation-screen-comms opt in GIF]",
            "[UI: Initiation-screen-comms opt in text-error]",
            "[UI: Initiation-transitional GIF-4]"
          ]
        },
        {
          "step_id": "welcome.step_9",
          "step_code": "Step 9",
          "title": "Post-4th transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Discord Role The Core]",
                "[UI: Initiation-screen-congratulations GIF]",
                "[UI: Initiation-transitional GIF-4]"
              ],
              "text": "Timer expires on transitional GIF [UI: Initiation-transitional GIF-4] → ephemeral message updates to next Initiation Terminal GIF [UI: Initiation-screen-congratulations GIF] + allocates Discord role [UI: Discord Role The Core] to user.\nNo buttons shown on this screen.\nDiscord role [UI: Discord Role The Core] which grants access to text and voice channels which were previously hidden.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If user has [UI: Discord Role The Core] if the initiation (congratulation) ephemeral message times out and removes, if the user clicks [UI: Initiation-button-1] it triggers an ephemeral text message “You have already been initiated.” And does NOT trigger the initiation terminal to boot.",
              "ui_refs": [
                "[UI: Comms Opt In Success DM-button-A]",
                "[UI: Comms Opt In Success DM-button-B]",
                "[UI: Discord Role The Core Signal]",
                "[UI: Discord Role The Core]",
                "[UI: Initiation-button-1]"
              ],
              "text": "• By clicking ‘Yes’ button the bot uses the current guild_id to assign the corresponding role / role ID.\nRole IDs (configuration; server-specific):\nRole ID: 1462381959056457932 (Production – configuration ID)\nRole ID: 1462381825920860322 (Testing – configuration ID)\nEach user with the [UI: Discord Role The Core Signal] role will receive LT voice messages / alerts in DM. Each alert will have the buttons [UI: Comms Opt In Success DM-button-A] & [UI: Comms Opt In Success DM-button-B] attached underneath the audio files sent in DM."
            }
          ],
          "ui_refs": [
            "[UI: Comms Opt In Success DM-button-A]",
            "[UI: Comms Opt In Success DM-button-B]",
            "[UI: Discord Role The Core Signal]",
            "[UI: Discord Role The Core]",
            "[UI: Initiation-button-1]",
            "[UI: Initiation-screen-congratulations GIF]",
            "[UI: Initiation-transitional GIF-4]"
          ]
        }
      ]
    },
    {
      "flow_id": "terminal",
      "title": "Terminal",
      "channel_ui": "[UI: Discord channel-terminal]",
      "channel_ids": {
        "testing": "1462028325554880653",
        "production": "1463706943976898641"
      },
      "preface": "All steps take place in text channels:\nTesting channel ID: 1462028325554880653\nProduction channel ID: 1463706943976898641",
      "steps": [
        {
          "step_id": "terminal.step_1",
          "step_code": "Step 1",
          "title": "Access Terminal post (all content here is public facing + permanent)",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-access text]",
                "[UI: Terminal-access-button]"
              ],
              "text": "Access text [UI: Terminal-access text]\nAccess button [UI: Terminal-access-button]"
            }
          ],
          "ui_refs": [
            "[UI: Terminal-access text]",
            "[UI: Terminal-access-button]"
          ]
        },
        {
          "step_id": "terminal.step_2",
          "step_code": "Step 2",
          "title": "Access button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-access-button]",
                "[UI: Terminal-transitional GIF-1]"
              ],
              "text": "Trigger ephemeral message\nPlay transitional GIF [UI: Terminal-transitional GIF-1] (3 loops – bot will have countdown timer 3x duration of GIF)\nKeep [UI: Terminal-access-button] enabled always, but make it idempotent (pressing it just refreshes their ephemeral session)",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 3
                },
                {
                  "type": "idempotency",
                  "value": "idempotent"
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-access-button]",
            "[UI: Terminal-transitional GIF-1]"
          ]
        },
        {
          "step_id": "terminal.step_3",
          "step_code": "Step 3",
          "title": "Post-transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-button]",
                "[UI: Terminal-main menu-GIF]",
                "[UI: Terminal-objectives-button]"
              ],
              "text": "Timer expires on transitional GIF → ephemeral message updates to Terminal Main Menu GIF [UI: Terminal-main menu-GIF]\nShow Objectives [UI: Terminal-objectives-button] & Events buttons [UI: Terminal-events-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-button]",
            "[UI: Terminal-main menu-GIF]",
            "[UI: Terminal-objectives-button]"
          ]
        },
        {
          "step_id": "terminal.step_4_option_a",
          "step_code": "Step 4 [Option A]",
          "title": "Objectives button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-button]",
                "[UI: Terminal-objectives-button]",
                "[UI: Terminal-transitional GIF-objectives]"
              ],
              "text": "Ephemeral updates to transitional GIF [UI: Terminal-transitional GIF-objectives] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\nDisable Objectives [UI: Terminal-objectives-button] & Events buttons [UI: Terminal-events-button]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-button]",
            "[UI: Terminal-objectives-button]",
            "[UI: Terminal-transitional GIF-objectives]"
          ]
        },
        {
          "step_id": "terminal.step_4_option_b",
          "step_code": "Step 4 [Option B]",
          "title": "Events button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-button]",
                "[UI: Terminal-objectives-button]",
                "[UI: Terminal-transitional GIF-events]"
              ],
              "text": "• Ephemeral updates to transitional GIF [UI: Terminal-transitional GIF-events] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\n• Disable Objectives [UI: Terminal-objectives-button] & Events buttons [UI: Terminal-events-button]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-button]",
            "[UI: Terminal-objectives-button]",
            "[UI: Terminal-transitional GIF-events]"
          ]
        },
        {
          "step_id": "terminal.step_5_option_a",
          "step_code": "Step 5 [Option A]",
          "title": "Post-transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-objectives-GIF-*objective name*-main]",
                "[UI: Terminal-objectives-button-back]",
                "[UI: Terminal-objectives-button-next]",
                "[UI: Terminal-objectives-button-previous]",
                "[UI: Terminal-objectives-button-submit]",
                "[UI: Terminal-transitional GIF-objectives]"
              ],
              "text": "Timer expires on transitional GIF [UI: Terminal-transitional GIF-objectives] → ephemeral message updates to next Terminal GIF [UI: Terminal-objectives-GIF-*objective name*-main].\nShow Submit [UI: Terminal-objectives-button-submit] + Back [UI: Terminal-objectives-button-back], next [UI: Terminal-objectives-button-next], previous [UI: Terminal-objectives-button-previous] buttons.\nNext and previous buttons will trigger navigation to a new Objective, the [UI: Terminal-objectives-GIF-*objective name*-main] will update to the next uploaded Objective GIF under another unique name, as [UI: Terminal-objectives-GIF-*objective name*-main] is a generic title for a dynamic UI element. This GIF will be located in the upload package Operators parse when uploading an objective in the operator terminal into the database. This will display uniquely for each objective that is currently active so if 5 objectives are live, there will be 5 different GIFs to navigate through. It will show whichever objective is uploaded to the objectives package and is live, in order of begin date (closest to current date to furthest from current date). If the end date has passed on the objectives schedule, it will no longer display here.\nUser cannot press ‘previous’ [UI: Terminal-objectives-button-previous] on the first loaded Objective / GIF but can press previous after navigating ‘next’ once. Once user has reached the end of the uploaded Objectives the ‘next’ button will bring them back to the start of the Objectives and ‘previous’ will become disabled again.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-objectives-GIF-*objective name*-main]",
            "[UI: Terminal-objectives-button-back]",
            "[UI: Terminal-objectives-button-next]",
            "[UI: Terminal-objectives-button-previous]",
            "[UI: Terminal-objectives-button-submit]",
            "[UI: Terminal-transitional GIF-objectives]"
          ]
        },
        {
          "step_id": "terminal.step_5_option_b",
          "step_code": "Step 5 [Option B]",
          "title": "Post-transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-GIF-*event name*-main]",
                "[UI: Terminal-events-button-back]",
                "[UI: Terminal-events-button-check-in]",
                "[UI: Terminal-events-button-next]",
                "[UI: Terminal-events-button-previous]",
                "[UI: Terminal-transitional GIF-events]"
              ],
              "text": "Timer expires on transitional GIF [UI: Terminal-transitional GIF-events] → ephemeral message updates to next Terminal GIF [UI: Terminal-events-GIF-*event name*-main].\nShow Check-in [UI: Terminal-events-button-check-in] + Back [UI: Terminal-events-button-back], next [UI: Terminal-events-button-next], previous [UI: Terminal-events-button-previous] buttons.\nNext and previous buttons will trigger navigation to a new Event, the [UI: Terminal-events-GIF-*event name*-main] will update to the next uploaded Event GIF under another unique name, as [UI: Terminal-events-GIF-*event name*-main] is a generic title for a dynamic UI element. This GIF will be located in the upload package Operators parse when uploading an event in the operator terminal into the database. This will display uniquely for each event that is currently active so if 5 events are live, there will be 5 different GIFs to navigate through. It will show whichever event is uploaded to the events package and is live, in order of begin date (closest to current date to furthest from current date). If the end date has passed on the events schedule, it will no longer display here.\nUser cannot press ‘previous’ [UI: Terminal-events-button-previous] on the first loaded Event / GIF but can press previous after navigating ‘next’ once. Once user has reached the end of the uploaded Events the ‘next’ button will bring them back to the start of the Events and ‘previous’ will become disabled again.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-GIF-*event name*-main]",
            "[UI: Terminal-events-button-back]",
            "[UI: Terminal-events-button-check-in]",
            "[UI: Terminal-events-button-next]",
            "[UI: Terminal-events-button-previous]",
            "[UI: Terminal-transitional GIF-events]"
          ]
        },
        {
          "step_id": "terminal.step_6_option_a-a",
          "step_code": "Step 6 [Option A-A]",
          "title": "Submit button is clicked (within specific objective screen [UI: Terminal-objectives-GIF-*objective name*-main])",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-objectives-button-back]",
                "[UI: Terminal-objectives-button-next]",
                "[UI: Terminal-objectives-button-previous]",
                "[UI: Terminal-objectives-button-submit]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
              ],
              "text": "Ephemeral updates to transitional GIF [UI: Terminal-transitional GIF-objectives-*objective name*-submit] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\nDisable Submit [UI: Terminal-objectives-button-submit] + Back [UI: Terminal-objectives-button-back], next [UI: Terminal-objectives-button-next], previous [UI: Terminal-objectives-button-previous] buttons.",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-objectives-button-back]",
            "[UI: Terminal-objectives-button-next]",
            "[UI: Terminal-objectives-button-previous]",
            "[UI: Terminal-objectives-button-submit]",
            "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
          ]
        },
        {
          "step_id": "terminal.step_6_option_b-a",
          "step_code": "Step 6 [Option B-A]",
          "title": "Check-in button is clicked (within events screen [UI: Terminal-events-GIF-*event name*-main])",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-button-back]",
                "[UI: Terminal-events-button-check-in]",
                "[UI: Terminal-events-button-next]",
                "[UI: Terminal-events-button-previous]",
                "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
              ],
              "text": "Ephemeral updates to transitional GIF [UI: Terminal-transitional GIF-events-*event name*-check-in] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\n• Disable Check-in [UI: Terminal-events-button-check-in] + Back [UI: Terminal-events-button-back], next [UI: Terminal-events-button-next], previous [UI: Terminal-events-button-previous] buttons.",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-button-back]",
            "[UI: Terminal-events-button-check-in]",
            "[UI: Terminal-events-button-next]",
            "[UI: Terminal-events-button-previous]",
            "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
          ]
        },
        {
          "step_id": "terminal.step_6_option_a-b",
          "step_code": "Step 6 [Option A-B]",
          "title": "Back button is clicked (within objectives screen [UI: Terminal-objectives-GIF-*objective name*-main])",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-objectives-button-back]",
                "[UI: Terminal-objectives-button-next]",
                "[UI: Terminal-objectives-button-previous]",
                "[UI: Terminal-objectives-button-submit]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-back]"
              ],
              "text": "• Ephemeral updates to transitional GIF [UI: Terminal-transitional GIF-objectives-*objective name*-back] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\n• Disable Submit [UI: Terminal-objectives-button-submit] + Back [UI: Terminal-objectives-button-back], next [UI: Terminal-objectives-button-next], previous [UI: Terminal-objectives-button-previous] buttons.",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-objectives-button-back]",
            "[UI: Terminal-objectives-button-next]",
            "[UI: Terminal-objectives-button-previous]",
            "[UI: Terminal-objectives-button-submit]",
            "[UI: Terminal-transitional GIF-objectives-*objective name*-back]"
          ]
        },
        {
          "step_id": "terminal.step_6_option_b-b",
          "step_code": "Step 6 [Option B-B]",
          "title": "Back button is clicked (within events screen [UI: Terminal-events-GIF-*event name*-main])",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-button-back]",
                "[UI: Terminal-events-button-check-in]",
                "[UI: Terminal-events-button-next]",
                "[UI: Terminal-events-button-previous]",
                "[UI: Terminal-transitional GIF-events-*event name*-back]"
              ],
              "text": "Ephemeral updates to [UI: Terminal-transitional GIF-events-*event name*-back] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\nDisable Check-in [UI: Terminal-events-button-check-in] + Back [UI: Terminal-events-button-back], next [UI: Terminal-events-button-next], previous [UI: Terminal-events-button-previous] buttons.",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-button-back]",
            "[UI: Terminal-events-button-check-in]",
            "[UI: Terminal-events-button-next]",
            "[UI: Terminal-events-button-previous]",
            "[UI: Terminal-transitional GIF-events-*event name*-back]"
          ]
        },
        {
          "step_id": "terminal.step_7_option_a-a",
          "step_code": "Step 7 [Option A-A]",
          "title": "Post-transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Discord role Operator]",
                "[UI: Discord channel-Objective Submissions]",
                "[UI: Objectives-review-user submission button-a]",
                "[UI: Objectives-review-user submission button-b]",
                "[UI: Objectives-review-user submission button-c]",
                "[UI: Objectives-review-user submission text]",
                "[UI: Terminal-objectives-GIF-submit]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-audio-file]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-image]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-text-file]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-text]",
                "[UI: Terminal-objectives-submit DM text-2-success]",
                "[UI: Terminal-objectives-submit-button-back]",
                "[UI: Terminal-objectives-submit-button-try-again]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
              ],
              "text": "Timer expires on transitional GIF [UI: Terminal-transitional GIF-objectives-*objective name*-submit] → ephemeral message updates to next Terminal GIF [UI: Terminal-objectives-GIF-submit].\nShow Try Again [UI: Terminal-objectives-submit-button-try-again] + Back buttons [UI: Terminal-objectives-submit-button-back]\nDirect message to user is sent, it will be any of the following depending on the Objectives proof file type:\n[UI: Terminal-objectives-submit DM text-1-file-type-text] which will accept input text responded to in the DM as the submission.\n[UI: Terminal-objectives-submit DM text-1-file-type-image] which will accept PNG, JPEG, GIF & TIF.\n[UI: Terminal-objectives-submit DM text-1-file-type-text-file] which will accept .txt, .docx, .csv, .pdf.\n[UI: Terminal-objectives-submit DM text-1-file-type-audio-file] which will accept MP3, WAV, M4A, AIFF & AAC.\nOnly if the user uploads the correct file type that matches the file type in the objectives uploaded data and they receive another bot message [UI: Terminal-objectives-submit DM text-2-success] then the users Discord ID / Objective ID / file or text they uploaded is uploaded to the database and it is passed along as a permanent message into [UI: Discord channel-Objective Submissions] text channel tagging [UI: Discord role Operator] with text [UI: Objectives-review-user submission text] + buttons [UI: Objectives-review-user submission button-a] + [UI: Objectives-review-user submission button-b] and [UI: Objectives-review-user submission button-c] but [UI: Objectives-review-user submission button-c] will only become active after either Accept or Deny buttons were pressed.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Operator clicks [UI: Objectives-review-user submission button-a] then the Merits listed in the objective upload for that objective ID will be credited to the Discord user who submitted the objective for review + a DM will be sent to that same Discord user [UI: Objectives-review-submission-result DM text-a] the ‘*x*’ Merits data will be filled with a numerical value according to the 'Merits Awarded' data allocated to that objective.",
              "ui_refs": [
                "[UI: Discord channel-Objective Submissions]",
                "[UI: Objectives-review-submission-result DM text-a]",
                "[UI: Objectives-review-user submission button-a]",
                "[UI: Objectives-review-user submission button-b]",
                "[UI: Objectives-review-user submission button-c]",
                "[UI: Objectives-review-user submission text]"
              ],
              "text": "On button clicks for Operator objective reviews ‘accept’ / ‘deny’ or ‘undo’, enforce atomicity: first click wins, subsequent clicks return “Already processed”.\nOnce Objective is approved, 7 days later any submitted content uploaded to the database will be deleted as it is no longer needed and the post [UI: Objectives-review-user submission text] + buttons [UI: Objectives-review-user submission button-a] and [UI: Objectives-review-user submission button-b] will be deleted from [UI: Discord channel-Objective Submissions]. This 7 day timer will reset if Operator selects the undo button [UI: Objectives-review-user submission button-c] on an Objective though."
            },
            {
              "kind": "branch",
              "header": "If Operators click [UI: Objectives-review-user submission button-b] then no Merits will be allocated to the discord user who submitted that objective and that objective will remain active for them to re-submit. The user who submitted the objective will receive a DM from the bot [UI: Objectives-review-submission-result DM text-b] with button [UI: Objectives-review-submission-result DM button-b] and if that button is clicked then depending on the objective file type, any of the these DM’s will be sent:",
              "ui_refs": [
                "[UI: Objectives-review-submission-result DM button-b]",
                "[UI: Objectives-review-submission-result DM text-b]",
                "[UI: Objectives-review-user submission button-a]",
                "[UI: Objectives-review-user submission button-b]",
                "[UI: Objectives-review-user submission text]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-audio-file]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-image]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-text-file]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-text]"
              ],
              "text": "[UI: Terminal-objectives-submit DM text-1-file-type-text] which will accept input text responded to in the DM as the submission.\n[UI: Terminal-objectives-submit DM text-1-file-type-image] which will accept PNG, JPEG, GIF & TIF.\n[UI: Terminal-objectives-submit DM text-1-file-type-text-file] which will accept .txt, .docx, .csv, .pdf.\n[UI: Terminal-objectives-submit DM text-1-file-type-audio-file] which will accept MP3, WAV, M4A, AIFF & AAC.\nAnd they can upload their proof for that objective and follow the usual flow. Operators can only press the accept or deny button once, they cannot press both or press repeatedly. If another submission of that same objective is sent by a user after their first submission was denied, another [UI: Objectives-review-user submission text] + buttons [UI: Objectives-review-user submission button-a] and [UI: Objectives-review-user submission button-b] will be sent."
            }
          ],
          "ui_refs": [
            "[UI: Discord role Operator]",
            "[UI: Discord channel-Objective Submissions]",
            "[UI: Objectives-review-submission-result DM button-b]",
            "[UI: Objectives-review-submission-result DM text-a]",
            "[UI: Objectives-review-submission-result DM text-b]",
            "[UI: Objectives-review-user submission button-a]",
            "[UI: Objectives-review-user submission button-b]",
            "[UI: Objectives-review-user submission button-c]",
            "[UI: Objectives-review-user submission text]",
            "[UI: Terminal-objectives-GIF-submit]",
            "[UI: Terminal-objectives-submit DM text-1-file-type-audio-file]",
            "[UI: Terminal-objectives-submit DM text-1-file-type-image]",
            "[UI: Terminal-objectives-submit DM text-1-file-type-text-file]",
            "[UI: Terminal-objectives-submit DM text-1-file-type-text]",
            "[UI: Terminal-objectives-submit DM text-2-success]",
            "[UI: Terminal-objectives-submit-button-back]",
            "[UI: Terminal-objectives-submit-button-try-again]",
            "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
          ]
        },
        {
          "step_id": "terminal.step_7_option_b-a",
          "step_code": "Step 7 [Option B-A]",
          "title": "Post-transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Discord Role Event X: Checked In]",
                "[UI: Terminal-events-check-in DM text]",
                "[UI: Terminal-events-check-in GIF]",
                "[UI: Terminal-events-check-in-button-back]",
                "[UI: Terminal-events-check-in-button-try-again]",
                "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
              ],
              "text": "Timer expires on transitional GIF [UI: Terminal-transitional GIF-events-*event name*-check-in] → ephemeral message updates to next Terminal GIF [UI: Terminal-events-check-in GIF].\nShow Try Again [UI: Terminal-events-check-in-button-try-again] + Back buttons [UI: Terminal-events-check-in-button-back]\nDirect message to user is sent [UI: Terminal-events-check-in DM text] + [UI: Discord Role Event X: Checked In] will be assigned the Discord user.\nIt will assign them the corresponding role that is connected to that event (according to the events data uploaded by Operators). Even if the Try Again button is pressed again, if user already has the role, it will not do anything aside from resend the [UI: Terminal-events-check-in DM text] DM.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Discord Role Event X: Checked In]",
            "[UI: Terminal-events-check-in DM text]",
            "[UI: Terminal-events-check-in GIF]",
            "[UI: Terminal-events-check-in-button-back]",
            "[UI: Terminal-events-check-in-button-try-again]",
            "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
          ]
        },
        {
          "step_id": "terminal.step_7_option_a-b",
          "step_code": "Step 7 [Option A-B]",
          "title": "Post-transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-button]",
                "[UI: Terminal-main menu-GIF]",
                "[UI: Terminal-objectives-button]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-back]"
              ],
              "text": "Timer expires on transitional GIF [UI: Terminal-transitional GIF-objectives-*objective name*-back] → ephemeral message updates to previous Terminal GIF [UI: Terminal-main menu-GIF]\nShow Objectives [UI: Terminal-objectives-button] & Events buttons [UI: Terminal-events-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-button]",
            "[UI: Terminal-main menu-GIF]",
            "[UI: Terminal-objectives-button]",
            "[UI: Terminal-transitional GIF-objectives-*objective name*-back]"
          ]
        },
        {
          "step_id": "terminal.step_7_option_b-b",
          "step_code": "Step 7 [Option B-B]",
          "title": "Post-transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-button]",
                "[UI: Terminal-main menu-GIF]",
                "[UI: Terminal-objectives-button]",
                "[UI: Terminal-transitional GIF-events-*event name*-back]"
              ],
              "text": "Timer expires on transitional GIF [UI: Terminal-transitional GIF-events-*event name*-back] → ephemeral message updates to previous Terminal GIF [UI: Terminal-main menu-GIF]\nShow Objectives [UI: Terminal-objectives-button] & Events buttons [UI: Terminal-events-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-button]",
            "[UI: Terminal-main menu-GIF]",
            "[UI: Terminal-objectives-button]",
            "[UI: Terminal-transitional GIF-events-*event name*-back]"
          ]
        },
        {
          "step_id": "terminal.step_8_option_a-a-a",
          "step_code": "Step 8 [Option A-A-A]",
          "title": "Try Again button is clicked (within objectives screen [UI: Terminal-objectives-GIF-submit]).",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-objectives-submit-button-back]",
                "[UI: Terminal-objectives-submit-button-try-again]",
                "[UI: Terminal-transitional GIF-objectives-submit-try-again]"
              ],
              "text": "Ephemeral updates to [UI: Terminal-transitional GIF-objectives-submit-try-again] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\n• Disable Try Again [UI: Terminal-objectives-submit-button-try-again] + Back buttons [UI: Terminal-objectives-submit-button-back]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Post-transition",
              "ui_refs": [
                "[UI: Terminal-objectives-GIF-submit]",
                "[UI: Terminal-objectives-submit-button-back]",
                "[UI: Terminal-objectives-submit-button-try-again]",
                "[UI: Terminal-transitional GIF-objectives-submit-try-again]"
              ],
              "text": "Timer expires on transitional GIF [UI: Terminal-transitional GIF-objectives-submit-try-again] → ephemeral message updates back to Terminal GIF [UI: Terminal-objectives-GIF-submit].\nShow Try Again [UI: Terminal-objectives-submit-button-try-again] + Back buttons [UI: Terminal-objectives-submit-button-back]\nThis will happen each time Try Again is clicked.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-objectives-GIF-submit]",
            "[UI: Terminal-objectives-submit-button-back]",
            "[UI: Terminal-objectives-submit-button-try-again]",
            "[UI: Terminal-transitional GIF-objectives-submit-try-again]"
          ]
        },
        {
          "step_id": "terminal.step_8_option_b-a-a",
          "step_code": "Step 8 [Option B-A-A]",
          "title": "Try Again button is clicked (within events check-in screen [UI: Terminal-events-check-in GIF].",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-check-in-button-back]",
                "[UI: Terminal-events-check-in-button-try-again]",
                "[UI: Terminal-transitional GIF-events-check-in-try-again]"
              ],
              "text": "Ephemeral updates to [UI: Terminal-transitional GIF-events-check-in-try-again] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\n• Disable Try Again [UI: Terminal-events-check-in-button-try-again] + Back buttons [UI: Terminal-events-check-in-button-back]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Post-transition",
              "ui_refs": [
                "[UI: Terminal-events-check-in GIF]",
                "[UI: Terminal-events-check-in-button-back]",
                "[UI: Terminal-events-check-in-button-try-again]",
                "[UI: Terminal-transitional GIF-events-check-in-try-again]"
              ],
              "text": "Timer expires on transitional GIF [UI: Terminal-transitional GIF-events-check-in-try-again] → ephemeral message updates back to Terminal GIF [UI: Terminal-events-check-in GIF]..\nShow Try Again [UI: Terminal-events-check-in-button-try-again] + Back buttons [UI: Terminal-events-check-in-button-back]\nThis will happen each time Try Again is clicked.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-check-in GIF]",
            "[UI: Terminal-events-check-in-button-back]",
            "[UI: Terminal-events-check-in-button-try-again]",
            "[UI: Terminal-transitional GIF-events-check-in-try-again]"
          ]
        },
        {
          "step_id": "terminal.step_8_option_a-a-b",
          "step_code": "Step 8 [Option A-A-B]",
          "title": "Back button is clicked (within objectives screen [UI: Terminal-objectives-GIF-submit]).",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-objectives-submit-button-back]",
                "[UI: Terminal-objectives-submit-button-try-again]",
                "[UI: Terminal-transitional GIF-objectives-submit-back]"
              ],
              "text": "Ephemeral updates to transitional GIF [UI: Terminal-transitional GIF-objectives-submit-back] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\n• Disable Try Again [UI: Terminal-objectives-submit-button-try-again] + Back buttons [UI: Terminal-objectives-submit-button-back]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-objectives-submit-button-back]",
            "[UI: Terminal-objectives-submit-button-try-again]",
            "[UI: Terminal-transitional GIF-objectives-submit-back]"
          ]
        },
        {
          "step_id": "terminal.step_8_option_b-a-b",
          "step_code": "Step 8 [Option B-A-B]",
          "title": "Back button is clicked (within events check-in screen [UI: Terminal-events-check-in GIF].",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-check-in-button-back]",
                "[UI: Terminal-events-check-in-button-try-again]",
                "[UI: Terminal-transitional GIF-events-check-in-back]"
              ],
              "text": "Ephemeral updates to transitional GIF [UI: Terminal-transitional GIF-events-check-in-back] (plays only 1 loop – bot will have countdown timer 1x duration of GIF)\n• Disable Try Again [UI: Terminal-events-check-in-button-try-again] + Back buttons [UI: Terminal-events-check-in-button-back]",
              "instructions": [
                {
                  "type": "gif_loops",
                  "value": 1
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-check-in-button-back]",
            "[UI: Terminal-events-check-in-button-try-again]",
            "[UI: Terminal-transitional GIF-events-check-in-back]"
          ]
        },
        {
          "step_id": "terminal.step_9_option_a-a-a",
          "step_code": "Step 9 [Option A-A-A]",
          "title": "Post Transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-objectives-submit-button-back]",
                "[UI: Terminal-objectives-submit-button-try-again]"
              ],
              "text": "Show Try Again [UI: Terminal-objectives-submit-button-try-again] + Back buttons [UI: Terminal-objectives-submit-button-back]\nDirect message to user is sent DM is resent using the same file-type DM component as Step 7\nNote: User can click the Try Again button as many times as they want, it will just follow the process of Step 8 and Step 9 [Option A-A-A]."
            }
          ],
          "ui_refs": [
            "[UI: Terminal-objectives-submit-button-back]",
            "[UI: Terminal-objectives-submit-button-try-again]"
          ]
        },
        {
          "step_id": "terminal.step_9_option_b-a-a",
          "step_code": "Step 9 [Option B-A-A]",
          "title": "Post Transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Discord Role Event 1 Checked In]",
                "[UI: Discord Role Event 2 Checked In]",
                "[UI: Discord Role Event 3 Checked In]",
                "[UI: Discord Role Event 4 Checked In]",
                "[UI: Discord Role Event 5 Checked In]",
                "[UI: Terminal-events-check-in DM text]",
                "[UI: Terminal-events-check-in-button-back]",
                "[UI: Terminal-events-check-in-button-try-again]"
              ],
              "text": "Show Try Again [UI: Terminal-events-check-in-button-try-again] + Back buttons [UI: Terminal-events-check-in-button-back]\nDirect message to user is sent [UI: Terminal-events-check-in DM text] + it will assign them the corresponding role that is connected to that event (according to the events data uploaded by Operators) – which could be any of the following:\n[UI: Discord Role Event 1 Checked In]\n[UI: Discord Role Event 2 Checked In]\n[UI: Discord Role Event 3 Checked In]\n[UI: Discord Role Event 4 Checked In]\n[UI: Discord Role Event 5 Checked In]\nEven if the Try Again button is pressed again, if user already has the role, it will not do anything aside from resend the [UI: Terminal-events-check-in DM text] DM.\nNote: User can click the Try Again button as many times as they want, it will just follow the process of Step 8 and Step 9 [Option B-A-A]."
            }
          ],
          "ui_refs": [
            "[UI: Discord Role Event 1 Checked In]",
            "[UI: Discord Role Event 2 Checked In]",
            "[UI: Discord Role Event 3 Checked In]",
            "[UI: Discord Role Event 4 Checked In]",
            "[UI: Discord Role Event 5 Checked In]",
            "[UI: Terminal-events-check-in DM text]",
            "[UI: Terminal-events-check-in-button-back]",
            "[UI: Terminal-events-check-in-button-try-again]"
          ]
        },
        {
          "step_id": "terminal.step_9_option_a-a-b",
          "step_code": "Step 9 [Option A-A-B]",
          "title": "Post Transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-objectives-GIF-*objective name*-main]",
                "[UI: Terminal-objectives-button-back]",
                "[UI: Terminal-objectives-button-next]",
                "[UI: Terminal-objectives-button-previous]",
                "[UI: Terminal-objectives-button-submit]",
                "[UI: Terminal-transitional GIF-objectives-submit-back]"
              ],
              "text": "• Timer expires on transitional GIF [UI: Terminal-transitional GIF-objectives-submit-back] → ephemeral message updates to previous Terminal GIF [UI: Terminal-objectives-GIF-*objective name*-main].\nShow Submit [UI: Terminal-objectives-button-submit] + Back [UI: Terminal-objectives-button-back], next [UI: Terminal-objectives-button-next], previous [UI: Terminal-objectives-button-previous] buttons.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-objectives-GIF-*objective name*-main]",
            "[UI: Terminal-objectives-button-back]",
            "[UI: Terminal-objectives-button-next]",
            "[UI: Terminal-objectives-button-previous]",
            "[UI: Terminal-objectives-button-submit]",
            "[UI: Terminal-transitional GIF-objectives-submit-back]"
          ]
        },
        {
          "step_id": "terminal.step_9_option_b-a-b",
          "step_code": "Step 9 [Option B-A-B]",
          "title": "Post Transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Terminal-events-GIF-*event name*-main]",
                "[UI: Terminal-events-button-back]",
                "[UI: Terminal-events-button-check-in]",
                "[UI: Terminal-transitional GIF-events-check-in-back]"
              ],
              "text": "• Timer expires on transitional GIF [UI: Terminal-transitional GIF-events-check-in-back] → ephemeral message updates to same Terminal GIF [UI: Terminal-events-GIF-*event name*-main].\nShow Check-in [UI: Terminal-events-button-check-in] + Back buttons [UI: Terminal-events-button-back]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Terminal-events-GIF-*event name*-main]",
            "[UI: Terminal-events-button-back]",
            "[UI: Terminal-events-button-check-in]",
            "[UI: Terminal-transitional GIF-events-check-in-back]"
          ]
        }
      ]
    },
    {
      "flow_id": "operator_terminal",
      "title": "Operator Terminal",
      "channel_ui": "[UI: Discord channel-operator-terminal]",
      "channel_ids": {
        "testing": "1462028463677505679",
        "production": "1462706543773614123"
      },
      "preface": "All steps take place in text channels:\nTesting channel ID: 1462028463677505679\nProduction channel ID: 1462706543773614123",
      "steps": [
        {
          "step_id": "operator_terminal.step_1",
          "step_code": "Step 1",
          "title": "Access Operator Terminal post (public + permanent)",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-[UI: Terminal-access text]",
                "[UI: Operator-Terminal-access-button]"
              ],
              "text": "• Access Operator Terminal post text [UI: Operator-[UI: Terminal-access text]\n• Access Operator Terminal post button [UI: Operator-Terminal-access-button]"
            }
          ],
          "ui_refs": [
            "[UI: Operator-[UI: Terminal-access text]",
            "[UI: Operator-Terminal-access-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_2",
          "step_code": "Step 2",
          "title": "Access button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-access-button]",
                "[UI: Operator-Terminal-commands-button]",
                "[UI: Operator-Terminal-events-button]",
                "[UI: Operator-Terminal-menu]",
                "[UI: Operator-[UI: Terminal-objectives-button]"
              ],
              "text": "• Trigger ephemeral message [UI: Operator-Terminal-menu]\n• Keep [UI: Operator-Terminal-access-button] enabled always, but make it idempotent (pressing it just refreshes their ephemeral session)\n• Show main menu buttons:\n• Objectives [UI: Operator-[UI: Terminal-objectives-button]\n• Events [UI: Operator-Terminal-events-button]\n• Commands [UI: Operator-Terminal-commands-button]",
              "instructions": [
                {
                  "type": "idempotency",
                  "value": "idempotent"
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-access-button]",
            "[UI: Operator-Terminal-commands-button]",
            "[UI: Operator-Terminal-events-button]",
            "[UI: Operator-Terminal-menu]",
            "[UI: Operator-[UI: Terminal-objectives-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_3",
          "step_code": "Step 3",
          "title": "Objectives / Events / Commands selection",
          "blocks": [],
          "ui_refs": []
        },
        {
          "step_id": "operator_terminal.step_3_option_a",
          "step_code": "Step 3 [Option A]",
          "title": "Objectives button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-commands-button]",
                "[UI: Operator-Terminal-events-button]",
                "[UI: Operator-[UI: Terminal-objectives-button-back]",
                "[UI: Operator-Terminal-objectives-button-scheduling]",
                "[UI: Operator-Terminal-objectives-button-upload]",
                "[UI: Operator-[UI: Terminal-objectives-button]",
                "[UI: Operator-Terminal-objectives-menu]"
              ],
              "text": "• Disable Objectives [UI: Operator-[UI: Terminal-objectives-button], Events [UI: Operator-Terminal-events-button], Commands [UI: Operator-Terminal-commands-button]\n• Ephemeral message updates to [UI: Operator-Terminal-objectives-menu]\n• Show:\n• Objective Upload [UI: Operator-Terminal-objectives-button-upload]\n• Objective Scheduling [UI: Operator-Terminal-objectives-button-scheduling]\n• Back [UI: Operator-[UI: Terminal-objectives-button-back]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-button]",
            "[UI: Operator-Terminal-events-button]",
            "[UI: Operator-[UI: Terminal-objectives-button-back]",
            "[UI: Operator-Terminal-objectives-button-scheduling]",
            "[UI: Operator-Terminal-objectives-button-upload]",
            "[UI: Operator-[UI: Terminal-objectives-button]",
            "[UI: Operator-Terminal-objectives-menu]"
          ]
        },
        {
          "step_id": "operator_terminal.step_3_option_b",
          "step_code": "Step 3 [Option B]",
          "title": "Events button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-commands-button]",
                "[UI: Operator-[UI: Terminal-events-button-back]",
                "[UI: Operator-Terminal-events-button-scheduling]",
                "[UI: Operator-Terminal-events-button-upload]",
                "[UI: Operator-Terminal-events-button]",
                "[UI: Operator-Terminal-events-menu]",
                "[UI: Operator-[UI: Terminal-objectives-button]"
              ],
              "text": "• Disable Objectives [UI: Operator-[UI: Terminal-objectives-button], Events [UI: Operator-Terminal-events-button], Commands [UI: Operator-Terminal-commands-button]\n• Ephemeral message updates to [UI: Operator-Terminal-events-menu]\n• Show:\n• Upload [UI: Operator-Terminal-events-button-upload]\n• Scheduling [UI: Operator-Terminal-events-button-scheduling]\n• Back [UI: Operator-[UI: Terminal-events-button-back]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-button]",
            "[UI: Operator-[UI: Terminal-events-button-back]",
            "[UI: Operator-Terminal-events-button-scheduling]",
            "[UI: Operator-Terminal-events-button-upload]",
            "[UI: Operator-Terminal-events-button]",
            "[UI: Operator-Terminal-events-menu]",
            "[UI: Operator-[UI: Terminal-objectives-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_3_option_c",
          "step_code": "Step 3 [Option C]",
          "title": "Commands button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-commands-button-announcement]",
                "[UI: Operator-Terminal-commands-button-back]",
                "[UI: Operator-Terminal-commands-button-merit-transfer]",
                "[UI: Operator-Terminal-commands-button-roll-call]",
                "[UI: Operator-Terminal-commands-button]",
                "[UI: Operator-Terminal-commands-menu]",
                "[UI: Operator-Terminal-events-button]",
                "[UI: Operator-[UI: Terminal-objectives-button]"
              ],
              "text": "• Disable Objectives [UI: Operator-[UI: Terminal-objectives-button], Events [UI: Operator-Terminal-events-button], Commands [UI: Operator-Terminal-commands-button]\n• Ephemeral message updates to [UI: Operator-Terminal-commands-menu]\n• Show:\n• Initiate Roll Call [UI: Operator-Terminal-commands-button-roll-call]\n• Initiate Announcement [UI: Operator-Terminal-commands-button-announcement]\n• Merit Transfer [UI: Operator-Terminal-commands-button-merit-transfer]\n• Back [UI: Operator-Terminal-commands-button-back]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-button-announcement]",
            "[UI: Operator-Terminal-commands-button-back]",
            "[UI: Operator-Terminal-commands-button-merit-transfer]",
            "[UI: Operator-Terminal-commands-button-roll-call]",
            "[UI: Operator-Terminal-commands-button]",
            "[UI: Operator-Terminal-commands-menu]",
            "[UI: Operator-Terminal-events-button]",
            "[UI: Operator-[UI: Terminal-objectives-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_4",
          "step_code": "Step 4",
          "title": "Objectives submenu actions",
          "blocks": [],
          "ui_refs": []
        },
        {
          "step_id": "operator_terminal.step_4_option_a-a",
          "step_code": "Step 4 [Option A-A]",
          "title": "Objective Upload clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-[UI: Terminal-objectives-button-back]",
                "[UI: Operator-Terminal-objectives-button-scheduling]",
                "[UI: Operator-Terminal-objectives-button-upload]"
              ],
              "text": "• Disable Objective Upload [UI: Operator-Terminal-objectives-button-upload], Objective Scheduling [UI: Operator-Terminal-objectives-button-scheduling], Back [UI: Operator-[UI: Terminal-objectives-button-back]\n• Proceed to Objective Upload flow (Step 5)"
            }
          ],
          "ui_refs": [
            "[UI: Operator-[UI: Terminal-objectives-button-back]",
            "[UI: Operator-Terminal-objectives-button-scheduling]",
            "[UI: Operator-Terminal-objectives-button-upload]"
          ]
        },
        {
          "step_id": "operator_terminal.step_4_option_a-b",
          "step_code": "Step 4 [Option A-B]",
          "title": "Objective Scheduling clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-[UI: Terminal-objectives-button-back]",
                "[UI: Operator-Terminal-objectives-button-scheduling]",
                "[UI: Operator-Terminal-objectives-button-upload]"
              ],
              "text": "• Disable Objective Upload [UI: Operator-Terminal-objectives-button-upload], Objective Scheduling [UI: Operator-Terminal-objectives-button-scheduling], Back [UI: Operator-[UI: Terminal-objectives-button-back]\n• Proceed to Objective Scheduling flow"
            }
          ],
          "ui_refs": [
            "[UI: Operator-[UI: Terminal-objectives-button-back]",
            "[UI: Operator-Terminal-objectives-button-scheduling]",
            "[UI: Operator-Terminal-objectives-button-upload]"
          ]
        },
        {
          "step_id": "operator_terminal.step_4_option_a-c",
          "step_code": "Step 4 [Option A-C]",
          "title": "Back clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-commands-button]",
                "[UI: Operator-Terminal-events-button]",
                "[UI: Operator-Terminal-menu]",
                "[UI: Operator-[UI: Terminal-objectives-button]"
              ],
              "text": "• Return to main menu [UI: Operator-Terminal-menu]\n• Re-enable:\n• Objectives [UI: Operator-[UI: Terminal-objectives-button]\n• Events [UI: Operator-Terminal-events-button]\n• Commands [UI: Operator-Terminal-commands-button]"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-button]",
            "[UI: Operator-Terminal-events-button]",
            "[UI: Operator-Terminal-menu]",
            "[UI: Operator-[UI: Terminal-objectives-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_4",
          "step_code": "Step 4",
          "title": "Events submenu actions",
          "blocks": [],
          "ui_refs": []
        },
        {
          "step_id": "operator_terminal.step_4_option_b-a",
          "step_code": "Step 4 [Option B-A]",
          "title": "Upload clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-[UI: Terminal-events-button-back]",
                "[UI: Operator-Terminal-events-button-scheduling]",
                "[UI: Operator-Terminal-events-button-upload]"
              ],
              "text": "• Disable Upload [UI: Operator-Terminal-events-button-upload], Scheduling [UI: Operator-Terminal-events-button-scheduling], Back [UI: Operator-[UI: Terminal-events-button-back]\n• Proceed to Event Upload flow"
            }
          ],
          "ui_refs": [
            "[UI: Operator-[UI: Terminal-events-button-back]",
            "[UI: Operator-Terminal-events-button-scheduling]",
            "[UI: Operator-Terminal-events-button-upload]"
          ]
        },
        {
          "step_id": "operator_terminal.step_4_option_b-b",
          "step_code": "Step 4 [Option B-B]",
          "title": "Scheduling clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-[UI: Terminal-events-button-back]",
                "[UI: Operator-Terminal-events-button-scheduling]",
                "[UI: Operator-Terminal-events-button-upload]"
              ],
              "text": "• Disable Upload [UI: Operator-Terminal-events-button-upload], Scheduling [UI: Operator-Terminal-events-button-scheduling], Back [UI: Operator-[UI: Terminal-events-button-back]\n• Proceed to Event Scheduling flow"
            }
          ],
          "ui_refs": [
            "[UI: Operator-[UI: Terminal-events-button-back]",
            "[UI: Operator-Terminal-events-button-scheduling]",
            "[UI: Operator-Terminal-events-button-upload]"
          ]
        },
        {
          "step_id": "operator_terminal.step_4_option_b-c",
          "step_code": "Step 4 [Option B-C]",
          "title": "Back clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-commands-button]",
                "[UI: Operator-Terminal-events-button]",
                "[UI: Operator-Terminal-menu]",
                "[UI: Operator-[UI: Terminal-objectives-button]"
              ],
              "text": "• Return to main menu [UI: Operator-Terminal-menu]\n• Re-enable:\n• Objectives [UI: Operator-[UI: Terminal-objectives-button]\n• Events [UI: Operator-Terminal-events-button]\n• Commands [UI: Operator-Terminal-commands-button]"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-button]",
            "[UI: Operator-Terminal-events-button]",
            "[UI: Operator-Terminal-menu]",
            "[UI: Operator-[UI: Terminal-objectives-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_4",
          "step_code": "Step 4",
          "title": "Commands submenu actions",
          "blocks": [],
          "ui_refs": []
        },
        {
          "step_id": "operator_terminal.step_4_option_c-a",
          "step_code": "Step 4 [Option C-A]",
          "title": "Initiate Roll Call clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-commands-button-announcement]",
                "[UI: Operator-Terminal-commands-button-back]",
                "[UI: Operator-Terminal-commands-button-merit-transfer]",
                "[UI: Operator-Terminal-commands-button-roll-call]"
              ],
              "text": "• Disable Roll Call [UI: Operator-Terminal-commands-button-roll-call], Announcement [UI: Operator-Terminal-commands-button-announcement], Merit Transfer [UI: Operator-Terminal-commands-button-merit-transfer], Back [UI: Operator-Terminal-commands-button-back]\n• Proceed to Roll Call flow"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-button-announcement]",
            "[UI: Operator-Terminal-commands-button-back]",
            "[UI: Operator-Terminal-commands-button-merit-transfer]",
            "[UI: Operator-Terminal-commands-button-roll-call]"
          ]
        },
        {
          "step_id": "operator_terminal.step_4_option_c-b",
          "step_code": "Step 4 [Option C-B]",
          "title": "Initiate Announcement clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-commands-button-announcement]",
                "[UI: Operator-Terminal-commands-button-back]",
                "[UI: Operator-Terminal-commands-button-merit-transfer]",
                "[UI: Operator-Terminal-commands-button-roll-call]"
              ],
              "text": "• Disable Roll Call [UI: Operator-Terminal-commands-button-roll-call], Announcement [UI: Operator-Terminal-commands-button-announcement], Merit Transfer [UI: Operator-Terminal-commands-button-merit-transfer], Back [UI: Operator-Terminal-commands-button-back]\n• Proceed to Announcement flow"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-button-announcement]",
            "[UI: Operator-Terminal-commands-button-back]",
            "[UI: Operator-Terminal-commands-button-merit-transfer]",
            "[UI: Operator-Terminal-commands-button-roll-call]"
          ]
        },
        {
          "step_id": "operator_terminal.step_4_option_c-c",
          "step_code": "Step 4 [Option C-C]",
          "title": "Initiate Merit Transfer clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-commands-button-announcement]",
                "[UI: Operator-Terminal-commands-button-back]",
                "[UI: Operator-Terminal-commands-button-merit-transfer]",
                "[UI: Operator-Terminal-commands-button-roll-call]"
              ],
              "text": "• Disable Roll Call [UI: Operator-Terminal-commands-button-roll-call], Announcement [UI: Operator-Terminal-commands-button-announcement], Merit Transfer [UI: Operator-Terminal-commands-button-merit-transfer], Back [UI: Operator-Terminal-commands-button-back]\n• Proceed to Merit Transfer flow"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-button-announcement]",
            "[UI: Operator-Terminal-commands-button-back]",
            "[UI: Operator-Terminal-commands-button-merit-transfer]",
            "[UI: Operator-Terminal-commands-button-roll-call]"
          ]
        },
        {
          "step_id": "operator_terminal.step_4_option_c-d",
          "step_code": "Step 4 [Option C-D]",
          "title": "Back clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-commands-button]",
                "[UI: Operator-Terminal-events-button]",
                "[UI: Operator-Terminal-menu]",
                "[UI: Operator-[UI: Terminal-objectives-button]"
              ],
              "text": "• Return to main menu [UI: Operator-Terminal-menu]\n• Re-enable:\n• Objectives [UI: Operator-[UI: Terminal-objectives-button]\n• Events [UI: Operator-Terminal-events-button]\n• Commands [UI: Operator-Terminal-commands-button]"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-button]",
            "[UI: Operator-Terminal-events-button]",
            "[UI: Operator-Terminal-menu]",
            "[UI: Operator-[UI: Terminal-objectives-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5_option_a-a",
          "step_code": "Step 5 [Option A-A]",
          "title": "Objectives Upload screen (no GIFs, buttons only)",
          "blocks": [
            {
              "kind": "section",
              "header": "On entry",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-button]",
                "[UI: Operator-Terminal-objectives-upload-back-button]",
                "[UI: Operator-Terminal-objectives-upload-file-type-button]",
                "[UI: Operator-Terminal-objectives-upload-menu]",
                "[UI: Operator-Terminal-objectives-upload-merits-awarded-button]",
                "[UI: Operator-Terminal-objectives-upload-name-button]",
                "[UI: Operator-Terminal-objectives-upload-schedule-button]",
                "[UI: Operator-Terminal-objectives-upload-submit-objective-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-objectives-upload-menu]\n• Show buttons (all visible, but enabled sequentially):\nObjective Name [UI: Operator-Terminal-objectives-upload-name-button]\nMerits Awarded [UI: Operator-Terminal-objectives-upload-merits-awarded-button]\nSchedule [UI: Operator-Terminal-objectives-upload-schedule-button]\nProof File Type [UI: Operator-Terminal-objectives-upload-file-type-button]\nGIF [UI: Operator-Terminal-objectives-upload-GIF-button]\nSubmit Objective [UI: Operator-Terminal-objectives-upload-submit-objective-button]\nBack [UI: Operator-Terminal-objectives-upload-back-button]\nUnlock rule (replaces “GIF stages”)\n• Buttons unlock in this order:\n[UI: Operator-Terminal-objectives-upload-name-button]\n[UI: Operator-Terminal-objectives-upload-merits-awarded-button]\n[UI: Operator-Terminal-objectives-upload-schedule-button]\n[UI: Operator-Terminal-objectives-upload-file-type-button]\n[UI: Operator-Terminal-objectives-upload-GIF-button]\n[UI: Operator-Terminal-objectives-upload-submit-objective-button] (only when all required fields are completed)\n• Back [UI: Operator-Terminal-objectives-upload-back-button] is always available.\nDraft save rule (applies to all fields)\n• Rule: Each “Submit” action (modal submit or menu submit) updates the same draft objective record (status=draft).\n• Rule: Draft creation / resume. On entry to [UI: Operator-Terminal-objectives-upload-menu]:\n• If no draft exists for this operator: create new draft with status=draft and set created_at/updated_at.\n• If draft exists: load it and render completion (blue) states + locked/unlocked buttons accordingly.\n• Rule: Upload process submit: Create objective from draft (finalize).\n• Rule: Scheduling process submit: Apply edit draft to objective (update).\n• Rule: Cancel/Back exits the current modal/menu without committing changes.\n“Blue button” rule (completed fields)\n• Rule: Clicking a completed (blue) upload button re-opens its modal/menu with saved values pre-filled / pre-selected.\n• Rule: The modal/menu “Submit” is disabled unless the user changes something.\n• Rule: After submitting changes, return to the [UI: Operator-Terminal-objectives-upload-menu] with no new unlocks and all prior completion state preserved.\nTransition disable rule\n• Rule: During any transition into a modal/menu (and returning from it), disable all upload buttons until the next screen state is rendered.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-upload-GIF-button]",
            "[UI: Operator-Terminal-objectives-upload-back-button]",
            "[UI: Operator-Terminal-objectives-upload-file-type-button]",
            "[UI: Operator-Terminal-objectives-upload-menu]",
            "[UI: Operator-Terminal-objectives-upload-merits-awarded-button]",
            "[UI: Operator-Terminal-objectives-upload-name-button]",
            "[UI: Operator-Terminal-objectives-upload-schedule-button]",
            "[UI: Operator-Terminal-objectives-upload-submit-objective-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5a",
          "step_code": "Step 5A",
          "title": "Objective Name flow (Objective Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Objective Name is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-name-modal-button-cancel]",
                "[UI: Operator-Terminal-objectives-upload-name-modal-button-submit]",
                "[UI: Operator-Terminal-objectives-upload-name-modal-input-field]",
                "[UI: Operator-Terminal-objectives-upload-name-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-objectives-upload-name-modal]\nInput: [UI: Operator-Terminal-objectives-upload-name-modal-input-field]\nButton: [UI: Operator-Terminal-objectives-upload-name-modal-button-submit]\nButton: [UI: Operator-Terminal-objectives-upload-name-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-menu]",
                "[UI: Operator-Terminal-objectives-upload-merits-awarded-button]",
                "[UI: Operator-Terminal-objectives-upload-name-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• On Submit: save to draft → mark [UI: Operator-Terminal-objectives-upload-name-button] complete (blue) → enable next button [UI: Operator-Terminal-objectives-upload-merits-awarded-button]\n• On Cancel: close modal → return to [UI: Operator-Terminal-objectives-upload-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-upload-menu]",
            "[UI: Operator-Terminal-objectives-upload-merits-awarded-button]",
            "[UI: Operator-Terminal-objectives-upload-name-button]",
            "[UI: Operator-Terminal-objectives-upload-name-modal-button-cancel]",
            "[UI: Operator-Terminal-objectives-upload-name-modal-button-submit]",
            "[UI: Operator-Terminal-objectives-upload-name-modal-input-field]",
            "[UI: Operator-Terminal-objectives-upload-name-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5b",
          "step_code": "Step 5B",
          "title": "Merits Awarded flow (Objective Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Merits Awarded is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-merits-awarded-modal-button-cancel]",
                "[UI: Operator-Terminal-objectives-upload-merits-awarded-modal-button-submit]",
                "[UI: Operator-Terminal-objectives-upload-merits-awarded-modal-input-field]",
                "[UI: Operator-Terminal-objectives-upload-merits-awarded-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-objectives-upload-merits-awarded-modal]\nInput: [UI: Operator-Terminal-objectives-upload-merits-awarded-modal-input-field]\nButton: [UI: Operator-Terminal-objectives-upload-merits-awarded-modal-button-submit]\nButton: [UI: Operator-Terminal-objectives-upload-merits-awarded-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-menu]",
                "[UI: Operator-Terminal-objectives-upload-merits-awarded-button]",
                "[UI: Operator-Terminal-objectives-upload-schedule-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• On Submit: save to draft → mark [UI: Operator-Terminal-objectives-upload-merits-awarded-button] complete (blue) → enable next button [UI: Operator-Terminal-objectives-upload-schedule-button]\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-objectives-upload-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-upload-menu]",
            "[UI: Operator-Terminal-objectives-upload-merits-awarded-button]",
            "[UI: Operator-Terminal-objectives-upload-merits-awarded-modal-button-cancel]",
            "[UI: Operator-Terminal-objectives-upload-merits-awarded-modal-button-submit]",
            "[UI: Operator-Terminal-objectives-upload-merits-awarded-modal-input-field]",
            "[UI: Operator-Terminal-objectives-upload-merits-awarded-modal]",
            "[UI: Operator-Terminal-objectives-upload-schedule-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5c",
          "step_code": "Step 5C",
          "title": "Schedule flow (Objective Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Schedule is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-schedule-modal-button-cancel]",
                "[UI: Operator-Terminal-objectives-upload-schedule-modal-button-submit]",
                "[UI: Operator-Terminal-objectives-upload-schedule-modal-input-field-begin-date]",
                "[UI: Operator-Terminal-objectives-upload-schedule-modal-input-field-end-date]",
                "[UI: Operator-Terminal-objectives-upload-schedule-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-objectives-upload-schedule-modal]\nBegin: [UI: Operator-Terminal-objectives-upload-schedule-modal-input-field-begin-date]\nEnd: [UI: Operator-Terminal-objectives-upload-schedule-modal-input-field-end-date]\nButton: [UI: Operator-Terminal-objectives-upload-schedule-modal-button-submit]\nButton: [UI: Operator-Terminal-objectives-upload-schedule-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-file-type-button]",
                "[UI: Operator-Terminal-objectives-upload-menu]",
                "[UI: Operator-Terminal-objectives-upload-schedule-button]"
              ],
              "text": "• Submit enabled only when both date fields are valid.\n• On Submit: save to draft → mark [UI: Operator-Terminal-objectives-upload-schedule-button] complete (blue) → enable next button [UI: Operator-Terminal-objectives-upload-file-type-button]\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-objectives-upload-menu] → no state change."
            },
            {
              "kind": "section",
              "header": "Schedule specific rules:",
              "ui_refs": [],
              "text": "This schedule data will guide when an Objective should be ported aka change states to 'active' (0:00am / 12am of begin date – PT time zone) into the terminal for users and when it should be removed (23:59 / 11:59pm of end date - PT) aka change states to 'expired'. The state of an objective with all data submitted but has not ported will be 'scheduled'."
            },
            {
              "kind": "section",
              "header": "What happens when an Objective enters the begin date:",
              "ui_refs": [
                "[UI: Discord channel-Objective Submissions]",
                "[UI: Terminal-objectives-GIF-*objective name*-main]",
                "[UI: Terminal-objectives-button-next]",
                "[UI: Terminal-objectives-button-previous]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-audio-file]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-image]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-text-file]",
                "[UI: Terminal-objectives-submit DM text-1-file-type-text]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-back]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
              ],
              "text": "- Ports GIF data from Objective upload to fill in the following screen states:\nGIF (main) [UI: Terminal-objectives-GIF-*objective name*-main]\nGIF (submit) [UI: Terminal-transitional GIF-objectives-*objective name*-submit]\nGIF (back) [UI: Terminal-transitional GIF-objectives-*objective name*-back]\nNote: There can be many Objectives existing in these screen states, it will simply mean there is more than 1 Objective active and these states may become numbered in the system for ease of understanding (active objective 1, active objective 2, active objective 3 for example) and the pagination buttons in [UI: Terminal-objectives-GIF-*objective name*-main] [UI: Terminal-objectives-button-next] and [UI: Terminal-objectives-button-previous] will become active if there is more than 1 objective active.\n- System will adjust Submission DM content based on objective's proof file type and present the matching DM to users.\nText proof file type = [UI: Terminal-objectives-submit DM text-1-file-type-text]\nImage proof file type = [UI: Terminal-objectives-submit DM text-1-file-type-image]\nAudio proof file type = [UI: Terminal-objectives-submit DM text-1-file-type-audio-file]\nText File proof file type = [UI: Terminal-objectives-submit DM text-1-file-type-text-file]\n- System will 'open' submissions for that Objective and begin collecting them in the database + send them cross to [UI: Discord channel-Objective Submissions]"
            },
            {
              "kind": "section",
              "header": "What happens when an Objective enters the end date:",
              "ui_refs": [
                "[UI: Discord channel-Objective Submissions]",
                "[UI: Terminal-objectives-GIF-*objective name*-main]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-back]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
              ],
              "text": "- Operators can still approve, deny and undo existing Submissions in [UI: Discord channel-Objective Submissions]\n- The Objective GIF data is removed from the following screen states:\n[UI: Terminal-objectives-GIF-*objective name*-main]\n[UI: Terminal-transitional GIF-objectives-*objective name*-submit]\n[UI: Terminal-transitional GIF-objectives-*objective name*-back]\n- The Objective enters ‘expired’ state."
            }
          ],
          "ui_refs": [
            "[UI: Discord channel-Objective Submissions]",
            "[UI: Discord channel-Objective Submissions]",
            "[UI: Operator-Terminal-objectives-upload-file-type-button]",
            "[UI: Operator-Terminal-objectives-upload-menu]",
            "[UI: Operator-Terminal-objectives-upload-schedule-button]",
            "[UI: Operator-Terminal-objectives-upload-schedule-modal-button-cancel]",
            "[UI: Operator-Terminal-objectives-upload-schedule-modal-button-submit]",
            "[UI: Operator-Terminal-objectives-upload-schedule-modal-input-field-begin-date]",
            "[UI: Operator-Terminal-objectives-upload-schedule-modal-input-field-end-date]",
            "[UI: Operator-Terminal-objectives-upload-schedule-modal]",
            "[UI: Terminal-objectives-GIF-*objective name*-main]",
            "[UI: Terminal-objectives-button-next]",
            "[UI: Terminal-objectives-button-previous]",
            "[UI: Terminal-objectives-submit DM text-1-file-type-audio-file]",
            "[UI: Terminal-objectives-submit DM text-1-file-type-image]",
            "[UI: Terminal-objectives-submit DM text-1-file-type-text-file]",
            "[UI: Terminal-objectives-submit DM text-1-file-type-text]",
            "[UI: Terminal-transitional GIF-objectives-*objective name*-back]",
            "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5d",
          "step_code": "Step 5D",
          "title": "Proof File Type flow (menu) (Objective Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Proof File Type is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-file-type-audio-button]",
                "[UI: Operator-Terminal-objectives-upload-file-type-back-button]",
                "[UI: Operator-Terminal-objectives-upload-file-type-image-button]",
                "[UI: Operator-Terminal-objectives-upload-file-type-menu]",
                "[UI: Operator-Terminal-objectives-upload-file-type-submit-button]",
                "[UI: Operator-Terminal-objectives-upload-file-type-text-button]",
                "[UI: Operator-Terminal-objectives-upload-file-type-text-file-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-objectives-upload-file-type-menu]\n• Show:\nImage [UI: Operator-Terminal-objectives-upload-file-type-image-button]\nAudio [UI: Operator-Terminal-objectives-upload-file-type-audio-button]\nText [UI: Operator-Terminal-objectives-upload-file-type-text-button]\nText File [UI: Operator-Terminal-objectives-upload-file-type-text-file-button]\nSubmit [UI: Operator-Terminal-objectives-upload-file-type-submit-button]\nBack [UI: Operator-Terminal-objectives-upload-file-type-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-button]",
                "[UI: Operator-Terminal-objectives-upload-file-type-button]",
                "[UI: Operator-Terminal-objectives-upload-menu]"
              ],
              "text": "• One selection only (selecting another deselects previous).\n• If a value already exists, the previously selected option appears blue.\n• Submit is disabled unless the user changes the selection.\n• On Submit: save to draft → return to [UI: Operator-Terminal-objectives-upload-menu]→ mark [UI: Operator-Terminal-objectives-upload-file-type-button] complete (blue) → enable [UI: Operator-Terminal-objectives-upload-GIF-button]\n• On Back: return to [UI: Operator-Terminal-objectives-upload-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-upload-GIF-button]",
            "[UI: Operator-Terminal-objectives-upload-file-type-audio-button]",
            "[UI: Operator-Terminal-objectives-upload-file-type-back-button]",
            "[UI: Operator-Terminal-objectives-upload-file-type-button]",
            "[UI: Operator-Terminal-objectives-upload-file-type-image-button]",
            "[UI: Operator-Terminal-objectives-upload-file-type-menu]",
            "[UI: Operator-Terminal-objectives-upload-file-type-submit-button]",
            "[UI: Operator-Terminal-objectives-upload-file-type-text-button]",
            "[UI: Operator-Terminal-objectives-upload-file-type-text-file-button]",
            "[UI: Operator-Terminal-objectives-upload-menu]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5e",
          "step_code": "Step 5E",
          "title": "GIF uploader (menu + file attach) (Objective Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If GIF is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-back-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-back-file-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-main-file-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-menu]",
                "[UI: Operator-Terminal-objectives-upload-GIF-submit-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-submit-file-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-objectives-upload-GIF-menu]\n• Show:\nGIF (main) [UI: Operator-Terminal-objectives-upload-GIF-main-file-button]\nGIF (submit) [UI: Operator-Terminal-objectives-upload-GIF-submit-file-button]\nGIF (back) [UI: Operator-Terminal-objectives-upload-GIF-back-file-button]\nSubmit [UI: Operator-Terminal-objectives-upload-GIF-submit-button]\nBack [UI: Operator-Terminal-objectives-upload-GIF-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Unlock rules",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-back-file-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-main-file-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-submit-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-submit-file-button]"
              ],
              "text": "• GIF buttons unlock sequentially in this order:\n[UI: Operator-Terminal-objectives-upload-GIF-main-file-button]\n[UI: Operator-Terminal-objectives-upload-GIF-submit-file-button]\n[UI: Operator-Terminal-objectives-upload-GIF-back-file-button]\n• Each GIF button must have a valid file uploaded to be marked complete (blue).\n• Once all three GIF buttons are complete (blue), Submit [UI: Operator-Terminal-objectives-upload-GIF-submit-button] becomes enabled.\n• Completed GIF buttons remain clickable to allow re-upload.\nDraft rule (GIFs)\n• Rule: Each successful GIF upload updates the same draft objective record (status=draft).\n• Rule: Re-uploading a GIF replaces the previously stored file for that slot.\n• Rule: First valid file wins per upload action (ignore or reject additional files).\nGIF slot upload flow (applies to all three GIF buttons)"
            },
            {
              "kind": "branch",
              "header": "If a GIF slot button is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-any-file-back-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-main-file-button]"
              ],
              "text": "(e.g. [UI: Operator-Terminal-objectives-upload-GIF-main-file-button])\n• Disable all GIF buttons, Submit, and Back while awaiting file input\n• Show Back (exit upload) [UI: Operator-Terminal-objectives-upload-GIF-any-file-back-button]\nFile attach behavior\n• User attaches a file in the text chat\n• Accepted file type: .gif only\n• GIF files can be any size that discord will accept (if user has discord nitro etc, they can upload larger files)."
            },
            {
              "kind": "branch",
              "header": "If incorrect file type",
              "ui_refs": [],
              "text": "• System posts message: “Incorrect file type.”\n• Message auto-deletes after 10 seconds\n• Remain in file attach state"
            },
            {
              "kind": "branch",
              "header": "If correct file type",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-menu]"
              ],
              "text": "• Store GIF in draft objective record under the correct slot\n• System deletes the uploaded .gif message from chat\n• Mark the corresponding GIF button complete (blue)\n• Return to [UI: Operator-Terminal-objectives-upload-GIF-menu]\n• Re-enable all GIF buttons\n• Preserve completion state"
            },
            {
              "kind": "branch",
              "header": "If Back is clicked during file attach",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-any-file-back-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-menu]"
              ],
              "text": "[UI: Operator-Terminal-objectives-upload-GIF-any-file-back-button]\n• Cancel current file attach\n• Return to [UI: Operator-Terminal-objectives-upload-GIF-menu]\n• No state changes occur\nSubmit GIFs"
            },
            {
              "kind": "branch",
              "header": "If Submit is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-back-file-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-main-file-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-submit-button]",
                "[UI: Operator-Terminal-objectives-upload-GIF-submit-file-button]",
                "[UI: Operator-Terminal-objectives-upload-menu]",
                "[UI: Terminal-objectives-GIF-*objective name*-main]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-back]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
              ],
              "text": "[UI: Operator-Terminal-objectives-upload-GIF-submit-button]\n• Condition: all three GIF buttons are complete (blue)\n• Save GIF completion state to draft (no final commit)\n• Return to [UI: Operator-Terminal-objectives-upload-menu] (Step 5)\n• Mark [UI: Operator-Terminal-objectives-upload-GIF-button] complete (blue)\nGIF display\n• [UI: Operator-Terminal-objectives-upload-GIF-main-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-objectives-GIF-*objective name*-main]\n• [UI: Operator-Terminal-objectives-upload-GIF-submit-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-transitional GIF-objectives-*objective name*-submit]\n• [UI: Operator-Terminal-objectives-upload-GIF-back-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-transitional GIF-objectives-*objective name*-back]\nExit GIF uploader"
            },
            {
              "kind": "branch",
              "header": "If Back is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-back-button]",
                "[UI: Operator-Terminal-objectives-upload-menu]"
              ],
              "text": "[UI: Operator-Terminal-objectives-upload-GIF-back-button]\n• Return to [UI: Operator-Terminal-objectives-upload-menu]\n• No changes committed\n• Preserve all existing draft state"
            },
            {
              "kind": "section",
              "header": "Timeout rule",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-menu]"
              ],
              "text": "• If no valid file is received within 2 minutes:\n• Cancel current GIF upload\n• Return to [UI: Operator-Terminal-objectives-upload-GIF-menu]\n• No state changes occur"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-upload-GIF-any-file-back-button]",
            "[UI: Operator-Terminal-objectives-upload-GIF-back-button]",
            "[UI: Operator-Terminal-objectives-upload-GIF-back-file-button]",
            "[UI: Operator-Terminal-objectives-upload-GIF-button]",
            "[UI: Operator-Terminal-objectives-upload-GIF-main-file-button]",
            "[UI: Operator-Terminal-objectives-upload-GIF-menu]",
            "[UI: Operator-Terminal-objectives-upload-GIF-submit-button]",
            "[UI: Operator-Terminal-objectives-upload-GIF-submit-file-button]",
            "[UI: Operator-Terminal-objectives-upload-menu]",
            "[UI: Terminal-objectives-GIF-*objective name*-main]",
            "[UI: Terminal-transitional GIF-objectives-*objective name*-back]",
            "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5_option_a-b",
          "step_code": "Step 5 [Option A-B]",
          "title": "Objectives Scheduling screen (no GIFs, buttons only)",
          "blocks": [
            {
              "kind": "section",
              "header": "On entry",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-back-button]",
                "[UI: Operator-Terminal-objectives-scheduling-delete-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-button]",
                "[UI: Operator-Terminal-objectives-scheduling-menu]",
                "[UI: Operator-Terminal-objectives-scheduling-next-button]",
                "[UI: Operator-Terminal-objectives-scheduling-previous-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-objectives-scheduling-menu]\nThis will also populate based on the currently displayed Objective: “*Objective name*, *status*, *begin date*, *end date*” (for current selection).\n• Show buttons:\nEdit [UI: Operator-Terminal-objectives-scheduling-edit-button]\nDelete [UI: Operator-Terminal-objectives-scheduling-delete-button]\nNext [UI: Operator-Terminal-objectives-scheduling-next-button]\nPrevious [UI: Operator-Terminal-objectives-scheduling-previous-button]\nBack [UI: Operator-Terminal-objectives-scheduling-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [],
              "text": "• Rule: Previous is disabled unless the user clicks Next as there is no previous Objective to navigate to at the beginning.\n• Rule: If no remaining objectives exist, show an empty-state message and disable Edit/Delete/Next/Previous buttons.\n• Rule: Upload process submit: Create objective from draft (finalize).\n• Rule: Scheduling process submit: Apply edit draft to objective (update).\n• Rule: Objectives that have the status scheduled or active will be shown here, if an Objective has the expired status, it will appear here but will disappear 7 days after end date has arrived. Draft status Objectives will not appear here.\n• Rule: Last edited, begin date and end date is listed in text on the ephemeral message for currently selected objective.\n• Rule: Display Objectives in order of begin date (closest to begin date first appearing).\n• Rule: Scheduling screen always displays one ‘currently selected’ objective from the list.\n• Rule: Next/Previous changes the currently selected objective.\n• Rule: Edit/Delete applies to the currently selected objective.\n• Rule: Edits can change objective status (scheduled/active/expired) if begin or end dates are changed – status is recomputed from after schedule edit submit.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-scheduling-back-button]",
            "[UI: Operator-Terminal-objectives-scheduling-delete-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-button]",
            "[UI: Operator-Terminal-objectives-scheduling-menu]",
            "[UI: Operator-Terminal-objectives-scheduling-next-button]",
            "[UI: Operator-Terminal-objectives-scheduling-previous-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5a",
          "step_code": "Step 5A",
          "title": "Edit flow (Objective Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Edit is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-back-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-menu]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-name-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-submit-objective-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-objectives-scheduling-edit-menu]\nObjective Name [UI: Operator-Terminal-objectives-scheduling-edit-name-button]\nMerits Awarded [UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-button]\nSchedule [UI: Operator-Terminal-objectives-scheduling-edit-schedule-button]\nProof File Type [UI: Operator-Terminal-objectives-scheduling-edit-file-type-button]\nGIF [UI: Operator-Terminal-objectives-scheduling-edit-GIF-button]\nSubmit Objective [UI: Operator-Terminal-objectives-scheduling-edit-submit-objective-button]\nBack [UI: Operator-Terminal-objectives-scheduling-edit-back-button]\nDraft save rule (applies to all fields)\n• Rule: Each “Submit” action (modal submit or menu submit) updates a temporary edit draft linked to the objective (does not change objective status).\n• Rule: Cancel/Back exits the current modal/menu without committing changes.\n“Blue button” rule (updated fields)\n• Rule: Existing pre-filled buttons do not appear blue here, but if a change is made in any button’s modal/menus it will update to blue. It reflects change, not completeness.\nRule: Edit drafts are scoped per guild_id + operator_user_id + objective_id.\nRule: Entering Edit creates/resumes the operator’s edit draft for that specific objective/event.\nRule: If operator switches to editing a different objective/event, their previous edit draft remains saved (until submitted/cancelled/expired).\nEdit draft lifecycle\nRule: On Submit Objective/Event (edit submit), commit changes and delete/clear the edit draft for that objective/event.\nRule: On Back from edit menu: keep edit draft – expires after 24 hours.\nRule: If draft exists and operator completes submission of objective/event successfully, system clears the draft.\n• Rule: The modal/menu “Submit” is disabled unless the user changes something.\n• Rule: After clicking Submit it will submit changes to Objective, return to [UI: Operator-Terminal-objectives-scheduling-edit-menu] (back to the Objective that was being edited – not to the beginning of the Objectives list).\n• Rule: Submitting changes to any objective does not affect the objective’s position in the scheduling list unless begin/end dates are modified.\nTransition disable rule\n• Rule: During any transition into a modal/menu (and returning from it), disable all upload buttons until the next screen state is rendered.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-back-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-menu]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-name-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-submit-objective-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5b",
          "step_code": "Step 5B",
          "title": "Objective Name flow (Objective Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Objective Name is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-name-modal-button-cancel]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-name-modal-button-submit]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-name-modal-input-field]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-name-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-objectives-scheduling-edit-name-modal]\nInput: [UI: Operator-Terminal-objectives-scheduling-edit-name-modal-input-field]\nButton: [UI: Operator-Terminal-objectives-scheduling-edit-name-modal-button-submit]\nButton: [UI: Operator-Terminal-objectives-scheduling-edit-name-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-menu]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-name-button]"
              ],
              "text": "• Previously submitted data shows.\n• Submit enabled only when input meets minimum requirements (a change is made).\n• On Submit: save to draft → mark [UI: Operator-Terminal-objectives-scheduling-edit-name-button] changed (blue).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-objectives-scheduling-edit-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-scheduling-edit-menu]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-name-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-name-modal-button-cancel]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-name-modal-button-submit]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-name-modal-input-field]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-name-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5c",
          "step_code": "Step 5C",
          "title": "Merits Awarded flow (Objective Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Merits Awarded is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal-button-cancel]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal-button-submit]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal-input-field]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal]\nInput: [UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal-input-field]\nButton: [UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal-button-submit]\nButton: [UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-menu]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-button]"
              ],
              "text": "• Previously submitted data shows.\n• Submit enabled only when input meets minimum requirements (a change is made).\n• On Submit: save to draft → [UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-button] changed (blue).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-objectives-scheduling-edit-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-scheduling-edit-menu]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal-button-cancel]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal-button-submit]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal-input-field]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5d",
          "step_code": "Step 5D",
          "title": "Schedule flow (Objective Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Schedule is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-button-cancel]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-button-submit]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-input-field-begin-date]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-input-field-end-date]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal]\nBegin: [UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-input-field-begin-date]\nEnd: [UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-input-field-end-date]\nButton: [UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-button-submit]\nButton: [UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-menu]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-button]"
              ],
              "text": "• Previously submitted data shows.\n• Submit enabled only when input meets minimum requirements (a change is made).\n• On Submit: save to draft → mark [UI: Operator-Terminal-objectives-scheduling-edit-schedule-button] changed (blue).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-objectives-scheduling-edit-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-scheduling-edit-menu]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-button-cancel]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-button-submit]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-input-field-begin-date]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal-input-field-end-date]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5e",
          "step_code": "Step 5E",
          "title": "Proof File Type flow (menu) (Objective Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Proof File Type is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-audio-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-back-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-image-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-menu]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-submit-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-text-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-text-file-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-objectives-scheduling-edit-file-type-menu]\n• Show:\nImage [UI: Operator-Terminal-objectives-scheduling-edit-file-type-image-button]\nAudio [UI: Operator-Terminal-objectives-scheduling-edit-file-type-audio-button]\nText [UI: Operator-Terminal-objectives-scheduling-edit-file-type-text-button]\nText File [UI: Operator-Terminal-objectives-scheduling-edit-file-type-text-file-button]\nSubmit [UI: Operator-Terminal-objectives-scheduling-edit-file-type-submit-button]\nBack [UI: Operator-Terminal-objectives-scheduling-edit-file-type-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-menu]"
              ],
              "text": "• Previously submitted data shows.\n• Submit enabled only when input meets minimum requirements (a change is made).\n• One selection only (selecting another deselects previous).\n• Existing pre-filled buttons do not appear blue here, but if a change is made in any button’s modal/menus it will update to blue. It reflects change, not completeness.\n• If a value already exists, the previously selected option appears blue.\n• Submit is disabled unless the user changes the selection.\n• On Submit: save to draft → return to [UI: Operator-Terminal-objectives-scheduling-edit-menu] → mark [UI: Operator-Terminal-objectives-scheduling-edit-file-type-button] changed (blue)\n• On Back: return to [UI: Operator-Terminal-objectives-scheduling-edit-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-audio-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-back-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-image-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-menu]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-submit-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-text-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-text-file-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-menu]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5f",
          "step_code": "Step 5F",
          "title": "GIF uploader (menu + file attach) (Objective Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If GIF is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-back-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-back-file-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-main-file-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-submit-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-submit-file-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]\n• Show:\nGIF (main) [UI: Operator-Terminal-objectives-scheduling-edit-GIF-main-file-button]\nGIF (submit) [UI: Operator-Terminal-objectives-scheduling-edit-GIF-submit-file-button]\nGIF (back) [UI: Operator-Terminal-objectives-scheduling-edit-GIF-back-file-button]\nSubmit [UI: Operator-Terminal-objectives-scheduling-edit-GIF-submit-button]\nBack [UI: Operator-Terminal-objectives-scheduling-edit-GIF-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [],
              "text": "• Previously submitted data shows.\n• Submit enabled only when input meets minimum requirements (a change is made).\n• Unlike Objective Upload, editing in scheduling section allows partial GIF updates.\n• Existing pre-filled buttons do not appear blue here, but if a change is made in any button’s modal/menus it will update to blue. It reflects change, not completeness.\n• Each GIF button must have a valid file uploaded to be marked changed (blue).\n• Completed GIF buttons remain clickable to allow re-upload.\nDraft rule (GIFs)\n• Rule: Re-uploading a GIF replaces the previously stored file for that slot.\n• Rule: First valid file wins per upload action (ignore or reject additional files).\nGIF slot upload flow (applies to all three GIF buttons)"
            },
            {
              "kind": "branch",
              "header": "If a GIF slot button is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-any-file-back-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-main-file-button]"
              ],
              "text": "(e.g. [UI: Operator-Terminal-objectives-scheduling-edit-GIF-main-file-button])\n• Disable all GIF buttons, Submit, and Back while awaiting file input\n• Show Back (exit upload) [UI: Operator-Terminal-objectives-scheduling-edit-GIF-any-file-back-button]\nFile attach behavior\n• User attaches a file in the text chat\n• Accepted file type: .gif only\n• GIF files can be any size that discord will accept (if user has discord nitro etc, they can upload larger files)."
            },
            {
              "kind": "branch",
              "header": "If incorrect file type",
              "ui_refs": [],
              "text": "• System posts message: “Incorrect file type.”\n• Message auto-deletes after 10 seconds\n• Remain in file attach state"
            },
            {
              "kind": "branch",
              "header": "If correct file type",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]"
              ],
              "text": "• Store GIF in draft objective record under the correct slot\n• System deletes the uploaded .gif message from chat\n• Mark the corresponding GIF button changed (blue)\n• Return to [UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]\n• Re-enable all GIF buttons\n• Preserve completion state"
            },
            {
              "kind": "branch",
              "header": "If Back is clicked during file attach",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-any-file-back-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]"
              ],
              "text": "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-any-file-back-button]\n• Cancel current file attach\n• Return to [UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]\n• No state changes occur\nSubmit GIFs"
            },
            {
              "kind": "branch",
              "header": "If Submit is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-back-file-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-main-file-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-submit-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-submit-file-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-menu]",
                "[UI: Terminal-objectives-GIF-*objective name*-main]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-back]",
                "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
              ],
              "text": "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-submit-button]\n• Condition: any of the three GIF buttons are changed (blue)\n• Save GIF completion state to draft (no final commit)\n• Return to [UI: Operator-Terminal-objectives-scheduling-edit-menu]\n• Mark [UI: Operator-Terminal-objectives-scheduling-edit-GIF-button] changed (blue)\nGIF display\n• [UI: Operator-Terminal-objectives-scheduling-edit-GIF-main-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-objectives-GIF-*objective name*-main]\n• [UI: Operator-Terminal-objectives-scheduling-edit-GIF-submit-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-transitional GIF-objectives-*objective name*-submit]\n• [UI: Operator-Terminal-objectives-scheduling-edit-GIF-back-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-transitional GIF-objectives-*objective name*-back]\nExit GIF uploader"
            },
            {
              "kind": "branch",
              "header": "If Back is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-back-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]"
              ],
              "text": "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-back-button]\n• Return to [UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]\n• No changes committed\n• Preserve all existing draft state"
            },
            {
              "kind": "section",
              "header": "Timeout rule",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]"
              ],
              "text": "• If no valid file is received within 2 minutes:\n• Cancel current GIF upload\n• Return to [UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]\n• No state changes occur"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-any-file-back-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-back-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-back-file-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-main-file-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-menu]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-submit-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-submit-file-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-menu]",
            "[UI: Terminal-objectives-GIF-*objective name*-main]",
            "[UI: Terminal-transitional GIF-objectives-*objective name*-back]",
            "[UI: Terminal-transitional GIF-objectives-*objective name*-submit]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5a",
          "step_code": "Step 5A",
          "title": "Delete flow (Objective Scheduling)",
          "blocks": [
            {
              "kind": "section",
              "header": "Rules:",
              "ui_refs": [],
              "text": "Delete is disabled for objectives with status active\nDeletion is permanent and cannot be undone\nConfirm and Back are disabled once Confirm is clicked until operation completes"
            }
          ],
          "ui_refs": []
        },
        {
          "step_id": "operator_terminal.step_5_option_b-a",
          "step_code": "Step 5 [Option B-A]",
          "title": "Events Upload screen (no GIFs, buttons only)",
          "blocks": [
            {
              "kind": "section",
              "header": "On entry",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-GIF-button]",
                "[UI: Operator-Terminal-events-upload-back-button]",
                "[UI: Operator-Terminal-events-upload-menu]",
                "[UI: Operator-Terminal-events-upload-merits-awarded-button]",
                "[UI: Operator-Terminal-events-upload-name-button]",
                "[UI: Operator-Terminal-events-upload-role-allocated-button]",
                "[UI: Operator-Terminal-events-upload-schedule-button]",
                "[UI: Operator-Terminal-events-upload-submit-event-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-events-upload-menu]\n• Show buttons (all visible, but enabled sequentially):\n• Event Name [UI: Operator-Terminal-events-upload-name-button]\n• Merits Awarded [UI: Operator-Terminal-events-upload-merits-awarded-button]\n• Schedule [UI: Operator-Terminal-events-upload-schedule-button]\n• Role Allocated [UI: Operator-Terminal-events-upload-role-allocated-button]\n• GIF [UI: Operator-Terminal-events-upload-GIF-button]\n• Submit Event [UI: Operator-Terminal-events-upload-submit-event-button]\n• Back [UI: Operator-Terminal-events-upload-back-button]\nUnlock rule (replaces “GIF stages”)\n• Buttons unlock in this order:\n1. [UI: Operator-Terminal-events-upload-name-button]\n2. [UI: Operator-Terminal-events-upload-merits-awarded-button]\n3. [UI: Operator-Terminal-events-upload-schedule-button]\n4. [UI: Operator-Terminal-events-upload-role-allocated-button]\n5. [UI: Operator-Terminal-events-upload-GIF-button]\n6. [UI: Operator-Terminal-events-upload-submit-event-button] (only when all required fields are completed)\n• Back [UI: Operator-Terminal-events-upload-back-button] is always available.\nDraft save rule (applies to all fields)\n• Rule: Each “Submit” action (modal submit or menu submit) updates the same draft event record (status=draft).\n• Rule: Draft creation / resume. On entry to [UI: Operator-Terminal-events-upload-menu]:\n• If no draft exists for this operator: create new draft with status=draft and set created_at/updated_at.\n• If draft exists: load it and render completion (blue) states + locked/unlocked buttons accordingly.\n• Rule: Upload process submit: Create event from draft (finalize).\n• Rule: Scheduling process submit: Apply edit draft to event (update).\n• Rule: Cancel/Back exits the current modal/menu without committing changes.\n“Blue button” rule (completed fields)\n• Rule: Clicking a completed (blue) upload button re-opens its modal/menu with saved values pre-filled / pre-selected.\n• Rule: The modal/menu “Submit” is disabled unless the user changes something.\n• Rule: After submitting changes, return to [UI: Operator-Terminal-events-upload-menu] with no new unlocks and all prior completion state preserved.\nTransition disable rule\n• Rule: During any transition into a modal/menu (and returning from it), disable all upload buttons until the next screen state is rendered.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-upload-GIF-button]",
            "[UI: Operator-Terminal-events-upload-back-button]",
            "[UI: Operator-Terminal-events-upload-menu]",
            "[UI: Operator-Terminal-events-upload-merits-awarded-button]",
            "[UI: Operator-Terminal-events-upload-name-button]",
            "[UI: Operator-Terminal-events-upload-role-allocated-button]",
            "[UI: Operator-Terminal-events-upload-schedule-button]",
            "[UI: Operator-Terminal-events-upload-submit-event-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5a",
          "step_code": "Step 5A",
          "title": "Event Name flow (Event Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Event Name is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-name-modal-button-cancel]",
                "[UI: Operator-Terminal-events-upload-name-modal-button-submit]",
                "[UI: Operator-Terminal-events-upload-name-modal-input-field]",
                "[UI: Operator-Terminal-events-upload-name-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-events-upload-name-modal]\n• Input: [UI: Operator-Terminal-events-upload-name-modal-input-field]\n• Button: [UI: Operator-Terminal-events-upload-name-modal-button-submit]\n• Button: [UI: Operator-Terminal-events-upload-name-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-menu]",
                "[UI: Operator-Terminal-events-upload-merits-awarded-button]",
                "[UI: Operator-Terminal-events-upload-name-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• On Submit: save to draft → mark [UI: Operator-Terminal-events-upload-name-button] complete (blue) → enable next button [UI: Operator-Terminal-events-upload-merits-awarded-button]\n• On Cancel: close modal → return to [UI: Operator-Terminal-events-upload-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-upload-menu]",
            "[UI: Operator-Terminal-events-upload-merits-awarded-button]",
            "[UI: Operator-Terminal-events-upload-name-button]",
            "[UI: Operator-Terminal-events-upload-name-modal-button-cancel]",
            "[UI: Operator-Terminal-events-upload-name-modal-button-submit]",
            "[UI: Operator-Terminal-events-upload-name-modal-input-field]",
            "[UI: Operator-Terminal-events-upload-name-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5b",
          "step_code": "Step 5B",
          "title": "Merits Awarded flow",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Merits Awarded is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-merits-awarded-modal-button-cancel]",
                "[UI: Operator-Terminal-events-upload-merits-awarded-modal-button-submit]",
                "[UI: Operator-Terminal-events-upload-merits-awarded-modal-input-field]",
                "[UI: Operator-Terminal-events-upload-merits-awarded-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-events-upload-merits-awarded-modal]\n• Input: [UI: Operator-Terminal-events-upload-merits-awarded-modal-input-field]\n• Button: [UI: Operator-Terminal-events-upload-merits-awarded-modal-button-submit]\n• Button: [UI: Operator-Terminal-events-upload-merits-awarded-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-menu]",
                "[UI: Operator-Terminal-events-upload-merits-awarded-button]",
                "[UI: Operator-Terminal-events-upload-schedule-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• On Submit: save to draft → mark [UI: Operator-Terminal-events-upload-merits-awarded-button] complete (blue) → enable next button [UI: Operator-Terminal-events-upload-schedule-button]\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-events-upload-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-upload-menu]",
            "[UI: Operator-Terminal-events-upload-merits-awarded-button]",
            "[UI: Operator-Terminal-events-upload-merits-awarded-modal-button-cancel]",
            "[UI: Operator-Terminal-events-upload-merits-awarded-modal-button-submit]",
            "[UI: Operator-Terminal-events-upload-merits-awarded-modal-input-field]",
            "[UI: Operator-Terminal-events-upload-merits-awarded-modal]",
            "[UI: Operator-Terminal-events-upload-schedule-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5c",
          "step_code": "Step 5C",
          "title": "Schedule flow (Event Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Schedule is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-schedule-modal-button-cancel]",
                "[UI: Operator-Terminal-events-upload-schedule-modal-button-submit]",
                "[UI: Operator-Terminal-events-upload-schedule-modal-input-field-begin-date]",
                "[UI: Operator-Terminal-events-upload-schedule-modal-input-field-end-date]",
                "[UI: Operator-Terminal-events-upload-schedule-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-events-upload-schedule-modal]\n• Begin: [UI: Operator-Terminal-events-upload-schedule-modal-input-field-begin-date]\n• End: [UI: Operator-Terminal-events-upload-schedule-modal-input-field-end-date]\n• Button: [UI: Operator-Terminal-events-upload-schedule-modal-button-submit]\n• Button: [UI: Operator-Terminal-events-upload-schedule-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-menu]",
                "[UI: Operator-Terminal-events-upload-role-allocated-button]",
                "[UI: Operator-Terminal-events-upload-schedule-button]"
              ],
              "text": "• Submit enabled only when both date fields are valid.\n• On Submit: save to draft → mark [UI: Operator-Terminal-events-upload-schedule-button] complete (blue) → enable next button [UI: Operator-Terminal-events-upload-role-allocated-button]\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-events-upload-menu] → no state change."
            },
            {
              "kind": "section",
              "header": "Schedule specific rules:",
              "ui_refs": [],
              "text": "This schedule data will guide when an Event should be ported aka change states to 'active' (0:00am / 12am of begin date - PT) into the terminal for users and when it should be removed (23:59 / 11:59pm of end date - PT) aka change states to 'expired'. The state of an Event with all data submitted but has not ported will be 'scheduled'."
            },
            {
              "kind": "section",
              "header": "What happens when an Event enters the begin date:",
              "ui_refs": [
                "[UI: Terminal-events-GIF-*event name*-main]",
                "[UI: Terminal-events-button-next]",
                "[UI: Terminal-events-button-previous]",
                "[UI: Terminal-transitional GIF-events-*event name*-back]",
                "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
              ],
              "text": "- Ports GIF data from Event upload to fill in the following screen states:\nGIF (main) [UI: Terminal-events-GIF-*event name*-main]\nGIF (check-in) [UI: Terminal-transitional GIF-events-*event name*-check-in]\nGIF (back) [UI: Terminal-transitional GIF-events-*event name*-back]\nNote: There can be many Events existing in these screen states, it will simply mean there is more than 1 Event active and these states may become numbered in the system for ease of understanding (active event 1, active event 2, active event 3 for example) and the pagination buttons in [UI: Terminal-events-GIF-*event name*-main] [UI: Terminal-events-button-next] and [UI: Terminal-events-button-previous] will become active if there is more than 1 Event active.\n- System will 'open' check-in for that Event and begin allocating the specific roles upon check-in button clicks from users through their Terminal."
            },
            {
              "kind": "section",
              "header": "What happens when an Event enters the end date:",
              "ui_refs": [
                "[UI: Terminal-events-GIF-*event name*-main]",
                "[UI: Terminal-transitional GIF-events-*event name*-back]",
                "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
              ],
              "text": "- The Event GIF data is removed from the following screen states:\n[UI: Terminal-events-GIF-*event name*-main]\n[UI: Terminal-transitional GIF-events-*event name*-check-in]\n[UI: Terminal-transitional GIF-events-*event name*-back]\n- The Event enters ‘expired’ state."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-upload-menu]",
            "[UI: Operator-Terminal-events-upload-role-allocated-button]",
            "[UI: Operator-Terminal-events-upload-schedule-button]",
            "[UI: Operator-Terminal-events-upload-schedule-modal-button-cancel]",
            "[UI: Operator-Terminal-events-upload-schedule-modal-button-submit]",
            "[UI: Operator-Terminal-events-upload-schedule-modal-input-field-begin-date]",
            "[UI: Operator-Terminal-events-upload-schedule-modal-input-field-end-date]",
            "[UI: Operator-Terminal-events-upload-schedule-modal]",
            "[UI: Terminal-events-GIF-*event name*-main]",
            "[UI: Terminal-events-button-next]",
            "[UI: Terminal-events-button-previous]",
            "[UI: Terminal-transitional GIF-events-*event name*-back]",
            "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5d",
          "step_code": "Step 5D",
          "title": "Role Allocated flow (menu) (Event Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Role Allocated is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-event-1-role-button]",
                "[UI: Operator-Terminal-events-upload-event-2-role-button]",
                "[UI: Operator-Terminal-events-upload-event-3-role-button]",
                "[UI: Operator-Terminal-events-upload-event-4-role-button]",
                "[UI: Operator-Terminal-events-upload-event-5-role-button]",
                "[UI: Operator-Terminal-events-upload-role-allocated-back-button]",
                "[UI: Operator-Terminal-events-upload-role-allocated-menu]",
                "[UI: Operator-Terminal-events-upload-role-allocated-submit-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-events-upload-role-allocated-menu]\n• Show:\n• Event 1: Checked in [UI: Operator-Terminal-events-upload-event-1-role-button]\n• Event 2: Checked in [UI: Operator-Terminal-events-upload-event-2-role-button]\n• Event 3: Checked in [UI: Operator-Terminal-events-upload-event-3-role-button]\n• Event 4: Checked in [UI: Operator-Terminal-events-upload-event-4-role-button]\n• Event 5: Checked in [UI: Operator-Terminal-events-upload-event-5-role-button]\n\n• Submit [UI: Operator-Terminal-events-upload-role-allocated-submit-button]\n• Back [UI: Operator-Terminal-events-upload-role-allocated-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Discord Role Event 1 Checked In]",
                "[UI: Discord Role Event 2 Checked In]",
                "[UI: Discord Role Event 3 Checked In]",
                "[UI: Discord Role Event 4 Checked In]",
                "[UI: Discord Role Event 5 Checked In]",
                "[UI: Operator-Terminal-events-upload-GIF-button]",
                "[UI: Operator-Terminal-events-upload-event-1-role-button]",
                "[UI: Operator-Terminal-events-upload-event-2-role-button]",
                "[UI: Operator-Terminal-events-upload-event-3-role-button]",
                "[UI: Operator-Terminal-events-upload-event-4-role-button]",
                "[UI: Operator-Terminal-events-upload-event-5-role-button]",
                "[UI: Operator-Terminal-events-upload-menu]",
                "[UI: Operator-Terminal-events-upload-role-allocated-button]"
              ],
              "text": "• One selection only (selecting another deselects previous).\n• If a value already exists, the previously selected option appears blue.\n• Whichever role is allocated upon check-in, will be removed at end date expiry time of that event (23:59 / 11:59pm of end date – PT time zone).\n• If a role / button has already been assigned to an upcoming event then it will be disabled. It will become active once that event it has been assigned to has reached its end date.\nHowever – if the begin date of the current event is beyond the end date of the previous event that a role is allocated to, then that button will be enabled.\n• Check-ins are recorded per event/user and used for reprocessing and cleanup - per-user “checked_in_events” shows events they are checked in to.\n• A check_in_role_key may be associated with only one upcoming event per guild at any given time.\n• If [UI: Operator-Terminal-events-upload-event-1-role-button] is selected then [UI: Discord Role Event 1 Checked In] will be allocated to user who checks in to the event that has this button clicked, the sequence will also apply for the following buttons:\n[UI: Operator-Terminal-events-upload-event-2-role-button] = [UI: Discord Role Event 2 Checked In]\n[UI: Operator-Terminal-events-upload-event-3-role-button] = [UI: Discord Role Event 3 Checked In]\n[UI: Operator-Terminal-events-upload-event-4-role-button] = [UI: Discord Role Event 4 Checked In]\n[UI: Operator-Terminal-events-upload-event-5-role-button] = [UI: Discord Role Event 5 Checked In]\nButton [UI: Operator-Terminal-events-upload-event-1-role-button]\nEvent 1 → EVENT_1_CHECKED_IN\nRole IDs (configuration; server-specific):\nRole ID: 1458828398527909898 (Production – configuration ID)\nRole ID: 1458821385672724663 (Testing – configuration ID)\nButton [UI: Operator-Terminal-events-upload-event-2-role-button]\nEvent 2 → EVENT_2_CHECKED_IN\nRole IDs (configuration; server-specific):\nRole ID: 1458831902474633226 (Production – configuration ID)\nRole ID: 1458829112964681975 (Testing – configuration ID)\nButton [UI: Operator-Terminal-events-upload-event-3-role-button]\nEvent 3 → EVENT_3_CHECKED_IN\nRole IDs (configuration; server-specific):\nRole ID: 1458831939728572552 (Production – configuration ID)\nRole ID: 1458830811267600425 (Testing – configuration ID)\nButton [UI: Operator-Terminal-events-upload-event-4-role-button]\nEvent 4 → EVENT_4_CHECKED_IN\nRole IDs (configuration; server-specific):\nRole ID: 1458832011689988196 (Production – configuration ID)\nRole ID: 1458831266303705246 (Testing – configuration ID)\nButton [UI: Operator-Terminal-events-upload-event-5-role-button]\nEvent 5 → EVENT_5_CHECKED_IN\nRole IDs (configuration; server-specific):\nRole ID: 1458832044389040311 (Production – configuration ID)\nRole ID: 1458831628028612811 (Testing – configuration ID)\nrole_id is resolved from configuration for the current guild_id + selected check_in_role_key (prod/test IDs are config values, not operator input)\n• If [UI: Operator-Terminal-events-upload-event-1-role-button] is selected:\ncheck_in_role_key = EVENT_1_CHECKED_IN\nUsers who successfully checks in to this event will be assigned the Discord role mapped to EVENT_1_CHECKED_IN for the current server\nThis role is displayed to Operators as [UI: Discord Role Event 1 Checked In]\n• The same rule applies for:\n[UI: Operator-Terminal-events-upload-event-2-role-button] → EVENT_2_CHECKED_IN\n[UI: Operator-Terminal-events-upload-event-3-role-button] → EVENT_3_CHECKED_IN\n[UI: Operator-Terminal-events-upload-event-4-role-button] → EVENT_4_CHECKED_IN\n[UI: Operator-Terminal-events-upload-event-5-role-button] → EVENT_5_CHECKED_IN\n• On Submit:\nSave check_in_role_key to the draft event\nrole_id is resolved from configuration for the current guild_id + check_in_role_key (config values, not operator input).\nOn Submit: store to draft check_in_role_key + resolved_role_id (preview).\nOn Submit Event: store finalized snapshot check_in_role_key + resolved_role_id\n• Submit is disabled unless the user changes the selection.\nOn Submit: save to draft:\ncheck_in_role_key only\nFinalization snapshot rule (Event Upload → Submit Event)\nRule: When Submit Event finalizes the draft, the finalized event record stores:\ncheck_in_role_key\nresolved_role_id (snapshot used for check-ins for this event)\n• On Submit: save to draft → return to [UI: Operator-Terminal-events-upload-menu] → mark [UI: Operator-Terminal-events-upload-role-allocated-button] complete (blue) → enable [UI: Operator-Terminal-events-upload-GIF-button]\n• On Back: return to [UI: Operator-Terminal-events-upload-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Discord Role Event 1 Checked In]",
            "[UI: Discord Role Event 2 Checked In]",
            "[UI: Discord Role Event 3 Checked In]",
            "[UI: Discord Role Event 4 Checked In]",
            "[UI: Discord Role Event 5 Checked In]",
            "[UI: Operator-Terminal-events-upload-GIF-button]",
            "[UI: Operator-Terminal-events-upload-event-1-role-button]",
            "[UI: Operator-Terminal-events-upload-event-2-role-button]",
            "[UI: Operator-Terminal-events-upload-event-3-role-button]",
            "[UI: Operator-Terminal-events-upload-event-4-role-button]",
            "[UI: Operator-Terminal-events-upload-event-5-role-button]",
            "[UI: Operator-Terminal-events-upload-menu]",
            "[UI: Operator-Terminal-events-upload-role-allocated-back-button]",
            "[UI: Operator-Terminal-events-upload-role-allocated-button]",
            "[UI: Operator-Terminal-events-upload-role-allocated-menu]",
            "[UI: Operator-Terminal-events-upload-role-allocated-submit-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5e",
          "step_code": "Step 5E",
          "title": "GIF uploader (menu + file attach) (Event Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If GIF is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-GIF-back-button]",
                "[UI: Operator-Terminal-events-upload-GIF-back-file-button]",
                "[UI: Operator-Terminal-events-upload-GIF-check-in-file-button]",
                "[UI: Operator-Terminal-events-upload-GIF-main-file-button]",
                "[UI: Operator-Terminal-events-upload-GIF-menu]",
                "[UI: Operator-Terminal-events-upload-GIF-submit-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-events-upload-GIF-menu]\n• Show:\n• GIF (main) [UI: Operator-Terminal-events-upload-GIF-main-file-button]\n• GIF (check-in) [UI: Operator-Terminal-events-upload-GIF-check-in-file-button]\n• GIF (back) [UI: Operator-Terminal-events-upload-GIF-back-file-button]\n• Submit [UI: Operator-Terminal-events-upload-GIF-submit-button]\n• Back [UI: Operator-Terminal-events-upload-GIF-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Unlock rules",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-GIF-back-file-button]",
                "[UI: Operator-Terminal-events-upload-GIF-check-in-file-button]",
                "[UI: Operator-Terminal-events-upload-GIF-main-file-button]",
                "[UI: Operator-Terminal-events-upload-GIF-submit-button]"
              ],
              "text": "• GIF buttons unlock sequentially in this order:\n[UI: Operator-Terminal-events-upload-GIF-main-file-button]\n[UI: Operator-Terminal-events-upload-GIF-check-in-file-button]\n[UI: Operator-Terminal-events-upload-GIF-back-file-button]\n• Each GIF button must have a valid file uploaded to be marked complete (blue).\n• Once all three GIF buttons are complete (blue), Submit [UI: Operator-Terminal-events-upload-GIF-submit-button] becomes enabled.\n• Completed GIF buttons remain clickable to allow re-upload.\nDraft rule (GIFs)\n• Rule: Each successful GIF upload updates the same draft event record (status=draft).\n• Rule: Re-uploading a GIF replaces the previously stored file for that slot.\n• Rule: First valid file wins per upload action (ignore or reject additional files).\nGIF slot upload flow (applies to all three GIF buttons)"
            },
            {
              "kind": "branch",
              "header": "If a GIF slot button is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-GIF-any-file-back-button]",
                "[UI: Operator-Terminal-events-upload-GIF-main-file-button]"
              ],
              "text": "(e.g. [UI: Operator-Terminal-events-upload-GIF-main-file-button])\n• Disable all GIF buttons, Submit, and Back while awaiting file input\n• Show Back (exit upload) [UI: Operator-Terminal-events-upload-GIF-any-file-back-button]\nFile attach behavior\n• User attaches a file in the text chat\n• Accepted file type: .gif only\n• GIF files can be any size that discord will accept (if user has discord nitro etc, they can upload larger files)."
            },
            {
              "kind": "branch",
              "header": "If incorrect file type",
              "ui_refs": [],
              "text": "• System posts message: “Incorrect file type.”\n• Message auto-deletes after 10 seconds\n• Remain in file attach state"
            },
            {
              "kind": "branch",
              "header": "If correct file type",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-GIF-menu]"
              ],
              "text": "• Store GIF in draft event record under the correct slot\n• System deletes the uploaded .gif message from chat\n• Mark the corresponding GIF button complete (blue)\n• Return to [UI: Operator-Terminal-events-upload-GIF-menu]\n• Re-enable all GIF buttons\n• Preserve completion state"
            },
            {
              "kind": "branch",
              "header": "If Back is clicked during file attach",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-GIF-any-file-back-button]",
                "[UI: Operator-Terminal-events-upload-GIF-menu]"
              ],
              "text": "[UI: Operator-Terminal-events-upload-GIF-any-file-back-button]\n• Cancel current file attach\n• Return to [UI: Operator-Terminal-events-upload-GIF-menu]\n• No state changes occur\nSubmit GIFs"
            },
            {
              "kind": "branch",
              "header": "If Submit is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-GIF-back-file-button]",
                "[UI: Operator-Terminal-events-upload-GIF-button]",
                "[UI: Operator-Terminal-events-upload-GIF-check-in-file-button]",
                "[UI: Operator-Terminal-events-upload-GIF-main-file-button]",
                "[UI: Operator-Terminal-events-upload-GIF-submit-button]",
                "[UI: Operator-Terminal-events-upload-menu]",
                "[UI: Terminal-events-GIF-*event name*-main]",
                "[UI: Terminal-transitional GIF-events-*event name*-back]",
                "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
              ],
              "text": "[UI: Operator-Terminal-events-upload-GIF-submit-button]\n• Condition: all three GIF buttons are complete (blue)\n• Save GIF completion state to draft (no final commit)\n• Return to [UI: Operator-Terminal-events-upload-menu] (Step 5)\n• Mark [UI: Operator-Terminal-events-upload-GIF-button] complete (blue)\nGIF display\n• [UI: Operator-Terminal-events-upload-GIF-main-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-events-GIF-*event name*-main]\n• [UI: Operator-Terminal-events-upload-GIF-check-in-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-transitional GIF-events-*event name*-check-in]\n• [UI: Operator-Terminal-events-upload-GIF-back-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-transitional GIF-events-*event name*-back]\nExit GIF uploader"
            },
            {
              "kind": "branch",
              "header": "If Back is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-GIF-back-button]",
                "[UI: Operator-Terminal-events-upload-menu]"
              ],
              "text": "[UI: Operator-Terminal-events-upload-GIF-back-button]\n• Return to [UI: Operator-Terminal-events-upload-menu]\n• No changes committed\n• Preserve all existing draft state"
            },
            {
              "kind": "section",
              "header": "Timeout rule",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-GIF-menu]"
              ],
              "text": "• If no valid file is received within 2 minutes:\n• Cancel current GIF upload\n• Return to [UI: Operator-Terminal-events-upload-GIF-menu]\n• No state changes occur"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-upload-GIF-any-file-back-button]",
            "[UI: Operator-Terminal-events-upload-GIF-back-button]",
            "[UI: Operator-Terminal-events-upload-GIF-back-file-button]",
            "[UI: Operator-Terminal-events-upload-GIF-button]",
            "[UI: Operator-Terminal-events-upload-GIF-check-in-file-button]",
            "[UI: Operator-Terminal-events-upload-GIF-main-file-button]",
            "[UI: Operator-Terminal-events-upload-GIF-menu]",
            "[UI: Operator-Terminal-events-upload-GIF-submit-button]",
            "[UI: Operator-Terminal-events-upload-menu]",
            "[UI: Terminal-events-GIF-*event name*-main]",
            "[UI: Terminal-transitional GIF-events-*event name*-back]",
            "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5_option_b-b",
          "step_code": "Step 5 [Option B-B]",
          "title": "Events Scheduling screen (no GIFs, buttons only)",
          "blocks": [
            {
              "kind": "section",
              "header": "On entry",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-back-button]",
                "[UI: Operator-Terminal-events-scheduling-delete-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-button]",
                "[UI: Operator-Terminal-events-scheduling-menu]",
                "[UI: Operator-Terminal-events-scheduling-next-button]",
                "[UI: Operator-Terminal-events-scheduling-previous-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-events-scheduling-menu]\nThis will also populate based on the currently displayed Event: “*Event name*, *status*, *begin date*, *end date*” (for current selection).\n• Show buttons:\nEdit [UI: Operator-Terminal-events-scheduling-edit-button]\nDelete [UI: Operator-Terminal-events-scheduling-delete-button]\nNext [UI: Operator-Terminal-events-scheduling-next-button]\nPrevious [UI: Operator-Terminal-events-scheduling-previous-button]\nBack [UI: Operator-Terminal-events-scheduling-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [],
              "text": "• Rule: Previous is disabled unless the user clicks Next as there is no previous Event to navigate to at the beginning.\n• Rule: If no remaining events exist, show an empty-state message and disable Edit/Delete/Next/Previous buttons.\n• Rule: Events that have the status scheduled or active will be shown here, if an Event has the expired status, it will appear here but will disappear 7 days after end date has arrived. Draft status Events will not appear here.\n• Rule: Last edited, begin date and end date is listed in text on the ephemeral message for currently selected event.\n• Rule: Display Events in order of begin date (closest to begin date first appearing).\n• Rule: Scheduling screen always displays one ‘currently selected’ event from the list.\n• Rule: Next/Previous changes the currently selected event.\n• Rule: Edit/Delete applies to the currently selected event.\n• Rule: Edits can change event status (scheduled/active/expired) if begin or end dates are changed – status is recomputed from after schedule edit submit.\n• Rule: Upload process submit: Create event from draft (finalize).\n• Rule: Scheduling process submit: Apply edit draft to event (update).",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-scheduling-back-button]",
            "[UI: Operator-Terminal-events-scheduling-delete-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-button]",
            "[UI: Operator-Terminal-events-scheduling-menu]",
            "[UI: Operator-Terminal-events-scheduling-next-button]",
            "[UI: Operator-Terminal-events-scheduling-previous-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5a",
          "step_code": "Step 5A",
          "title": "Edit flow (Event Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Edit is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-back-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-menu]",
                "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-name-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-schedule-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-submit-event-button]",
                "[UI: Operator-Terminal-events-scheduling-menu]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-events-scheduling-edit-menu]\nEvent Name [UI: Operator-Terminal-events-scheduling-edit-name-button]\nMerits Awarded [UI: Operator-Terminal-events-scheduling-edit-merits-awarded-button]\nSchedule [UI: Operator-Terminal-events-scheduling-edit-schedule-button]\nRole Allocated [UI: Operator-Terminal-events-scheduling-edit-role-allocated-button]\nGIF [UI: Operator-Terminal-events-scheduling-edit-GIF-button]\nSubmit Event [UI: Operator-Terminal-events-scheduling-edit-submit-event-button]\nBack [UI: Operator-Terminal-events-scheduling-edit-back-button]\nDraft save rule (applies to all fields)\n• Rule: Each “Submit” action (modal submit or menu submit) updates a temporary edit draft linked to the event (does not change event status).\nRule: Edit drafts are scoped per guild_id + operator_user_id + event_id.\nRule: Entering Edit creates/resumes the operator’s edit draft for that specific objective/event.\nRule: If operator switches to editing a different objective/event, their previous edit draft remains saved (until submitted/cancelled/expired).\nEdit draft lifecycle\nRule: On Submit Objective/Event (edit submit), commit changes and delete/clear the edit draft for that objective/event.\nRule: On Back from edit menu: keep edit draft – expires after 24 hours.\nRule: If draft exists and operator completes submission of objective/event successfully, system clears the draft.\n• Rule: Upload process submit: Create event from draft (finalize).\n• Rule: Scheduling process submit: Apply edit draft to event (update).\n• Rule: Cancel/Back exits the current modal/menu without committing changes.\n“Blue button” rule (updated fields)\n• Rule: Existing pre-filled buttons do not appear blue here, but if a change is made in any button’s modal/menus it will update to blue. It reflects change, not completeness.\n• Rule: The modal/menu “Submit” is disabled unless the user changes something.\n• Rule: After clicking Submit it will submit changes to Event, return to [UI: Operator-Terminal-events-scheduling-menu] (back to the Event that was being edited – not to the beginning of the Events list).\nTransition disable rule\n• Rule: During any transition into a modal/menu (and returning from it), disable all upload buttons until the next screen state is rendered.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-scheduling-edit-GIF-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-back-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-menu]",
            "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-name-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-schedule-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-submit-event-button]",
            "[UI: Operator-Terminal-events-scheduling-menu]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5b",
          "step_code": "Step 5B",
          "title": "Event Name flow (Event Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Event Name is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-name-modal-button-cancel]",
                "[UI: Operator-Terminal-events-scheduling-edit-name-modal-button-submit]",
                "[UI: Operator-Terminal-events-scheduling-edit-name-modal-input-field]",
                "[UI: Operator-Terminal-events-scheduling-edit-name-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-events-scheduling-edit-name-modal]\nInput: [UI: Operator-Terminal-events-scheduling-edit-name-modal-input-field]\nButton: [UI: Operator-Terminal-events-scheduling-edit-name-modal-button-submit]\nButton: [UI: Operator-Terminal-events-scheduling-edit-name-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-menu]",
                "[UI: Operator-Terminal-events-scheduling-edit-name-button]"
              ],
              "text": "• Previously submitted data shows.\n• Submit enabled only when input meets minimum requirements (a change is made).\n• On Submit: save to draft → mark [UI: Operator-Terminal-events-scheduling-edit-name-button] changed (blue).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-events-scheduling-edit-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-scheduling-edit-menu]",
            "[UI: Operator-Terminal-events-scheduling-edit-name-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-name-modal-button-cancel]",
            "[UI: Operator-Terminal-events-scheduling-edit-name-modal-button-submit]",
            "[UI: Operator-Terminal-events-scheduling-edit-name-modal-input-field]",
            "[UI: Operator-Terminal-events-scheduling-edit-name-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5c",
          "step_code": "Step 5C",
          "title": "Merits Awarded flow (Event Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Merits Awarded is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal-button-cancel]",
                "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal-button-submit]",
                "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal-input-field]",
                "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal]\nInput: [UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal-input-field]\nButton: [UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal-button-submit]\nButton: [UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-menu]",
                "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-button]"
              ],
              "text": "• Previously submitted data shows.\n• Submit enabled only when input meets minimum requirements (a change is made).\n• On Submit: save to draft → [UI: Operator-Terminal-events-scheduling-edit-merits-awarded-button] changed (blue).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-events-scheduling-edit-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-scheduling-edit-menu]",
            "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal-button-cancel]",
            "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal-button-submit]",
            "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal-input-field]",
            "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5d",
          "step_code": "Step 5D",
          "title": "Schedule flow (Event Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Schedule is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-schedule-modal-button-cancel]",
                "[UI: Operator-Terminal-events-scheduling-edit-schedule-modal-button-submit]",
                "[UI: Operator-Terminal-events-scheduling-edit-schedule-modal-input-field-begin-date]",
                "[UI: Operator-Terminal-events-scheduling-edit-schedule-modal-input-field-end-date]",
                "[UI: Operator-Terminal-events-scheduling-edit-schedule-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-events-scheduling-edit-schedule-modal]\nBegin: [UI: Operator-Terminal-events-scheduling-edit-schedule-modal-input-field-begin-date]\nEnd: [UI: Operator-Terminal-events-scheduling-edit-schedule-modal-input-field-end-date]\nButton: [UI: Operator-Terminal-events-scheduling-edit-schedule-modal-button-submit]\nButton: [UI: Operator-Terminal-events-scheduling-edit-schedule-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-menu]",
                "[UI: Operator-Terminal-events-scheduling-edit-schedule-button]"
              ],
              "text": "• Previously submitted data shows.\n• Submit enabled only when input meets minimum requirements (a change is made).\n• On Submit: save to draft → mark [UI: Operator-Terminal-events-scheduling-edit-schedule-button] changed (blue).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-events-scheduling-edit-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-scheduling-edit-menu]",
            "[UI: Operator-Terminal-events-scheduling-edit-schedule-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-schedule-modal-button-cancel]",
            "[UI: Operator-Terminal-events-scheduling-edit-schedule-modal-button-submit]",
            "[UI: Operator-Terminal-events-scheduling-edit-schedule-modal-input-field-begin-date]",
            "[UI: Operator-Terminal-events-scheduling-edit-schedule-modal-input-field-end-date]",
            "[UI: Operator-Terminal-events-scheduling-edit-schedule-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5e",
          "step_code": "Step 5E",
          "title": "Role Allocated flow (menu) (Event Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Role Allocated is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-event-1-role-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-event-2-role-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-event-3-role-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-event-4-role-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-event-5-role-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-back-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-menu]",
                "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-submit-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-events-scheduling-edit-role-allocated-menu]\n• Show:\n• Event 1: Checked in [UI: Operator-Terminal-events-scheduling-edit-event-1-role-button]\n• Event 2: Checked in [UI: Operator-Terminal-events-scheduling-edit-event-2-role-button]\n• Event 3: Checked in [UI: Operator-Terminal-events-scheduling-edit-event-3-role-button]\n• Event 4: Checked in [UI: Operator-Terminal-events-scheduling-edit-event-4-role-button]\n• Event 5: Checked in [UI: Operator-Terminal-events-scheduling-edit-event-5-role-button]\n\n• Submit [UI: Operator-Terminal-events-scheduling-edit-role-allocated-submit-button]\n• Back [UI: Operator-Terminal-events-scheduling-edit-role-allocated-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Discord Role Event 1 Checked In]",
                "[UI: Discord Role Event 2 Checked In]",
                "[UI: Discord Role Event 3 Checked In]",
                "[UI: Discord Role Event 4 Checked In]",
                "[UI: Discord Role Event 5 Checked In]",
                "[UI: Operator-Terminal-events-scheduling-edit-event-1-role-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-event-2-role-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-event-3-role-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-event-4-role-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-event-5-role-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-menu]",
                "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-button]"
              ],
              "text": "• Whichever role is allocated upon check-in, will be removed at end date expiry time of that event (23:59 / 11:59pm of end date – PT time zone).\n• Role allocation edit follows the same exclusivity rules as Event Upload Role Allocated flow\n• Previously submitted data shows.\n• Submit enabled only when input meets minimum requirements (a change is made).\n• One selection only (selecting another deselects previous).\n• Existing pre-filled buttons do not appear blue here, but if a change is made in any button’s modal/menus it will update to blue. It reflects change, not completeness.\n• If a value already exists, the previously selected option appears blue.\n• Submit is disabled unless the user changes the selection.\n• On Submit: save to draft → return to [UI: Operator-Terminal-events-scheduling-edit-menu] → mark [UI: Operator-Terminal-events-scheduling-edit-role-allocated-button] changed (blue)\n• On Back: return to [UI: Operator-Terminal-events-scheduling-edit-menu] → no state change.\n• A check_in_role_key may be associated with only one upcoming event per guild at any given time.\n• If a role / button has already been assigned to an upcoming event then it will be disabled. It will become active once that event it has been assigned to has reached its end date.\nHowever – if the begin date of the current event is beyond the end date of the previous event that a role is allocated to, then that button will be enabled.\n• Check-ins are recorded per event/user and used for reprocessing and cleanup - per-user “checked_in_events” shows events they are checked in to.\nReprocessing rule (auto)\nRule: On Submit of Role Allocated edit, the system reprocesses past check-ins for this event to match the new resolved_role_id.\nRule: Reprocessing means:\nRemove the event’s previous resolved_role_id from all users who previously checked in\nAdd the event’s new resolved_role_id to all users who previously checked in\nRule: If a user no longer exists in the guild or role operations fail, continue processing others and record failures.\nSafety rule\nRule: Reprocessing only affects roles that were allocated by this event (tracked per event/user). It must not remove roles granted by other systems.\n• If [UI: Operator-Terminal-events-scheduling-edit-event-1-role-button] is selected then [UI: Discord Role Event 1 Checked In] will be allocated to user who checks in to the event that has this button clicked, the sequence will also apply for the following buttons:\n[UI: Operator-Terminal-events-scheduling-edit-event-2-role-button] = [UI: Discord Role Event 2 Checked In]\n[UI: Operator-Terminal-events-scheduling-edit-event-3-role-button] = [UI: Discord Role Event 3 Checked In]\n[UI: Operator-Terminal-events-scheduling-edit-event-4-role-button] = [UI: Discord Role Event 4 Checked In]\n[UI: Operator-Terminal-events-scheduling-edit-event-5-role-button] = [UI: Discord Role Event 5 Checked In]\nButton [UI: Operator-Terminal-events-scheduling-edit-event-1-role-button]\nEvent 1 → EVENT_1_CHECKED_IN\nRole IDs (configuration; server-specific):\nRole ID: 1458828398527909898 (Production – configuration ID)\nRole ID: 1458821385672724663 (Testing – configuration ID)\nEvent text channel ID: 1460522397638852701 (Production – configuration ID)\nEvent text channel ID: 1460539530586099804 (Testing – configuration ID)\nButton [UI: Operator-Terminal-events-scheduling-edit-event-2-role-button]\nEvent 2 → EVENT_2_CHECKED_IN\nRole IDs (configuration; server-specific):\nRole ID: 1458831902474633226 (Production – configuration ID)\nRole ID: 1458829112964681975 (Testing – configuration ID)\nEvent text channel ID: 1460522813600563296 (Production – configuration ID)\nEvent text channel ID: 1460539579420381349 (Testing – configuration ID)\nButton [UI: Operator-Terminal-events-scheduling-edit-event-3-role-button]\nEvent 3 → EVENT_3_CHECKED_IN\nRole IDs (configuration; server-specific):\nRole ID: 1458831939728572552 (Production – configuration ID)\nRole ID: 1458830811267600425 (Testing – configuration ID)\nEvent text channel ID: 1460522887692816435 (Production – configuration ID)\nEvent text channel ID: 1460539610441453589 (Testing – configuration ID)\nButton [UI: Operator-Terminal-events-scheduling-edit-event-4-role-button]\nEvent 4 → EVENT_4_CHECKED_IN\nRole IDs (configuration; server-specific):\nRole ID: 1458832011689988196 (Production – configuration ID)\nRole ID: 1458831266303705246 (Testing – configuration ID)\nEvent text channel ID: 1460522977501118568 (Production – configuration ID)\nEvent text channel ID: 1460539639910891592 (Testing – configuration ID)\nButton [UI: Operator-Terminal-events-scheduling-edit-event-5-role-button]\nEvent 5 → EVENT_5_CHECKED_IN\nRole IDs (configuration; server-specific):\nRole ID: 1458832044389040311 (Production – configuration ID)\nRole ID: 1458831628028612811 (Testing – configuration ID)\nEvent text channel ID: 1460523092869779532 (Production – configuration ID)\nEvent text channel ID: 1460539669644050635 (Testing – configuration ID)\nrole_id is resolved from configuration for the current guild_id + selected check_in_role_key (prod/test IDs are config values, not operator input)\n• If [UI: Operator-Terminal-events-scheduling-edit-event-1-role-button] is selected:\ncheck_in_role_key = EVENT_1_CHECKED_IN\nUsers who successfully check in to this event will be assigned the Discord role mapped to EVENT_1_CHECKED_IN for the current server\nThis role is displayed to Operators as [UI: Discord Role Event 1 Checked In]\n• The same rule applies for:\n[UI: Operator-Terminal-events-scheduling-edit-event-2-role-button] → EVENT_2_CHECKED_IN\n[UI: Operator-Terminal-events-scheduling-edit-event-3-role-button] → EVENT_3_CHECKED_IN\n[UI: Operator-Terminal-events-scheduling-edit-event-4-role-button] → EVENT_4_CHECKED_IN\n[UI: Operator-Terminal-events-scheduling-edit-event-5-role-button] → EVENT_5_CHECKED_IN\n• On Submit:\nSave check_in_role_key to the draft event\nSave / update role mapping for the current guild_id\nRule: The event record stores both:\ncheck_in_role_key (intent/UI)\nresolved_role_id (snapshot used for allocations)\nRule: On Scheduling Edit Submit for Role Allocated:\nUpdate the event’s check_in_role_key\nRe-resolve and update the event’s resolved_role_id snapshot (for future check-ins)\nFinalization snapshot rule (Event Upload → Submit Event)\nRule: When Submit Event finalizes the draft, the finalized event record stores:\ncheck_in_role_key\nresolved_role_id (snapshot used for check-ins for this event)"
            }
          ],
          "ui_refs": [
            "[UI: Discord Role Event 1 Checked In]",
            "[UI: Discord Role Event 2 Checked In]",
            "[UI: Discord Role Event 3 Checked In]",
            "[UI: Discord Role Event 4 Checked In]",
            "[UI: Discord Role Event 5 Checked In]",
            "[UI: Operator-Terminal-events-scheduling-edit-event-1-role-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-event-2-role-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-event-3-role-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-event-4-role-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-event-5-role-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-menu]",
            "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-back-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-menu]",
            "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-submit-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5f",
          "step_code": "Step 5F",
          "title": "GIF uploader (menu + file attach) (Event Scheduling)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If GIF is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-back-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-back-file-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-check-in-file-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-main-file-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-menu]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-submit-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-events-scheduling-edit-GIF-menu]\n• Show:\nGIF (main) [UI: Operator-Terminal-events-scheduling-edit-GIF-main-file-button]\nGIF (check-in) [UI: Operator-Terminal-events-scheduling-edit-GIF-check-in-file-button]\nGIF (back) [UI: Operator-Terminal-events-scheduling-edit-GIF-back-file-button]\nSubmit [UI: Operator-Terminal-events-scheduling-edit-GIF-submit-button]\nBack [UI: Operator-Terminal-events-scheduling-edit-GIF-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [],
              "text": "• Previously submitted data shows.\n• Submit enabled only when input meets minimum requirements (a change is made).\n• Existing pre-filled buttons do not appear blue here, but if a change is made in any button’s modal/menus it will update to blue. It reflects change, not completeness.\n• Each GIF button must have a valid file uploaded to be marked changed (blue).\n• Completed GIF buttons remain clickable to allow re-upload.\nDraft rule (GIFs)\n• Rule: Each successful GIF upload updates the same draft event record (status=draft).\n• Rule: Re-uploading a GIF replaces the previously stored file for that slot.\n• Rule: First valid file wins per upload action (ignore or reject additional files).\nGIF slot upload flow (applies to all three GIF buttons)"
            },
            {
              "kind": "branch",
              "header": "If a GIF slot button is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-any-file-back-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-main-file-button]"
              ],
              "text": "(e.g. [UI: Operator-Terminal-events-scheduling-edit-GIF-main-file-button])\n• Disable all GIF buttons, Submit, and Back while awaiting file input\n• Show Back (exit upload) [UI: Operator-Terminal-events-scheduling-edit-GIF-any-file-back-button]\nFile attach behavior\n• User attaches a file in the text chat\n• Accepted file type: .gif only\n• GIF files can be any size that discord will accept (if user has discord nitro etc, they can upload larger files)."
            },
            {
              "kind": "branch",
              "header": "If incorrect file type",
              "ui_refs": [],
              "text": "• System posts message: “Incorrect file type.”\n• Message auto-deletes after 10 seconds\n• Remain in file attach state"
            },
            {
              "kind": "branch",
              "header": "If correct file type",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-menu]"
              ],
              "text": "• Store GIF in draft event record under the correct slot\n• System deletes the uploaded .gif message from chat\n• Mark the corresponding GIF button changed (blue)\n• Return to [UI: Operator-Terminal-events-scheduling-edit-GIF-menu]\n• Re-enable all GIF buttons\n• Preserve completion state"
            },
            {
              "kind": "branch",
              "header": "If Back is clicked during file attach",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-any-file-back-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-menu]"
              ],
              "text": "[UI: Operator-Terminal-events-scheduling-edit-GIF-any-file-back-button]\n• Cancel current file attach\n• Return to [UI: Operator-Terminal-events-scheduling-edit-GIF-menu]\n• No state changes occur\nSubmit GIFs"
            },
            {
              "kind": "branch",
              "header": "If Submit is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-back-file-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-check-in-file-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-main-file-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-submit-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-menu]",
                "[UI: Terminal-events-GIF-*event name*-main]",
                "[UI: Terminal-transitional GIF-events-*event name*-back]",
                "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
              ],
              "text": "[UI: Operator-Terminal-events-scheduling-edit-GIF-submit-button]\n• Condition: any of the three GIF buttons are changed (blue)\n• Save GIF completion state to draft (no final commit)\n• Return to [UI: Operator-Terminal-events-scheduling-edit-menu] (Step 5)\n• Mark [UI: Operator-Terminal-events-scheduling-edit-GIF-button] changed (blue)\nGIF display\n• [UI: Operator-Terminal-events-scheduling-edit-GIF-main-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-events-GIF-*event name*-main]\n• [UI: Operator-Terminal-events-scheduling-edit-GIF-check-in-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-transitional GIF-events-*event name*-check-in]\n• [UI: Operator-Terminal-events-scheduling-edit-GIF-back-file-button]\nThis GIF will be connected and displayed on: [UI: Terminal-transitional GIF-events-*event name*-back]\nExit GIF uploader"
            },
            {
              "kind": "branch",
              "header": "If Back is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-back-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-menu]"
              ],
              "text": "[UI: Operator-Terminal-events-scheduling-edit-GIF-back-button]\n• Return to [UI: Operator-Terminal-events-scheduling-edit-menu]\n• No changes committed\n• Preserve all existing draft state"
            },
            {
              "kind": "section",
              "header": "Timeout rule",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-menu]"
              ],
              "text": "• If no valid file is received within 2 minutes:\n• Cancel current GIF upload\n• Return to [UI: Operator-Terminal-events-scheduling-edit-GIF-menu]\n• No state changes occur"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-scheduling-edit-GIF-any-file-back-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-GIF-back-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-GIF-back-file-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-GIF-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-GIF-check-in-file-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-GIF-main-file-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-GIF-menu]",
            "[UI: Operator-Terminal-events-scheduling-edit-GIF-submit-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-menu]",
            "[UI: Terminal-events-GIF-*event name*-main]",
            "[UI: Terminal-transitional GIF-events-*event name*-back]",
            "[UI: Terminal-transitional GIF-events-*event name*-check-in]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5a",
          "step_code": "Step 5A",
          "title": "Delete flow (Event Scheduling)",
          "blocks": [
            {
              "kind": "section",
              "header": "Rules:",
              "ui_refs": [],
              "text": "Delete is disabled for events with status active\nDeletion is permanent and cannot be undone\nConfirm and Back are disabled once Confirm is clicked until operation completes"
            }
          ],
          "ui_refs": []
        },
        {
          "step_id": "operator_terminal.step_5_option_c-a",
          "step_code": "Step 5 [Option C-A]",
          "title": "Commands Initiate Roll Call screen (no GIFs, buttons only)",
          "blocks": [
            {
              "kind": "section",
              "header": "On entry",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-roll-call-back-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-initiate-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-menu]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-commands-initiate-roll-call-menu]\n• Show buttons (all visible, but enabled sequentially):\n• Target Channel [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-button]\n• Initiate [UI: Operator-Terminal-commands-initiate-roll-call-initiate-button]\n• Back [UI: Operator-Terminal-commands-initiate-roll-call-back-button]\n• Buttons unlock in this order:\n1. [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-button]\n2. [UI: Operator-Terminal-commands-initiate-roll-call-initiate-button] (only when all required fields are completed)\n• Back [UI: Operator-Terminal-commands-initiate-roll-call-back-button] is always available.\nDraft save rule (applies to all fields)\n• Rule: Each “Submit” action (modal submit or menu submit) updates the same draft command record (status=draft).\n• Rule: Cancel/Back exits the current modal/menu without committing changes.\n“Blue button” rule (completed fields)\n• Rule: The modal/menu “Submit” is disabled unless the user changes something.\nTransition disable rule\n• Rule: During any transition into a modal/menu (and returning from it), disable all upload buttons until the next screen state is rendered.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-initiate-roll-call-back-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-initiate-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-menu]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5a",
          "step_code": "Step 5A",
          "title": "Target Channel flow (menu) (Commands Initiate Roll Call)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Target Channel is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-back-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-1-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-2-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-3-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-4-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-5-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-menu]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-submit-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-menu]\n• Show:\n• Event Channel 1 [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-1-button]\n• Event Channel 2 [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-2-button]\n• Event Channel 3 [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-3-button]\n• Event Channel 4 [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-4-button]\n• Event Channel 5 [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-5-button]\n\n• Submit [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-submit-button]\n• Back [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Discord channel-Event Channel 1]",
                "[UI: Discord channel-Event Channel 2]",
                "[UI: Discord channel-Event Channel 3]",
                "[UI: Discord channel-Event Channel 4]",
                "[UI: Discord channel-Event Channel 5]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-initiate-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-menu]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-1-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-2-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-3-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-4-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-5-button]"
              ],
              "text": "• Submit enabled only when exactly one channel option is selected.\nHybrid store on Target Channel submit\nOn Submit: save to draft:\nchannel_key\nresolved_channel_id (resolved from configuration for current guild_id + channel_key)\nFinalization snapshot rule (Roll Call → Initiate)\nRule: When Initiate finalizes the draft, the finalized roll call command stores:\nchannel_key\nresolved_channel_id (snapshot used to post roll call message)\nExecution uses snapshot\nRule: Posting the roll call message uses resolved_channel_id stored on the finalized command.\nRule: The roll call command is associated with the event/channel via the resolved_channel_id snapshot stored on the command record.\n• Only buttons that have active events connected to the channels will be active. If there is no active event connected to the event channel / button then it will be disabled.\n• One selection only (selecting another deselects previous).\n• If validation fails: keep menu open with values preserved.\n• If [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-1-button] is selected [UI: Discord channel-Event Channel 1] will be selected and this text channel will be where the roll call will be sent. The following buttons map to the following text channels:\n[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-2-button] = [UI: Discord channel-Event Channel 2]\n[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-3-button] = [UI: Discord channel-Event Channel 3]\n[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-4-button] = [UI: Discord channel-Event Channel 4]\n[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-5-button] = [UI: Discord channel-Event Channel 5]\nSelecting any text channel button will assign a channel_key to the roll call command record. On Submit: save to draft: channel_key and resolved_channel_id (resolved from configuration for current guild_id + channel_key).”\nExecution uses resolved_channel_id snapshot stored on the finalized command.\nButton [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-1-button]\nChannel IDs (configuration; server-specific):\nChannel ID: 1460522397638852701 (Production – configuration ID)\nChannel ID: 1460539530586099804 (Testing – configuration ID)\nButton [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-2-button]\nChannel IDs (configuration; server-specific):\nChannel ID: 1460522813600563296 (Production – configuration ID)\nChannel ID: 1460539579420381349 (Testing – configuration ID)\nButton [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-3-button]\nChannel IDs (configuration; server-specific):\nChannel ID: 1460522887692816435 (Production – configuration ID)\nChannel ID: 1460539610441453589 (Testing – configuration ID)\nButton [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-4-button]\nChannel IDs (configuration; server-specific):\nChannel ID: 1460522977501118568 (Production – configuration ID)\nChannel ID: 1460539639910891592 (Testing – configuration ID)\nButton [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-5-button]\nChannel IDs (configuration; server-specific):\nChannel ID: 1460523092869779532 (Production – configuration ID)\nChannel ID: 1460539669644050635 (Testing – configuration ID)\nchannel_id is resolved from configuration for the current guild_id + selected channel_key (prod/test IDs are config values, not operator input)\n• Submit is disabled unless the user changes the selection.\n• On Submit: save to draft → return to [UI: Operator-Terminal-commands-initiate-roll-call-menu] → mark [UI: Operator-Terminal-commands-initiate-roll-call-target-channel-button] complete (blue) → enable [UI: Operator-Terminal-commands-initiate-roll-call-initiate-button]\n• On Back: return to [UI: Operator-Terminal-commands-initiate-roll-call-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Discord channel-Event Channel 1]",
            "[UI: Discord channel-Event Channel 2]",
            "[UI: Discord channel-Event Channel 3]",
            "[UI: Discord channel-Event Channel 4]",
            "[UI: Discord channel-Event Channel 5]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-initiate-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-menu]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-back-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-1-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-2-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-3-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-4-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-channel-5-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-menu]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-submit-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5_option_c-b",
          "step_code": "Step 5 [Option C-B]",
          "title": "Commands Initiate Announcement screen (no GIFs, buttons only)",
          "blocks": [
            {
              "kind": "section",
              "header": "On entry",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-announcement-back-button]",
                "[UI: Operator-Terminal-commands-initiate-announcement-initiate-button]",
                "[UI: Operator-Terminal-commands-initiate-announcement-menu]",
                "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-commands-initiate-announcement-menu]\n• Show buttons (all visible, but enabled sequentially):\n• Upload Audio [UI: Operator-Terminal-commands-initiate-announcement-upload-audio-button]\n• Initiate [UI: Operator-Terminal-commands-initiate-announcement-initiate-button]\n• Back [UI: Operator-Terminal-commands-initiate-announcement-back-button]\n• Buttons unlock in this order:\n1. [UI: Operator-Terminal-commands-initiate-announcement-upload-audio-button]\n2. [UI: Operator-Terminal-commands-initiate-announcement-initiate-button] (only when all required fields are completed)\n• Back [UI: Operator-Terminal-commands-initiate-announcement-back-button] is always available.\nDraft save rule (applies to all fields)\n• Rule: Each “Submit” action (modal submit or menu submit) updates the same draft command record (status=draft).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-commands-initiate-announcement-menu] → no state change.\n“Blue button” rule (completed fields)\n• Rule: The modal/menu “Submit” is disabled unless the user changes something.\nTransition disable rule\n• Rule: During any transition into a modal/menu (and returning from it), disable all upload buttons until the next screen state is rendered.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-initiate-announcement-back-button]",
            "[UI: Operator-Terminal-commands-initiate-announcement-initiate-button]",
            "[UI: Operator-Terminal-commands-initiate-announcement-menu]",
            "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5a",
          "step_code": "Step 5A",
          "title": "Upload Audio flow (menu) (Commands Initiate Announcement)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Upload Audio button is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-back-button]",
                "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-menu]",
                "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-submit-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-commands-initiate-announcement-upload-audio-menu]\n• Show buttons (all visible, but enabled sequentially):\n• Submit [UI: Operator-Terminal-commands-initiate-announcement-upload-audio-submit-button] (only activates when valid audio file is uploaded)\n• Back [UI: Operator-Terminal-commands-initiate-announcement-upload-audio-back-button]\nFile attach behavior\n• Menu begins in a file attach stage\n• User attaches a file in the text chat\n• Accepted file type: .wav / .mp3 only",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If incorrect file type",
              "ui_refs": [],
              "text": "• System posts message: “Incorrect file type.”\n• Message auto-deletes after 10 seconds\n• Remain in file attach state"
            },
            {
              "kind": "branch",
              "header": "If correct file type",
              "ui_refs": [],
              "text": "• Store audio file in draft command record\n• System deletes the uploaded audio message from chat\n• Submit button activates"
            },
            {
              "kind": "branch",
              "header": "If Back is clicked during file attach",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-announcement-menu]",
                "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-back-button]"
              ],
              "text": "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-back-button]\n• Cancel current file attach\n• Return to [UI: Operator-Terminal-commands-initiate-announcement-menu]\n• No state changes occur"
            },
            {
              "kind": "branch",
              "header": "If Submit is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-announcement-menu]",
                "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-button]",
                "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-submit-button]"
              ],
              "text": "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-submit-button]\n• Condition: valid audio file is uploaded\n• Return to [UI: Operator-Terminal-commands-initiate-announcement-menu]\n• Mark [UI: Operator-Terminal-commands-initiate-announcement-upload-audio-button] changes to completed state (blue)"
            },
            {
              "kind": "section",
              "header": "Timeout rule",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-announcement-menu]"
              ],
              "text": "• If no valid file is received within 2 minutes:\n• Cancel current audio upload\n• Return to [UI: Operator-Terminal-commands-initiate-announcement-menu]\n• No state changes occur"
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-initiate-announcement-menu]",
            "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-back-button]",
            "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-button]",
            "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-menu]",
            "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-submit-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5_option_c-c",
          "step_code": "Step 5 [Option C-C]",
          "title": "Commands Initiate Merit Transfer screen (no GIFs, buttons only)",
          "blocks": [
            {
              "kind": "section",
              "header": "On entry",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-back-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-menu]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-button]"
              ],
              "text": "• Ephemeral message updates to [UI: Operator-Terminal-commands-initiate-merit-transfer-menu]\n• Show buttons (all visible, but enabled sequentially):\n• User ID [UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-button]\n• Transfer Amount [UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]\n• Operator Notes [UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]\n• Initiate [UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button]\n• Back [UI: Operator-Terminal-commands-initiate-merit-transfer-back-button]\n• Buttons unlock in this order:\n1. [UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-button]\n2. [UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]\n3. [UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]\n4. [UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button] (only when all required fields are completed)\n• Back [UI: Operator-Terminal-commands-initiate-merit-transfer-back-button] is always available.\nDraft save rule (applies to all fields)\n• Rule: Each “Submit” action (modal submit or menu submit) updates the same draft command record (status=draft).\n• Rule: Submitting operator cannot send Merits to themselves (cannot supply their own Discord ID).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-commands-initiate-merit-transfer-menu] → no state change.\n“Blue button” rule (completed fields)\n• Rule: The modal/menu “Submit” is disabled unless the user changes something.\nTransition disable rule\n• Rule: During any transition into a modal/menu (and returning from it), disable all buttons until the next screen state is rendered.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-back-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-menu]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5a",
          "step_code": "Step 5A",
          "title": "User ID flow (Commands Initiate Merit Transfer)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If User ID is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal-button-cancel]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal-button-submit]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal-input-field]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal]\nInput: [UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal-input-field]\nButton: [UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal-button-submit]\nButton: [UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-menu]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• Must be a valid Discord snowflake\n• User must exist in the guild\n• On Submit: save to draft → mark [UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-button] complete (blue) → enable next button [UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]\n• On Cancel: close modal → return to [UI: Operator-Terminal-commands-initiate-merit-transfer-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-menu]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal-button-cancel]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal-button-submit]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal-input-field]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5b",
          "step_code": "Step 5B",
          "title": "Transfer Amount flow (Commands Initiate Merit Transfer)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Transfer Amount is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal-button-cancel]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal-button-submit]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal-input-field]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal]\nInput: [UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal-input-field]\nButton: [UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal-button-submit]\nButton: [UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-menu]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• Numerical digits only.\n• Integer only, range 1-9999.\n• Leading zeros are allowed but normalized.\n• Cannot contain decimals.\n• On Submit: save to draft → mark [UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button] complete (blue) → enable next button [UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-commands-initiate-merit-transfer-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-menu]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal-button-cancel]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal-button-submit]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal-input-field]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_5c",
          "step_code": "Step 5C",
          "title": "Operator Notes flow (Commands Initiate Merit Transfer)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Operator Notes is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal-button-cancel]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal-button-submit]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal-input-field]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal]"
              ],
              "text": "• Open modal: [UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal]\nInput: [UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal-input-field]\nButton: [UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal-button-submit]\nButton: [UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-menu]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• Minimum characters 5, maximum characters 1,000.\n• On Submit: save to draft → mark [UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button] complete (blue) → enable next button [UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button]\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: Operator-Terminal-commands-initiate-merit-transfer-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-menu]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal-button-cancel]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal-button-submit]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal-input-field]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-modal]"
          ]
        },
        {
          "step_id": "operator_terminal.step_6_option_a-a-a",
          "step_code": "Step 6 [Option A-A-A]",
          "title": "Submit Objective (Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Submit Objective is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-upload-GIF-button]",
                "[UI: Operator-Terminal-objectives-upload-back-button]",
                "[UI: Operator-Terminal-objectives-upload-file-type-button]",
                "[UI: Operator-Terminal-objectives-upload-merits-awarded-button]",
                "[UI: Operator-Terminal-objectives-upload-name-button]",
                "[UI: Operator-Terminal-objectives-upload-schedule-button]",
                "[UI: Operator-Terminal-objectives-upload-submit-objective-button]"
              ],
              "text": "• Disable buttons while committing:\n[UI: Operator-Terminal-objectives-upload-name-button]\n[UI: Operator-Terminal-objectives-upload-merits-awarded-button]\n[UI: Operator-Terminal-objectives-upload-schedule-button]\n[UI: Operator-Terminal-objectives-upload-file-type-button]\n[UI: Operator-Terminal-objectives-upload-GIF-button]\n[UI: Operator-Terminal-objectives-upload-submit-objective-button]\n[UI: Operator-Terminal-objectives-upload-back-button]\n• System posts message: “Objective submission in progress...\"\n• Message auto-deletes after 10 seconds",
              "instructions": [
                {
                  "type": "duration_seconds",
                  "value": 10,
                  "context": "10 seconds"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Submit Objective succeeds",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-menu]"
              ],
              "text": "• Commit the full draft objective to the database (finalize).\n• On success: System posts message: “Objective successfully submitted!\"\n• Message auto-deletes after 10 seconds\n• Objective will now appear in Objectives > scheduling \n• Return to [UI: Operator-Terminal-objectives-menu]."
            },
            {
              "kind": "branch",
              "header": "If Submit Objective fails",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-menu]"
              ],
              "text": "• Do not commit the full draft objective to the database (finalize).\n• On failure: System posts message: “Objective submission failed.\"\n• Do not return to [UI: Operator-Terminal-objectives-menu], remain in current screen + state.\n• Re-enable all buttons on current screen."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-menu]",
            "[UI: Operator-Terminal-objectives-upload-GIF-button]",
            "[UI: Operator-Terminal-objectives-upload-back-button]",
            "[UI: Operator-Terminal-objectives-upload-file-type-button]",
            "[UI: Operator-Terminal-objectives-upload-merits-awarded-button]",
            "[UI: Operator-Terminal-objectives-upload-name-button]",
            "[UI: Operator-Terminal-objectives-upload-schedule-button]",
            "[UI: Operator-Terminal-objectives-upload-submit-objective-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_6_option_a-b-a",
          "step_code": "Step 6 [Option A-B-A]",
          "title": "Submit Objective (Scheduling)",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-button]"
              ],
              "text": "[UI: Operator-Terminal-objectives-scheduling-edit-button]"
            },
            {
              "kind": "branch",
              "header": "If Submit Objective is clicked [UI: Operator-Terminal-objectives-scheduling-edit-submit-objective-button]",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-back-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-name-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-button]",
                "[UI: Operator-Terminal-objectives-scheduling-edit-submit-objective-button]"
              ],
              "text": "• Disable buttons while committing:\nObjective Name [UI: Operator-Terminal-objectives-scheduling-edit-name-button]\nMerits Awarded [UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-button]\nSchedule [UI: Operator-Terminal-objectives-scheduling-edit-schedule-button]\nProof File Type [UI: Operator-Terminal-objectives-scheduling-edit-file-type-button]\nGIF [UI: Operator-Terminal-objectives-scheduling-edit-GIF-button]\nSubmit Objective [UI: Operator-Terminal-objectives-scheduling-edit-submit-objective-button]\nBack [UI: Operator-Terminal-objectives-scheduling-edit-back-button]\n• System posts message: “Objective submission in progress...\"\n• Message auto-deletes after 10 seconds",
              "instructions": [
                {
                  "type": "duration_seconds",
                  "value": 10,
                  "context": "10 seconds"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Submit Objective succeeds",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-menu]"
              ],
              "text": "• Commit the full draft objective to the database (apply update).\n• On success: System posts message: “Objective successfully submitted!\"\n• Message auto-deletes after 10 seconds\n• Updated Objective will now appear in Objectives > scheduling \n• Return to [UI: Operator-Terminal-objectives-scheduling-menu]"
            },
            {
              "kind": "branch",
              "header": "If Submit Objective fails",
              "ui_refs": [
                "[UI: Operator-Terminal-objectives-scheduling-menu]"
              ],
              "text": "• Do not commit the full draft objective to the database (apply update).\n• On failure: System posts message: “Objective submission failed.\"\n• Do not return to [UI: Operator-Terminal-objectives-scheduling-menu], remain in current screen + state.\n• Re-enable all buttons on current screen."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-objectives-scheduling-edit-GIF-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-back-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-file-type-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-merits-awarded-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-name-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-schedule-button]",
            "[UI: Operator-Terminal-objectives-scheduling-edit-submit-objective-button]",
            "[UI: Operator-Terminal-objectives-scheduling-menu]"
          ]
        },
        {
          "step_id": "operator_terminal.step_6_option_b-a-a",
          "step_code": "Step 6 [Option B-A-A]",
          "title": "Submit Event (Upload)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Submit Event is clicked",
              "ui_refs": [
                "[UI: Operator-Terminal-events-upload-GIF-button]",
                "[UI: Operator-Terminal-events-upload-back-button]",
                "[UI: Operator-Terminal-events-upload-merits-awarded-button]",
                "[UI: Operator-Terminal-events-upload-name-button]",
                "[UI: Operator-Terminal-events-upload-role-allocated-button]",
                "[UI: Operator-Terminal-events-upload-schedule-button]",
                "[UI: Operator-Terminal-events-upload-submit-event-button]"
              ],
              "text": "• Disable buttons while committing:\n[UI: Operator-Terminal-events-upload-name-button]\n[UI: Operator-Terminal-events-upload-merits-awarded-button]\n[UI: Operator-Terminal-events-upload-schedule-button]\n[UI: Operator-Terminal-events-upload-role-allocated-button]\n[UI: Operator-Terminal-events-upload-GIF-button]\n[UI: Operator-Terminal-events-upload-submit-event-button]\n[UI: Operator-Terminal-events-upload-back-button]\n• System posts message: “Event submission in progress...\"\n• Message auto-deletes after 10 seconds",
              "instructions": [
                {
                  "type": "duration_seconds",
                  "value": 10,
                  "context": "10 seconds"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Submit Event succeeds",
              "ui_refs": [
                "[UI: Operator-Terminal-events-menu]"
              ],
              "text": "• Commit the full draft event to the database (finalize).\n• On success: System posts message: “Event successfully submitted!\"\n• Message auto-deletes after 10 seconds\n• Event will now appear in Events > scheduling \n• Return to [UI: Operator-Terminal-events-menu]"
            },
            {
              "kind": "branch",
              "header": "If Submit Event fails",
              "ui_refs": [
                "[UI: Operator-Terminal-events-menu]"
              ],
              "text": "• Do not commit the full draft event to the database (finalize).\n• On failure: System posts message: “Event submission failed.\"\n• Do not return to [UI: Operator-Terminal-events-menu], remain in current screen + state.\n• Re-enable all buttons on current screen."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-menu]",
            "[UI: Operator-Terminal-events-upload-GIF-button]",
            "[UI: Operator-Terminal-events-upload-back-button]",
            "[UI: Operator-Terminal-events-upload-merits-awarded-button]",
            "[UI: Operator-Terminal-events-upload-name-button]",
            "[UI: Operator-Terminal-events-upload-role-allocated-button]",
            "[UI: Operator-Terminal-events-upload-schedule-button]",
            "[UI: Operator-Terminal-events-upload-submit-event-button]"
          ]
        },
        {
          "step_id": "operator_terminal.step_6_option_b-b-a",
          "step_code": "Step 6 [Option B-B-A]",
          "title": "Submit Event (Scheduling)",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-button]"
              ],
              "text": "[UI: Operator-Terminal-events-scheduling-edit-button]"
            },
            {
              "kind": "branch",
              "header": "If Submit Event is clicked [UI: Operator-Terminal-events-scheduling-edit-submit-event-button]",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-edit-GIF-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-back-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-name-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-schedule-button]",
                "[UI: Operator-Terminal-events-scheduling-edit-submit-event-button]"
              ],
              "text": "• Disable buttons while committing:\nEvent Name [UI: Operator-Terminal-events-scheduling-edit-name-button]\nMerits Awarded [UI: Operator-Terminal-events-scheduling-edit-merits-awarded-button]\nSchedule [UI: Operator-Terminal-events-scheduling-edit-schedule-button]\nRole Allocated [UI: Operator-Terminal-events-scheduling-edit-role-allocated-button]\nGIF [UI: Operator-Terminal-events-scheduling-edit-GIF-button]\nSubmit Event [UI: Operator-Terminal-events-scheduling-edit-submit-event-button]\nBack [UI: Operator-Terminal-events-scheduling-edit-back-button]\n• System posts message: “Event submission in progress...\"\n• Message auto-deletes after 10 seconds",
              "instructions": [
                {
                  "type": "duration_seconds",
                  "value": 10,
                  "context": "10 seconds"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Submit Event succeeds",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-menu]"
              ],
              "text": "• Commit the full draft event to the database (apply update).\n• On success: System posts message: “Event successfully submitted!\"\n• Message auto-deletes after 10 seconds\n• Updated Event will now appear in Events > scheduling \n• Return to [UI: Operator-Terminal-events-scheduling-menu]"
            },
            {
              "kind": "branch",
              "header": "If Submit Event fails",
              "ui_refs": [
                "[UI: Operator-Terminal-events-scheduling-menu]"
              ],
              "text": "• Do not commit the full draft event to the database (apply update).\n• On failure: System posts message: “Event submission failed.\"\n• Do not return to [UI: Operator-Terminal-events-scheduling-menu], remain in current screen + state.\n• Re-enable all buttons on current screen."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-events-scheduling-edit-GIF-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-back-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-merits-awarded-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-name-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-role-allocated-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-schedule-button]",
            "[UI: Operator-Terminal-events-scheduling-edit-submit-event-button]",
            "[UI: Operator-Terminal-events-scheduling-menu]"
          ]
        },
        {
          "step_id": "operator_terminal.step_6_option_c-a-a",
          "step_code": "Step 6 [Option C-A-A]",
          "title": "Initiate Roll Call",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Initiate is clicked [UI: Operator-Terminal-commands-initiate-roll-call-initiate-button]",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-roll-call-back-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-initiate-button]",
                "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-button]"
              ],
              "text": "• Disable buttons while committing:\n[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-button]\n[UI: Operator-Terminal-commands-initiate-roll-call-initiate-button]\n[UI: Operator-Terminal-commands-initiate-roll-call-back-button]\n• System posts message: “Roll Call initiation in progress...\"\n• Message auto-deletes after 10 seconds\nEvent resolution rule: When a Roll Call is initiated, the bot resolves the event by:\nUsing the selected resolved_channel_id to resolve the corresponding channel_key (Event Channel 1–5) from configuration.\nFinding the single event record whose event_channel_key == channel_key and whose status == active.\nMerits awarded are taken from that event’s stored “Merits Awarded” value.\nStore roll_call_awards table keyed by (roll_call_id, user_id) so awarding is idempotent.\nClose roll call by setting closed_at in DB after 1 hour. Even if message deletion fails, closed_at blocks further awards.",
              "instructions": [
                {
                  "type": "duration_seconds",
                  "value": 10,
                  "context": "10 seconds"
                },
                {
                  "type": "idempotency",
                  "value": "idempotent"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Initiate succeeds",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-menu]",
                "[UI: Roll-Call message]",
                "[UI: Terminal-events-attend-success DM text]"
              ],
              "text": "• Commit the full draft command to the database (finalize).\n• On success: System posts message: “Roll Call successfully initiated!\"\n• Message auto-deletes after 10 seconds\n• Return to [UI: Operator-Terminal-commands-menu].\n• Roll Call command message [UI: Roll-Call message] will now appear in the specified text channel with a :white_check_mark: emoji reaction enabled.\n• Any valid reaction awards the event’s “Merits Awarded” for the resolved active event for that channel.\n• Bot will also DM the reacting user [UI: Terminal-events-attend-success DM text] alerting them of the Merits they have earnt for attending the event.\n• [UI: Roll-Call message] will auto delete after 1 hour within the specified text channel. After 1 hour, bot stops counting reactions and attempts to delete the message. If deletion fails, roll call is still closed.\nRoll Call message rules:\nOnly :white_check_mark: emoji reaction counts.\nOnly first reaction per user counts.\nRemoving the reaction does not refund/revoke Merits."
            },
            {
              "kind": "branch",
              "header": "If Initiate fails",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-menu]"
              ],
              "text": "• Do not commit the full draft command to the database (finalize).\n• On failure: System posts message: “Roll Call initiation failed.\"\n• Do not return to [UI: Operator-Terminal-commands-menu], remain in current screen + state.\n• Re-enable all buttons on current screen.\n• Roll Call command message will not appear in the specified text channel. The bot will also not message the user."
            }
          ],
          "ui_refs": [
            "[UI: Operator-Terminal-commands-initiate-roll-call-back-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-initiate-button]",
            "[UI: Operator-Terminal-commands-initiate-roll-call-target-channel-button]",
            "[UI: Operator-Terminal-commands-menu]",
            "[UI: Roll-Call message]",
            "[UI: Terminal-events-attend-success DM text]"
          ]
        },
        {
          "step_id": "operator_terminal.step_6_option_c-b-a",
          "step_code": "Step 6 [Option C-B-A]",
          "title": "Initiate Announcement",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Initiate is clicked [UI: Operator-Terminal-commands-initiate-announcement-initiate-button]",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-announcement-back-button]",
                "[UI: Operator-Terminal-commands-initiate-announcement-initiate-button]",
                "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-button]"
              ],
              "text": "• Disable buttons while committing:\n• Upload Audio [UI: Operator-Terminal-commands-initiate-announcement-upload-audio-button]\n• Initiate [UI: Operator-Terminal-commands-initiate-announcement-initiate-button]\n• Back [UI: Operator-Terminal-commands-initiate-announcement-back-button]\n• System posts message: “Announcement initiation in progress...\"\n• Message auto-deletes after 10 seconds",
              "instructions": [
                {
                  "type": "duration_seconds",
                  "value": 10,
                  "context": "10 seconds"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Initiate succeeds",
              "ui_refs": [
                "[UI: Announcement Initiation Request text]",
                "[UI: Announcement-review-operator submission button-a]",
                "[UI: Announcement-review-operator submission button-b]",
                "[UI: Discord channel-LT Command Reviews]",
                "[UI: Operator-Terminal-commands-menu]"
              ],
              "text": "• Commit the full draft command to the database (finalize).\n• On success: System posts message: “Announcement successfully initiated! Pending LT approval.\"\n• Message auto-deletes after 10 seconds\n• Return to [UI: Operator-Terminal-commands-menu].\n• [UI: Announcement Initiation Request text] + [UI: Announcement-review-operator submission button-a] / [UI: Announcement-review-operator submission button-b] buttons are sent to [UI: Discord channel-LT Command Reviews]"
            },
            {
              "kind": "branch",
              "header": "If Initiate fails",
              "ui_refs": [
                "[UI: Announcement Initiation Request text]",
                "[UI: Announcement-review-operator submission button-a]",
                "[UI: Announcement-review-operator submission button-b]",
                "[UI: Discord channel-LT Command Reviews]",
                "[UI: Operator-Terminal-commands-menu]"
              ],
              "text": "• Do not commit the full draft command to the database (finalize).\n• On failure: System posts message: “Announcement initiation failed.\"\n• Do not return to [UI: Operator-Terminal-commands-menu], remain in current screen + state.\n• Re-enable all buttons on current screen.\n• [UI: Announcement Initiation Request text] + [UI: Announcement-review-operator submission button-a] / [UI: Announcement-review-operator submission button-b] buttons are NOT sent to [UI: Discord channel-LT Command Reviews]"
            },
            {
              "kind": "branch",
              "header": "If LT approves announcement [UI: Announcement-review-operator submission button-a]",
              "ui_refs": [
                "[UI: Announcement-text DM]",
                "[UI: Announcement-review-operator submission button-a]",
                "[UI: Announcement-review-operator submission button-b]",
                "[UI: Discord Role The Core Signal]"
              ],
              "text": "• Bot will DM all users with [UI: Discord Role The Core Signal] role the Announcement message [UI: Announcement-text DM].\n• [UI: Announcement-review-operator submission button-a] / [UI: Announcement-review-operator submission button-b] buttons disable."
            },
            {
              "kind": "branch",
              "header": "If LT denies announcement [UI: Announcement-review-operator submission button-b]",
              "ui_refs": [
                "[UI: Announcement-text DM]",
                "[UI: Announcement-review-operator submission button-a]",
                "[UI: Announcement-review-operator submission button-b]",
                "[UI: Discord Role The Core Signal]"
              ],
              "text": "• Bot will NOT DM all users with [UI: Discord Role The Core Signal] role the Announcement message [UI: Announcement-text DM].\n• [UI: Announcement-review-operator submission button-a] / [UI: Announcement-review-operator submission button-b] buttons disable."
            }
          ],
          "ui_refs": [
            "[UI: Announcement Initiation Request text]",
            "[UI: Announcement-text DM]",
            "[UI: Announcement-review-operator submission button-a]",
            "[UI: Announcement-review-operator submission button-b]",
            "[UI: Discord Role The Core Signal]",
            "[UI: Discord channel-LT Command Reviews]",
            "[UI: Operator-Terminal-commands-initiate-announcement-back-button]",
            "[UI: Operator-Terminal-commands-initiate-announcement-initiate-button]",
            "[UI: Operator-Terminal-commands-initiate-announcement-upload-audio-button]",
            "[UI: Operator-Terminal-commands-menu]"
          ]
        },
        {
          "step_id": "operator_terminal.step_6_option_c-c-a",
          "step_code": "Step 6 [Option C-C-A]",
          "title": "Initiate Merit Transfer",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Initiate is clicked [UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button]",
              "ui_refs": [
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-back-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]",
                "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-button]"
              ],
              "text": "• Disable buttons while committing:\n• User ID [UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-button]\n• Transfer Amount [UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]\n• Operator Notes [UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]\n• Initiate [UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button]\n• Back [UI: Operator-Terminal-commands-initiate-merit-transfer-back-button]\n• System posts message: “Merit Transfer initiation in progress...\"\n• Message auto-deletes after 10 seconds",
              "instructions": [
                {
                  "type": "duration_seconds",
                  "value": 10,
                  "context": "10 seconds"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Initiate succeeds",
              "ui_refs": [
                "[UI: Discord channel-LT Command Reviews]",
                "[UI: Merit-Transfer Initiation Request text]",
                "[UI: Merit-Transfer-review-operator submission button-a]",
                "[UI: Merit-Transfer-review-operator submission button-b]",
                "[UI: Operator-Terminal-commands-menu]"
              ],
              "text": "• Commit the full draft command to the database (finalize).\n• On success: System posts message: “Merit Transfer successfully initiated! Pending LT approval.\"\n• Message auto-deletes after 10 seconds\n• Return to [UI: Operator-Terminal-commands-menu].\n• [UI: Merit-Transfer Initiation Request text] + [UI: Merit-Transfer-review-operator submission button-a] / [UI: Merit-Transfer-review-operator submission button-b] buttons are sent to [UI: Discord channel-LT Command Reviews]"
            },
            {
              "kind": "branch",
              "header": "If Initiate fails",
              "ui_refs": [
                "[UI: Discord channel-LT Command Reviews]",
                "[UI: Merit-Transfer Initiation Request text]",
                "[UI: Merit-Transfer-review-operator submission button-a]",
                "[UI: Merit-Transfer-review-operator submission button-b]",
                "[UI: Operator-Terminal-commands-menu]"
              ],
              "text": "• Do not commit the full draft command to the database (finalize).\n• On failure: System posts message: “Merit Transfer initiation failed.\"\n• Do not return to [UI: Operator-Terminal-commands-menu], remain in current screen + state.\n• Re-enable all buttons on current screen.\n• [UI: Merit-Transfer Initiation Request text] + [UI: Merit-Transfer-review-operator submission button-a] / [UI: Merit-Transfer-review-operator submission button-b] buttons are NOT sent to [UI: Discord channel-LT Command Reviews]"
            },
            {
              "kind": "branch",
              "header": "If LT approves Merit Transfer [UI: Merit-Transfer-review-operator submission button-a]",
              "ui_refs": [
                "[UI: Merit-Transfer Success DM text]",
                "[UI: Merit-Transfer-review-operator submission button-a]",
                "[UI: Merit-Transfer-review-operator submission button-b]"
              ],
              "text": "• Bot will DM user the Merit Transfer success message [UI: Merit-Transfer Success DM text].\n• Merit amount listed in the Merit Transfer command will be sent to the specified User in the Merit Transfer initiation by the Operator – it does NOT pull from any users balance but instead just adds to the specified users balance, it is an addition not an actual transfer or trade.\n• If DM to user fails, transfer still completes.\n• [UI: Merit-Transfer-review-operator submission button-a] / [UI: Merit-Transfer-review-operator submission button-b] buttons disable."
            },
            {
              "kind": "branch",
              "header": "If LT denies Merit Transfer [UI: Merit-Transfer-review-operator submission button-b]",
              "ui_refs": [
                "[UI: Merit-Transfer Success DM text]",
                "[UI: Merit-Transfer-review-operator submission button-a]",
                "[UI: Merit-Transfer-review-operator submission button-b]"
              ],
              "text": "• Bot will NOT DM user the Merit Transfer success message [UI: Merit-Transfer Success DM text].\n• Merit amount listed in the Merit Transfer command will NOT be sent to the specified User in the Merit Transfer initiation by the Operator.\n• [UI: Merit-Transfer-review-operator submission button-a] / [UI: Merit-Transfer-review-operator submission button-b] buttons disable."
            }
          ],
          "ui_refs": [
            "[UI: Discord channel-LT Command Reviews]",
            "[UI: Merit-Transfer Initiation Request text]",
            "[UI: Merit-Transfer Success DM text]",
            "[UI: Merit-Transfer-review-operator submission button-a]",
            "[UI: Merit-Transfer-review-operator submission button-b]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-back-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-initiate-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-operator-notes-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-transfer-amount-button]",
            "[UI: Operator-Terminal-commands-initiate-merit-transfer-user-id-button]",
            "[UI: Operator-Terminal-commands-menu]"
          ]
        }
      ]
    },
    {
      "flow_id": "lt_terminal",
      "title": "Lt Terminal",
      "channel_ui": "[UI: Discord channel-lt-terminal]",
      "channel_ids": {
        "testing": "1462028797938503866",
        "production": "1464097183954374770"
      },
      "preface": "All steps take place in text channels:\nTesting channel ID: 1463834456312909947\nProduction channel ID: 1463834248854376600",
      "steps": [
        {
          "step_id": "lt_terminal.step_1",
          "step_code": "Step 1",
          "title": "Access LT Terminal post (public + permanent)",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: LT-[UI: Terminal-access text]",
                "[UI: LT-Terminal-access-button]"
              ],
              "text": "• Access LT Terminal post text [UI: LT-[UI: Terminal-access text]\n• Access LT Terminal post button [UI: LT-Terminal-access-button]"
            }
          ],
          "ui_refs": [
            "[UI: LT-[UI: Terminal-access text]",
            "[UI: LT-Terminal-access-button]"
          ]
        },
        {
          "step_id": "lt_terminal.step_2",
          "step_code": "Step 2",
          "title": "Access button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: LT-Terminal-access-button]",
                "[UI: LT-Terminal-adjust-merits-button]",
                "[UI: LT-Terminal-menu]",
                "[UI: LT-Terminal-suspend-user-button]"
              ],
              "text": "• Trigger ephemeral message [UI: LT-Terminal-menu]\n• Keep [UI: LT-Terminal-access-button] enabled always, but make it idempotent (pressing it just refreshes their ephemeral session)\n• Show main menu buttons:\n• Adjust Merits [UI: LT-Terminal-adjust-merits-button]\n• Suspend User [UI: LT-Terminal-suspend-user-button]",
              "instructions": [
                {
                  "type": "idempotency",
                  "value": "idempotent"
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-access-button]",
            "[UI: LT-Terminal-adjust-merits-button]",
            "[UI: LT-Terminal-menu]",
            "[UI: LT-Terminal-suspend-user-button]"
          ]
        },
        {
          "step_id": "lt_terminal.step_3",
          "step_code": "Step 3",
          "title": "Adjust Merits / Suspend User",
          "blocks": [],
          "ui_refs": []
        },
        {
          "step_id": "lt_terminal.step_3_option_a",
          "step_code": "Step 3 [Option A]",
          "title": "Adjust Merits button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-add-merits-button]",
                "[UI: LT-Terminal-adjust-merits-back-button]",
                "[UI: LT-Terminal-adjust-merits-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-button]",
                "[UI: LT-Terminal-adjust-merits-menu]",
                "[UI: LT-Terminal-suspend-user-button]"
              ],
              "text": "• Disable Adjust Merits [UI: LT-Terminal-adjust-merits-button], Suspend User [UI: LT-Terminal-suspend-user-button]\n• Ephemeral message updates to [UI: LT-Terminal-adjust-merits-menu]\n• Show:\n• Add Merits [UI: LT-Terminal-adjust-merits-add-merits-button]\n• Deduct Merits [UI: LT-Terminal-adjust-merits-deduct-merits-button]\n• Back [UI: LT-Terminal-adjust-merits-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-adjust-merits-add-merits-button]",
            "[UI: LT-Terminal-adjust-merits-back-button]",
            "[UI: LT-Terminal-adjust-merits-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-button]",
            "[UI: LT-Terminal-adjust-merits-menu]",
            "[UI: LT-Terminal-suspend-user-button]"
          ]
        },
        {
          "step_id": "lt_terminal.step_3_option_b",
          "step_code": "Step 3 [Option B]",
          "title": "Suspend User button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-button]",
                "[UI: LT-Terminal-suspend-user-back-button]",
                "[UI: LT-Terminal-suspend-user-button]",
                "[UI: LT-Terminal-suspend-user-duration-button]",
                "[UI: LT-Terminal-suspend-user-initiate-button]",
                "[UI: LT-Terminal-suspend-user-menu]",
                "[UI: LT-Terminal-suspend-user-user-id-button]"
              ],
              "text": "• Disable Adjust Merits [UI: LT-Terminal-adjust-merits-button], Suspend User [UI: LT-Terminal-suspend-user-button]\n• Ephemeral message updates to [UI: LT-Terminal-suspend-user-menu]\n• Show:\n• User ID [UI: LT-Terminal-suspend-user-user-id-button]\n• Duration [UI: LT-Terminal-suspend-user-duration-button]\n• Initiate [UI: LT-Terminal-suspend-user-initiate-button]\n• Back [UI: LT-Terminal-suspend-user-back-button]\n• Buttons unlock in this order:\n1. [UI: LT-Terminal-suspend-user-user-id-button]\n2. [UI: LT-Terminal-suspend-user-duration-button]\n3. [UI: LT-Terminal-suspend-user-initiate-button] (only when all required fields are completed)\n• Back [UI: LT-Terminal-suspend-user-back-button] is always available.\nDraft save rule (applies to all fields)\n• Rule: Each “Submit” action (modal submit or menu submit) updates the same draft LT command record (status=draft).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: LT-Terminal-suspend-user-menu] → no state change.\n“Blue button” rule (completed fields)\n• Rule: The modal/menu “Submit” is disabled unless the user changes the current value from the pre-filled value.\nTransition disable rule\n• Rule: During any transition into a modal/menu (and returning from it), disable all buttons until the next screen state is rendered.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-adjust-merits-button]",
            "[UI: LT-Terminal-suspend-user-back-button]",
            "[UI: LT-Terminal-suspend-user-button]",
            "[UI: LT-Terminal-suspend-user-duration-button]",
            "[UI: LT-Terminal-suspend-user-initiate-button]",
            "[UI: LT-Terminal-suspend-user-menu]",
            "[UI: LT-Terminal-suspend-user-user-id-button]"
          ]
        },
        {
          "step_id": "lt_terminal.step_4_option_a-a",
          "step_code": "Step 4 [Option A-A]",
          "title": "Add Merits button clicked [UI: LT-Terminal-adjust-merits-add-merits-button]",
          "blocks": [
            {
              "kind": "section",
              "header": "On entry",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-add-merits-back-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-initiate-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-menu]",
                "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-user-id-button]"
              ],
              "text": "• Ephemeral message updates to [UI: LT-Terminal-adjust-merits-add-merits-menu]\n• Show buttons (all visible, but enabled sequentially):\n• User ID [UI: LT-Terminal-adjust-merits-add-merits-user-id-button]\n• Transfer Amount [UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]\n• LT Notes [UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]\n• Initiate [UI: LT-Terminal-adjust-merits-add-merits-initiate-button]\n• Back [UI: LT-Terminal-adjust-merits-add-merits-back-button]\n• Buttons unlock in this order:\n1. [UI: LT-Terminal-adjust-merits-add-merits-user-id-button]\n2. [UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]\n3. [UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]\n4. [UI: LT-Terminal-adjust-merits-add-merits-initiate-button] (only when all required fields are completed)\n• Back [UI: LT-Terminal-adjust-merits-add-merits-back-button] is always available.\nDraft save rule (applies to all fields)\n• Rule: Each “Submit” action (modal submit or menu submit) updates the same draft LT command record (status=draft).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: LT-Terminal-adjust-merits-add-merits-menu] → no state change.\n“Blue button” rule (completed fields)\n• Rule: The modal/menu “Submit” is disabled unless the user changes the current value from the pre-filled value.\nTransition disable rule\n• Rule: During any transition into a modal/menu (and returning from it), disable all buttons until the next screen state is rendered.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-adjust-merits-add-merits-back-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-initiate-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-menu]",
            "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-user-id-button]"
          ]
        },
        {
          "step_id": "lt_terminal.step_4a",
          "step_code": "Step 4A",
          "title": "User ID flow (Adjust Merits - Add Merits)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If User ID is clicked",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-add-merits-user-id-modal-button-cancel]",
                "[UI: LT-Terminal-adjust-merits-add-merits-user-id-modal-button-submit]",
                "[UI: LT-Terminal-adjust-merits-add-merits-user-id-modal-input-field]",
                "[UI: LT-Terminal-adjust-merits-add-merits-user-id-modal]"
              ],
              "text": "• Open modal: [UI: LT-Terminal-adjust-merits-add-merits-user-id-modal]\nInput: [UI: LT-Terminal-adjust-merits-add-merits-user-id-modal-input-field]\nButton: [UI: LT-Terminal-adjust-merits-add-merits-user-id-modal-button-submit]\nButton: [UI: LT-Terminal-adjust-merits-add-merits-user-id-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-add-merits-menu]",
                "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-user-id-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• Must be a valid Discord snowflake\n• User must exist in the guild\n• On Submit: save to draft → mark [UI: LT-Terminal-adjust-merits-add-merits-user-id-button] complete (blue) → enable next button [UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]\n• On Cancel: close modal → return to [UI: LT-Terminal-adjust-merits-add-merits-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-adjust-merits-add-merits-menu]",
            "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-user-id-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-user-id-modal-button-cancel]",
            "[UI: LT-Terminal-adjust-merits-add-merits-user-id-modal-button-submit]",
            "[UI: LT-Terminal-adjust-merits-add-merits-user-id-modal-input-field]",
            "[UI: LT-Terminal-adjust-merits-add-merits-user-id-modal]"
          ]
        },
        {
          "step_id": "lt_terminal.step_4b",
          "step_code": "Step 4B",
          "title": "Transfer Amount flow (Adjust Merits - Add Merits)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Transfer Amount is clicked",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal-button-cancel]",
                "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal-button-submit]",
                "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal-input-field]",
                "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal]"
              ],
              "text": "• Open modal: [UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal]\nInput: [UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal-input-field]\nButton: [UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal-button-submit]\nButton: [UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-menu]",
                "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• Numerical digits only.\n• Integer only, range 1-99,000.\n• Leading zeros are allowed but normalized.\n• Cannot contain decimals.\n• On Submit: save to draft → mark [UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button] complete (blue) → enable next button [UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: LT-Terminal-adjust-merits-add-merits-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-menu]",
            "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal-button-cancel]",
            "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal-button-submit]",
            "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal-input-field]",
            "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-modal]"
          ]
        },
        {
          "step_id": "lt_terminal.step_4c",
          "step_code": "Step 4C",
          "title": "LT Notes flow (Adjust Merits - Add Merits)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If LT Notes is clicked",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal-button-cancel]",
                "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal-button-submit]",
                "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal-input-field]",
                "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal]"
              ],
              "text": "• Open modal: [UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal]\nInput: [UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal-input-field]\nButton: [UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal-button-submit]\nButton: [UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-add-merits-initiate-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-menu]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• Minimum characters 5, maximum characters 1,000.\n• On Submit: save to draft → mark [UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button] complete (blue) → enable next button [UI: LT-Terminal-adjust-merits-add-merits-initiate-button]\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: LT-Terminal-adjust-merits-add-merits-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-adjust-merits-add-merits-initiate-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal-button-cancel]",
            "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal-button-submit]",
            "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal-input-field]",
            "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-modal]",
            "[UI: LT-Terminal-adjust-merits-add-merits-menu]"
          ]
        },
        {
          "step_id": "lt_terminal.step_5",
          "step_code": "Step 5",
          "title": "Initiate Add Merits (Adjust Merits - Add Merits)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Initiate is clicked [UI: LT-Terminal-adjust-merits-add-merits-initiate-button]",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-add-merits-back-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-initiate-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]",
                "[UI: LT-Terminal-adjust-merits-add-merits-user-id-button]"
              ],
              "text": "• Disable buttons while committing:\n• User ID [UI: LT-Terminal-adjust-merits-add-merits-user-id-button]\n• Transfer Amount [UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]\n• LT Notes [UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]\n• Initiate [UI: LT-Terminal-adjust-merits-add-merits-initiate-button]\n• Back [UI: LT-Terminal-adjust-merits-add-merits-back-button]\n• System posts message: “Add Merits initiation in progress...\"\n• Message auto-deletes after 10 seconds",
              "instructions": [
                {
                  "type": "duration_seconds",
                  "value": 10,
                  "context": "10 seconds"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Initiate succeeds",
              "ui_refs": [
                "[UI: LT Add Merit-Transfer Success text]",
                "[UI: LT-Terminal-adjust-merits-menu]"
              ],
              "text": "• Commit the full draft LT command to the database (finalize).\n• On success: System posts message: “Add Merits successfully initiated!\"\n• Message auto-deletes after 10 seconds\n• Return to [UI: LT-Terminal-adjust-merits-menu]\n• Bot will DM user the Add Merits success message [UI: LT Add Merit-Transfer Success text].\n• Merit amount listed in the Add Merits LT command will be sent to the specified User in the Add Merits initiation by LT – again this is NOT a transfer from LT to the users account but a credit in Merits.\n• If DM to user fails, transfer still completes."
            },
            {
              "kind": "branch",
              "header": "If Initiate fails",
              "ui_refs": [
                "[UI: LT Add Merit-Transfer Success text]",
                "[UI: LT-Terminal-adjust-merits-menu]"
              ],
              "text": "• Do not commit the full draft LT command to the database (finalize).\n• On failure: System posts message: “Add Merits initiation failed.\"\n• Do not return to [UI: LT-Terminal-adjust-merits-menu], remain in current screen + state.\n• Re-enable all buttons on current screen.\n• Bot will NOT DM user the Add Merits success message [UI: LT Add Merit-Transfer Success text].\n• Merit amount listed in the Add Merits LT command will NOT be sent to the specified User in the Add Merits initiation by LT."
            }
          ],
          "ui_refs": [
            "[UI: LT Add Merit-Transfer Success text]",
            "[UI: LT-Terminal-adjust-merits-add-merits-back-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-initiate-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-lt-notes-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-transfer-amount-button]",
            "[UI: LT-Terminal-adjust-merits-add-merits-user-id-button]",
            "[UI: LT-Terminal-adjust-merits-menu]"
          ]
        },
        {
          "step_id": "lt_terminal.step_4_option_a-b",
          "step_code": "Step 4 [Option A-B]",
          "title": "Deduct Merits button clicked [UI: LT-Terminal-adjust-merits-deduct-merits-button]",
          "blocks": [
            {
              "kind": "section",
              "header": "On entry",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-deduct-merits-back-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-menu]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-button]"
              ],
              "text": "• Ephemeral message updates to [UI: LT-Terminal-adjust-merits-deduct-merits-menu]\n• Show buttons (all visible, but enabled sequentially):\n• User ID [UI: LT-Terminal-adjust-merits-deduct-merits-user-id-button]\n• Transfer Amount [UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]\n• LT Notes [UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]\n• Initiate [UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button]\n• Back [UI: LT-Terminal-adjust-merits-deduct-merits-back-button]\n• Buttons unlock in this order:\n1. [UI: LT-Terminal-adjust-merits-deduct-merits-user-id-button]\n2. [UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]\n3. [UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]\n4. [UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button] (only when all required fields are completed)\n• Back [UI: LT-Terminal-adjust-merits-deduct-merits-back-button] is always available.\nDraft save rule (applies to all fields)\n• Rule: Each “Submit” action (modal submit or menu submit) updates the same draft LT command record (status=draft).\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: LT-Terminal-adjust-merits-deduct-merits-menu] → no state change.\n“Blue button” rule (completed fields)\n• Rule: The modal/menu “Submit” is disabled unless the user changes the current value from the pre-filled value.\nTransition disable rule\n• Rule: During any transition into a modal/menu (and returning from it), disable all buttons until the next screen state is rendered.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-adjust-merits-deduct-merits-back-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-menu]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-button]"
          ]
        },
        {
          "step_id": "lt_terminal.step_4a",
          "step_code": "Step 4A",
          "title": "User ID flow (Adjust Merits - Deduct Merits)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If User ID is clicked",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal-button-cancel]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal-button-submit]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal-input-field]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal]"
              ],
              "text": "• Open modal: [UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal]\nInput: [UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal-input-field]\nButton: [UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal-button-submit]\nButton: [UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-deduct-merits-menu]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• Must be a valid Discord snowflake\n• User must exist in the guild\n• On Submit: save to draft → mark [UI: LT-Terminal-adjust-merits-deduct-merits-user-id-button] complete (blue) → enable next button [UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]\n• On Cancel: close modal → return to [UI: LT-Terminal-adjust-merits-deduct-merits-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-adjust-merits-deduct-merits-menu]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal-button-cancel]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal-button-submit]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal-input-field]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-modal]"
          ]
        },
        {
          "step_id": "lt_terminal.step_4b",
          "step_code": "Step 4B",
          "title": "Transfer Amount flow (Adjust Merits - Deduct Merits)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Transfer Amount is clicked",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal-button-cancel]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal-button-submit]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal-input-field]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal]"
              ],
              "text": "• Open modal: [UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal]\nInput: [UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal-input-field]\nButton: [UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal-button-submit]\nButton: [UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-menu]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• Numerical digits only.\n• Integer only, range 1-99,000.\n• Leading zeros are allowed but normalized.\n• Cannot contain decimals.\n• On Submit: save to draft → mark [UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button] complete (blue) → enable next button [UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: LT-Terminal-adjust-merits-deduct-merits-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-menu]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal-button-cancel]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal-button-submit]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal-input-field]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-modal]"
          ]
        },
        {
          "step_id": "lt_terminal.step_4c",
          "step_code": "Step 4C",
          "title": "LT Notes flow (Adjust Merits - Deduct Merits)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If LT Notes is clicked",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal-button-cancel]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal-button-submit]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal-input-field]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal]"
              ],
              "text": "• Open modal: [UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal]\nInput: [UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal-input-field]\nButton: [UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal-button-submit]\nButton: [UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-menu]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• Minimum characters 5, maximum characters 1,000.\n• On Submit: save to draft → mark [UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button] complete (blue) → enable next button [UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button]\n• If validation fails: keep modal open with values preserved.\n• On Cancel: close modal → return to [UI: LT-Terminal-adjust-merits-deduct-merits-menu] → no state change."
            }
          ],
          "ui_refs": [
            "[UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal-button-cancel]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal-button-submit]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal-input-field]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-modal]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-menu]"
          ]
        },
        {
          "step_id": "lt_terminal.step_5",
          "step_code": "Step 5",
          "title": "Initiate Deduct Merits (Adjust Merits - Deduct Merits)",
          "blocks": [
            {
              "kind": "branch",
              "header": "If Initiate is clicked [UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button]",
              "ui_refs": [
                "[UI: LT-Terminal-adjust-merits-deduct-merits-back-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]",
                "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-button]"
              ],
              "text": "• Disable buttons while committing:\n• User ID [UI: LT-Terminal-adjust-merits-deduct-merits-user-id-button]\n• Transfer Amount [UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]\n• LT Notes [UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]\n• Initiate [UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button]\n• Back [UI: LT-Terminal-adjust-merits-deduct-merits-back-button]\n• System posts message: “Deduct Merits initiation in progress...\"\n• Message auto-deletes after 10 seconds",
              "instructions": [
                {
                  "type": "duration_seconds",
                  "value": 10,
                  "context": "10 seconds"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Initiate succeeds",
              "ui_refs": [
                "[UI: LT Deduct Merit-Transfer Success text]",
                "[UI: LT-Terminal-adjust-merits-menu]"
              ],
              "text": "• Commit the full draft LT command to the database (finalize).\n• On success: System posts message: “Deduct Merits successfully initiated!\"\n• Message auto-deletes after 10 seconds\n• Return to [UI: LT-Terminal-adjust-merits-menu]\n• Bot will DM user the Deduct Merits success message [UI: LT Deduct Merit-Transfer Success text].\n• Merit amount listed in the Deduct Merits LT command will be deducted from the specified User in the Deduct Merits initiation by LT.\n• If DM to user fails, transfer still completes.\nRule: Deduct cannot reduce a user below 0 merits."
            },
            {
              "kind": "branch",
              "header": "If Initiate fails",
              "ui_refs": [
                "[UI: LT Deduct Merit-Transfer Success text]",
                "[UI: LT-Terminal-adjust-merits-menu]"
              ],
              "text": "• Do not commit the full draft LT command to the database (finalize).\n• On failure: System posts message: “Deduct Merits initiation failed.\"\n• Do not return to [UI: LT-Terminal-adjust-merits-menu], remain in current screen + state.\n• Re-enable all buttons on current screen.\n• Bot will NOT DM user the Deduct Merits success message [UI: LT Deduct Merit-Transfer Success text].\n• Merit amount listed in the Deduct Merits LT command will NOT be deducted from the specified User in the Deduct Merits initiation by LT.\nStep 4A [Option B-A] – User ID flow (Suspend User – User ID)"
            },
            {
              "kind": "branch",
              "header": "If User ID is clicked",
              "ui_refs": [
                "[UI: LT-Terminal-suspend-user-user-id-modal-button-cancel]",
                "[UI: LT-Terminal-suspend-user-user-id-modal-button-submit]",
                "[UI: LT-Terminal-suspend-user-user-id-modal-input-field]",
                "[UI: LT-Terminal-suspend-user-user-id-modal]"
              ],
              "text": "• Open modal: [UI: LT-Terminal-suspend-user-user-id-modal]\nInput: [UI: LT-Terminal-suspend-user-user-id-modal-input-field]\nButton: [UI: LT-Terminal-suspend-user-user-id-modal-button-submit]\nButton: [UI: LT-Terminal-suspend-user-user-id-modal-button-cancel]"
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: LT-Terminal-suspend-user-duration-button]",
                "[UI: LT-Terminal-suspend-user-menu]",
                "[UI: LT-Terminal-suspend-user-user-id-button]"
              ],
              "text": "• Submit enabled only when input meets minimum requirements.\n• Must be a valid Discord snowflake\n• User must exist in the guild\n• On Submit: save to draft → mark [UI: LT-Terminal-suspend-user-user-id-button] complete (blue) → enable next button [UI: LT-Terminal-suspend-user-duration-button]\n• On Cancel: close modal → return to [UI: LT-Terminal-suspend-user-menu] → no state change.\nStep 4B [Option B-B] – (Suspend User – Duration)"
            },
            {
              "kind": "branch",
              "header": "If Duration is clicked",
              "ui_refs": [
                "[UI: LT-Terminal-suspend-user-duration-1-day-button]",
                "[UI: LT-Terminal-suspend-user-duration-1-week-button]",
                "[UI: LT-Terminal-suspend-user-duration-12-hours-button]",
                "[UI: LT-Terminal-suspend-user-duration-2-weeks-button]",
                "[UI: LT-Terminal-suspend-user-duration-3-days-button]",
                "[UI: LT-Terminal-suspend-user-duration-back-button]",
                "[UI: LT-Terminal-suspend-user-duration-menu]",
                "[UI: LT-Terminal-suspend-user-duration-submit-button]"
              ],
              "text": "• Ephemeral message updates to [UI: LT-Terminal-suspend-user-duration-menu]\n• Show:\n• 12 Hours [UI: LT-Terminal-suspend-user-duration-12-hours-button]\n• 1 Day [UI: LT-Terminal-suspend-user-duration-1-day-button]\n• 3 Days [UI: LT-Terminal-suspend-user-duration-3-days-button]\n• 1 Week [UI: LT-Terminal-suspend-user-duration-1-week-button]\n• 2 Weeks [UI: LT-Terminal-suspend-user-duration-2-weeks-button]\n\n• Submit [UI: LT-Terminal-suspend-user-duration-submit-button]\n• Back [UI: LT-Terminal-suspend-user-duration-back-button]",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "Rules",
              "ui_refs": [
                "[UI: Discord role Dishonourably Discharged 1 Day]",
                "[UI: Discord role Dishonourably Discharged 1 Week]",
                "[UI: Discord role Dishonourably Discharged 12 Hours]",
                "[UI: Discord role Dishonourably Discharged 2 Weeks]",
                "[UI: Discord role Dishonourably Discharged 3 Days]",
                "[UI: LT-Terminal-suspend-user-duration-1-day-button]",
                "[UI: LT-Terminal-suspend-user-duration-1-week-button]",
                "[UI: LT-Terminal-suspend-user-duration-12-hours-button]",
                "[UI: LT-Terminal-suspend-user-duration-2-weeks-button]",
                "[UI: LT-Terminal-suspend-user-duration-3-days-button]",
                "[UI: LT-Terminal-suspend-user-duration-button]",
                "[UI: LT-Terminal-suspend-user-initiate-button]",
                "[UI: LT-Terminal-suspend-user-menu]",
                "[UI: LT-Terminal-suspend-user-user-id-modal-input-field]"
              ],
              "text": "• One selection only (selecting another deselects previous).\n• If a value already exists, the previously selected option appears blue.\n• If a role / button has already been assigned to the user that role / button will be disabled. It will become active once that role has expired.\n• If [UI: LT-Terminal-suspend-user-duration-12-hours-button] is selected then [UI: Discord role Dishonourably Discharged 12 Hours] role will be allocated to user who is listed in the User ID [UI: LT-Terminal-suspend-user-user-id-modal-input-field]. The role will be allocated on Initiate, it will be removed by the bot automatically 12 hours after allocation.\nThe sequence will also apply for the following buttons:\n[UI: LT-Terminal-suspend-user-duration-1-day-button] = [UI: Discord role Dishonourably Discharged 1 Day] The role will be allocated on Initiate, it will be removed by the bot automatically 1 day after allocation.\n[UI: LT-Terminal-suspend-user-duration-3-days-button] = [UI: Discord role Dishonourably Discharged 3 Days] The role will be allocated on Initiate, it will be removed by the bot automatically 3 days after allocation.\n[UI: LT-Terminal-suspend-user-duration-1-week-button] = [UI: Discord role Dishonourably Discharged 1 Week] The role will be allocated on Initiate, it will be removed by the bot automatically 1 week after allocation.\n[UI: LT-Terminal-suspend-user-duration-2-weeks-button] = [UI: Discord role Dishonourably Discharged 2 Weeks] The role will be allocated on Initiate, it will be removed by the bot automatically 2 weeks after allocation.\nThe role removal timer is computed from allocated_at + duration (12h/1d/3d/1w/2w) and applies to the resolved_role_id snapshot.\nSelecting any duration button assigns a suspended_role_key to the draft command record.\nButton [UI: LT-Terminal-suspend-user-duration-12-hours-button]\nSuspend User 12 Hours → SUSPENDED_12 HOURS\nRole IDs (configuration; server-specific):\nRole ID: 1462990954318532762 (Production – configuration ID)\nRole ID: 1462998248900792533 (Testing – configuration ID)\nButton [UI: LT-Terminal-suspend-user-duration-1-day-button]\nSuspend User 1 Day → SUSPENDED_1 DAY\nRole IDs (configuration; server-specific):\nRole ID: 1462991346141892701 (Production – configuration ID)\nRole ID: 1462998289468362772 (Testing – configuration ID)\nButton [UI: LT-Terminal-suspend-user-duration-3-days-button]\nSuspend User 3 Days → SUSPENDED_3 DAYS\nRole IDs (configuration; server-specific):\nRole ID: 1462991397903798426 (Production – configuration ID)\nRole ID: 1462998341058170992 (Testing – configuration ID)\nButton [UI: LT-Terminal-suspend-user-duration-1-week-button]\nSuspend User 1 Week → SUSPENDED_1 WEEK\nRole IDs (configuration; server-specific):\nRole ID: 1462991458972729436 (Production – configuration ID)\nRole ID: 1462998465700434173 (Testing – configuration ID)\nButton [UI: LT-Terminal-suspend-user-duration-2-weeks-button]\nSuspend User 2 Weeks → SUSPENDED_2 WEEKS\nRole IDs (configuration; server-specific):\nRole ID: 1462991507874123953 (Production – configuration ID)\nRole ID: 1462998597778804860 (Testing – configuration ID)\nrole_id is resolved from configuration for the current guild_id + selected suspended_role_key (prod/test IDs are config values, not LT input)\n• If [UI: LT-Terminal-suspend-user-duration-12-hours-button] is selected:\nsuspended_role_key = SUSPENDED_12 HOURS\n• The same rule applies for:\n[UI: LT-Terminal-suspend-user-duration-1-day-button] → SUSPENDED_1 DAY\n[UI: LT-Terminal-suspend-user-duration-3-days-button]  → SUSPENDED_3 DAYS\n[UI: LT-Terminal-suspend-user-duration-1-week-button] → SUSPENDED_1 WEEK\n[UI: LT-Terminal-suspend-user-duration-2-weeks-button] → SUSPENDED_2 WEEKS\n• On Submit:\nSave suspended_role_key to the draft command\nOn Duration Submit, the bot resolves resolved_role_id from configuration using (guild_id, suspended_role_key).\nThe draft LT command stores:\n• suspended_role_key\n• resolved_role_id (snapshot)\nNo config writes\nSubmitting Duration does not create/update any mapping or configuration. It only stores the selection + resolved snapshot on the draft.\n• Submit enabled only when exactly one duration option is selected AND it differs from the currently saved value (if any).\n• On Submit: save to draft → return to [UI: LT-Terminal-suspend-user-menu] → mark [UI: LT-Terminal-suspend-user-duration-button] complete (blue) → enable [UI: LT-Terminal-suspend-user-initiate-button]\n• On Back: return to [UI: LT-Terminal-suspend-user-menu] → no state change.\nStep 5 [Option B] – Initiate Suspend User (Suspend User - Initiate)"
            },
            {
              "kind": "branch",
              "header": "If Initiate is clicked [UI: LT-Terminal-suspend-user-initiate-button]",
              "ui_refs": [
                "[UI: LT-Terminal-suspend-user-back-button]",
                "[UI: LT-Terminal-suspend-user-duration-button]",
                "[UI: LT-Terminal-suspend-user-initiate-button]",
                "[UI: LT-Terminal-suspend-user-user-id-button]"
              ],
              "text": "• Disable buttons while committing:\n• User ID [UI: LT-Terminal-suspend-user-user-id-button]\n• Duration [UI: LT-Terminal-suspend-user-duration-button]\n• Initiate [UI: LT-Terminal-suspend-user-initiate-button]\n• Back [UI: LT-Terminal-suspend-user-back-button]\n• System posts message: “Suspend User initiation in progress...\"\n• Message auto-deletes after 10 seconds\nExecution uses snapshot\nOn Initiate, the suspension allocates the resolved_role_id stored on the finalized LT command, not a fresh config lookup.",
              "instructions": [
                {
                  "type": "duration_seconds",
                  "value": 10,
                  "context": "10 seconds"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If Initiate succeeds",
              "ui_refs": [
                "[UI: LT-Terminal-menu]",
                "[UI: Suspension text]"
              ],
              "text": "• Commit the full draft LT command to the database (finalize).\n• On success: System posts message: “Suspend User successfully initiated!\"\n• Message auto-deletes after 10 seconds\n• Return to [UI: LT-Terminal-menu]\n• Bot will DM user the Suspension message [UI: Suspension text].\n• Role specified according to Suspension duration will be allocated.\n• If DM to user fails, suspension still completes."
            },
            {
              "kind": "branch",
              "header": "If Initiate fails",
              "ui_refs": [
                "[UI: Discord channel-lt-terminal]",
                "[UI: LT-Terminal-menu]",
                "[UI: Suspension text]"
              ],
              "text": "• Do not commit the full draft LT command to the database (finalize).\n• On failure: System posts message: “Suspend User initiation failed.\"\n• Bot will NOT DM user the Suspension message [UI: Suspension text].\n• Role specified according to Suspension duration will NOT be allocated.\n• Re-enable all buttons on current screen.\n• Do NOT return to [UI: LT-Terminal-menu], remain in current screen + state.\nADMIN SETUP COMMANDS (SLASH COMMANDS) — PROD + TEST\nScope\nThese commands manage only the permanent “access posts” in the server text channels.\nNo objective/event/user stats DB records are modified.\nThe commands may create/update a small system_posts registry (message IDs) so the bot can delete/repost safely.\nCommands\n/prod_core setup\n/prod_core reset\n/test_core setup\n/test_core reset\nAccess rule\nCommands are only valid when executed inside [UI: Discord channel-lt-terminal] for that guild."
            },
            {
              "kind": "branch",
              "header": "If executed in any other channel: respond with an ephemeral error “This command is only available in #lt-terminal.”",
              "ui_refs": [],
              "text": "Guild routing rule\n/prod_core * only performs actions when guild_id == PRODUCTION_GUILD_ID.\n/test_core * only performs actions when guild_id == TESTING_GUILD_ID."
            },
            {
              "kind": "branch",
              "header": "If invoked in the wrong guild: ephemeral error “Wrong server for this command.”",
              "ui_refs": [],
              "text": "Idempotency\n/prod_core setup and /test_core setup are idempotent:",
              "instructions": [
                {
                  "type": "idempotency",
                  "value": "idempotent"
                }
              ]
            },
            {
              "kind": "branch",
              "header": "If a post is missing, bot posts it and records the resulting message_id.",
              "ui_refs": [
                "[UI: Discord channel-leaderboard]",
                "[UI: Discord channel-logs]"
              ],
              "text": "/prod_core reset and /test_core reset are idempotent:\nBot deletes all tracked permanent posts (best-effort; ignore “unknown message” / already deleted).\nClears the system_posts registry entries for those posts.\nSystem post registry\nStore per post:\nguild_id\nchannel_id\npost_key (stable key like terminal_access_post)\nmessage_id\ncreated_at, updated_at\nUsed only to support delete/repost. No other business logic.\nLogging\nOn successful setup/reset:\nEmit a logs entry in [UI: Discord channel-logs]:\n[SYSTEM] setup permanent posts (prod/test)\n[SYSTEM] reset permanent posts (prod/test)\nLEADERBOARD [UI: Discord channel-leaderboard]\nAll steps take place in text channels:\nTesting channel ID: 1462028749146030121\nProduction channel ID: 1463824264665894953",
              "instructions": [
                {
                  "type": "idempotency",
                  "value": "idempotent"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Discord role Dishonourably Discharged 1 Day]",
            "[UI: Discord role Dishonourably Discharged 1 Week]",
            "[UI: Discord role Dishonourably Discharged 12 Hours]",
            "[UI: Discord role Dishonourably Discharged 2 Weeks]",
            "[UI: Discord role Dishonourably Discharged 3 Days]",
            "[UI: Discord channel-leaderboard]",
            "[UI: Discord channel-logs]",
            "[UI: Discord channel-lt-terminal]",
            "[UI: LT Deduct Merit-Transfer Success text]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-back-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-initiate-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-lt-notes-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-transfer-amount-button]",
            "[UI: LT-Terminal-adjust-merits-deduct-merits-user-id-button]",
            "[UI: LT-Terminal-adjust-merits-menu]",
            "[UI: LT-Terminal-menu]",
            "[UI: LT-Terminal-suspend-user-back-button]",
            "[UI: LT-Terminal-suspend-user-duration-1-day-button]",
            "[UI: LT-Terminal-suspend-user-duration-1-week-button]",
            "[UI: LT-Terminal-suspend-user-duration-12-hours-button]",
            "[UI: LT-Terminal-suspend-user-duration-2-weeks-button]",
            "[UI: LT-Terminal-suspend-user-duration-3-days-button]",
            "[UI: LT-Terminal-suspend-user-duration-back-button]",
            "[UI: LT-Terminal-suspend-user-duration-button]",
            "[UI: LT-Terminal-suspend-user-duration-menu]",
            "[UI: LT-Terminal-suspend-user-duration-submit-button]",
            "[UI: LT-Terminal-suspend-user-initiate-button]",
            "[UI: LT-Terminal-suspend-user-menu]",
            "[UI: LT-Terminal-suspend-user-user-id-button]",
            "[UI: LT-Terminal-suspend-user-user-id-modal-button-cancel]",
            "[UI: LT-Terminal-suspend-user-user-id-modal-button-submit]",
            "[UI: LT-Terminal-suspend-user-user-id-modal-input-field]",
            "[UI: LT-Terminal-suspend-user-user-id-modal]",
            "[UI: Suspension text]"
          ]
        },
        {
          "step_id": "lt_terminal.step_1",
          "step_code": "Step 1",
          "title": "Access Leaderboard post (all content here is public facing + permanent)",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Leaderboard-access text]",
                "[UI: Leaderboard-access-button]"
              ],
              "text": "Access text [UI: Leaderboard-access text]\nAccess button [UI: Leaderboard-access-button]"
            }
          ],
          "ui_refs": [
            "[UI: Leaderboard-access text]",
            "[UI: Leaderboard-access-button]"
          ]
        },
        {
          "step_id": "lt_terminal.step_2",
          "step_code": "Step 2",
          "title": "Access button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Leaderboard-access-button]"
              ],
              "text": "Trigger ephemeral message\nKeep [UI: Leaderboard-access-button] enabled always, but make it idempotent (pressing it just refreshes their ephemeral session)",
              "instructions": [
                {
                  "type": "idempotency",
                  "value": "idempotent"
                },
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Leaderboard-access-button]"
          ]
        },
        {
          "step_id": "lt_terminal.step_3",
          "step_code": "Step 3",
          "title": "Post-transition",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Leaderboard-all-time-button]",
                "[UI: Leaderboard-current-cycle-button]",
                "[UI: Leaderboard-current-cycle]"
              ],
              "text": "Ephemeral message loads [UI: Leaderboard-current-cycle]\nShow All Time [UI: Leaderboard-all-time-button] button & [UI: Leaderboard-current-cycle-button] but [UI: Leaderboard-current-cycle-button] is disabled as it is the current view already.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Leaderboard-all-time-button]",
            "[UI: Leaderboard-current-cycle-button]",
            "[UI: Leaderboard-current-cycle]"
          ]
        },
        {
          "step_id": "lt_terminal.step_4_option_a",
          "step_code": "Step 4 [Option A]",
          "title": "Leaderboard All Time button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Leaderboard-all-time-button]",
                "[UI: Leaderboard-all-time]",
                "[UI: Leaderboard-current-cycle-button]"
              ],
              "text": "Ephemeral updates to [UI: Leaderboard-all-time]\nDisable [UI: Leaderboard-all-time-button] & enable [UI: Leaderboard-current-cycle-button] button.",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            }
          ],
          "ui_refs": [
            "[UI: Leaderboard-all-time-button]",
            "[UI: Leaderboard-all-time]",
            "[UI: Leaderboard-current-cycle-button]"
          ]
        },
        {
          "step_id": "lt_terminal.step_4_option_b",
          "step_code": "Step 4 [Option B]",
          "title": "Leaderboard Current Cycle button clicked",
          "blocks": [
            {
              "kind": "main",
              "header": null,
              "ui_refs": [
                "[UI: Discord channel-logs]",
                "[UI: Leaderboard-access-button]",
                "[UI: Leaderboard-all-time-button]",
                "[UI: Leaderboard-all-time]",
                "[UI: Leaderboard-current-cycle-button]",
                "[UI: Leaderboard-current-cycle]",
                "[UI: Leaderboard-top 3-announcement-text]"
              ],
              "text": "Ephemeral updates to [UI: Leaderboard-current-cycle]\nDisable [UI: Leaderboard-current-cycle-button] & enable [UI: Leaderboard-all-time-button]\nThis dataset for [UI: Leaderboard-all-time] + [UI: Leaderboard-current-cycle] must update automatically every 2 hours and it will list the latest update time and date (in PT time zone)\nRule: If a user presses a toggle button – either [UI: Leaderboard-all-time-button] or [UI: Leaderboard-current-cycle-button], it re-renders the ephemeral message immediately using the latest cached dataset and displays that dataset’s cache timestamp as “Last update”.\nRule: “Last update” reflects the timestamp of the cached dataset used for rendering, not the time the user pressed the button.\nRule: Personal Dossier rank is calculated against the full dataset for the selected scope (all-time or current cycle), not limited to the Top 25.\nRule: Each user may only have one active leaderboard ephemeral session per channel. If they press [UI: Leaderboard-access-button] again, edit/replace the existing ephemeral message instead of creating a new one.\nRule: [UI: Leaderboard-current-cycle] and [UI: Leaderboard-all-time] both render Top 25 + Personal Dossier in the same ephemeral message.\nDefinition: These 90 day cycles for the ‘current cycle’ are not rolling, they reach the 90 days and then reset. So, if you checked 3 days into the 90 day cycle, it would show scores accumulated after 3 days only.\nTOP 3 SOLDIERS EACH CYCLE\nAt the end of each cycle (90 days) – the system must collect the top 3 merit scores / users and tag them in a post [UI: Leaderboard-top 3-announcement-text].\nThe message will auto delete after 24 hours.\nRule: This announcement uses the cycle snapshot at reset time, not live data.\nRule: Cycle resets at the end of the 90th day at 11:59pm PT time zone (America/Los_Angeles time zone), the snapshot is taken just before the reset.\nLOGS [UI: Discord channel-logs]\nAll steps take place in text channels:\nTesting channel ID: 1462028797938503866\nProduction channel ID: 1464097183954374770\nThis channel logs system and Operator-driven actions in real time.\nEach log entry is permanent and append-only.\nLog emission: the act of programmatically recording a completed system action by sending a structured message to the logs channel.\n────────────────────────\nLOGGED ACTIONS\n────────────────────────\n[OBJECTIVE]\n<@USER_ID> (Operator) uploaded Objective: *objective name + ID*\n[EVENT]\n<@USER_ID> (Operator) uploaded Event: *event name + ID*\n[OBJECTIVE]\n<@USER_ID> (Operator) edited Objective schedule: *objective name + ID*\n[EVENT]\n<@USER_ID> (Operator) edited Event schedule: *event name + ID*\n[COMMAND]\n<@USER_ID> (Operator) initiated a Roll Call in *#text-channel*\n[COMMAND]\n<@USER_ID> (Operator) initiated an Announcement (pending review)\n[MERITS]\n<@USER_ID> (Operator) initiated a Merit Transfer of *X* Merits to <@USER_ID> (pending review)\n[OBJECTIVE]\n<@USER_ID> submitted proof for Objective: *objective name + ID*\n[EVENT]\n<@USER_ID> checked in for Event: *event name + ID*\n[OBJECTIVE]\n<@USER_ID> (Operator) approved <@USER_ID>’s Objective submission (*objective name + ID*)\n[OBJECTIVE]\n<@USER_ID> (Operator) denied <@USER_ID>’s Objective submission (*objective name + ID*)\n[OBJECTIVE]\n<@USER_ID> (Operator) undid <@USER_ID>’s Objective submission (*objective name + ID*)\n[EVENT]\n<@USER_ID> was marked as ‘attending’ for Event: *event name + ID* and was credited *merit amount* Merits.\n[COMMAND]\n<@USER_ID> (LT) approved announcement <command_id>\n────────────────────────",
              "instructions": [
                {
                  "type": "discord_response_visibility",
                  "value": "ephemeral"
                }
              ]
            },
            {
              "kind": "section",
              "header": "RULES",
              "ui_refs": [
                "[UI: Discord Role The Core]"
              ],
              "text": "────────────────────────\n• Logs are write-only (no edits or deletions).\n• Logs are system-generated; users cannot post manually.\n• Each log entry includes:\n– Prefix tag\n– Actor\n– Action\n– Target (Objective / Event / User)\n• Timestamps use the Discord message timestamp (no inline time text).\nUSER DATA + PERIOD STATS\nScope\nThis system governs all user statistics, including lifetime totals, leaderboard ranking data, and time-bounded comparative metrics (week / month / year / cycle).\nThe system maintains a user_stats record per (guild_id, user_id).\nAll data described here is backend-only and does not directly render to a Discord channel unless explicitly referenced by another functional flow (e.g. Leaderboard, Year-in-Review).\nUSER STATS (LIFETIME)\nThe bot must maintain a single lifetime stats record per user per guild.\nThis record represents the user’s current state and must always reflect the latest totals.\nStored per user\nTotal Merits earned (lifetime)\nCumulative merits credited to the user across all time.\nInduction Date\nTimestamp when the user was first assigned [UI: Discord Role The Core].\nRule: write-once; do not overwrite if role is removed/re-added later.\nTotal Objectives completed (lifetime)\nCount of objectives approved for this user. Shows total *number* amount but also displays their rank compared to others as a top *x*%.\nTotal Events attended (lifetime)\nCount of events attended. Shows total *number* amount but also displays their rank compared to others as a top *x*%. (Must have reacted to Roll Call to achieve an ‘attended’ status on any event).\nCurrent Leaderboard rank (all-time)\nCurrent Leaderboard rank (current 90-day cycle)\nHighest Leaderboard rank achieved (all-time)\nBest-ever (lowest number) rank the user has held.\nHighest Merit leaderboard rank achieved (90-day cycle)\nBest-ever (lowest number) rank achieved across any cycle, plus store: best_cycle_rank / best_cycle_id (or cycle start/end date)\nLast updated timestamp\nWhen the stats record was last recalculated/written.\nThese values must update immediately in the database when a qualifying action completes, leaderboard UI refresh pulls from cached snapshot refreshed every 2 hours.\nPERIOD STATS (INCREMENT-ON-EVENT MODEL)\nThe bot must also maintain period-based user stats, where each stat is tied to a defined time window.\nSupported period types\nWeek (ISO week)\nMonth (calendar month)\nYear (calendar year)\nCycle90 (fixed 90-day cycle)\nEach period is defined by:\nperiod_type\nperiod_start\nperiod_end\nguild_id\nuser_id\nEach user may have multiple active period records at the same time (one per period type).\nPERIOD METRICS STORED\nFor each user + period, the bot tracks:\nObjectives completed during the period\nEvents attended during the period\nMerits earned during the period\nSnapshot of total lifetime Merits at period end\nSnapshot leaderboard rank (all-time) at period end\nSnapshot leaderboard rank (cycle) at period end\nLast updated timestamp\nPERIOD BOUNDARIES\nAll period boundaries must be computed consistently:\nWeek: ISO standard (Monday → Sunday)\nMonth: Calendar month\nYear: Calendar year\nCycle90:\nFixed 90-day windows\nCycle start is defined in configuration\nTime zone: America/Los_Angeles\nCycle resets at 11:59pm PT on the final day\nAll timestamps may be stored in UTC, but period calculations must respect PT time for cycle logic.\nEVENT-DRIVEN STAT UPDATES\nStats are updated immediately when an action completes, not via batch recomputation.\nOn Objective Approval\nIncrement lifetime:\nTotal Objectives completed +1\nTotal Merits earned +objective merit value\nIncrement period stats for:\nCurrent week\nCurrent month\nCurrent year\nCurrent cycle90\nUpdate highest rank records if applicable\nOn Objective Undo (Operator)\n• Reverse lifetime:\nTotal Objectives completed −1 (if previously approved)\nTotal Merits earned −objective merit value\nReverse active period stats for:\nCurrent week\nCurrent month\nCurrent year\nCurrent cycle90\nDo NOT modify completed period or cycle snapshot records\nRule: Leaderboard rank recalculation occurs immediately after any merit-affecting action (Objective approval, undo, event attendance, merit transfer) completes successfully.\nOn Event ‘Reaction’ to Roll Call (attendance)\nIncrement lifetime:\nTotal Events attended +1\nTotal Merits earned +event merit value\nIncrement period stats for:\nCurrent week\nCurrent month\nCurrent year\nCurrent cycle90\nRule: Event attendance may only be recorded once per event per user.\nOn Merit Transfer (if applicable)\nReceiver:\nLifetime Merits earned +amount\nPeriod Merits earned +amount\nRule: Leaderboard rank recalculation occurs after all merit-affecting actions complete successfully.\nPERIOD RECORD CREATION RULE"
            },
            {
              "kind": "branch",
              "header": "If a user performs an action and no period record exists for that user + period:",
              "ui_refs": [],
              "text": "The bot must create the period record automatically\nThen apply the increment\nThere must never be missing period rows for an active user.\nDATA CONSISTENCY RULES\nLifetime stats are the authoritative current state\nPeriod stats are derivative but authoritative for comparisons\nPeriod stats must never be recomputed destructively\nCorrections (e.g. undo approval) must decrement both lifetime and affected period stats\nCOMPARATIVE CAPABILITIES ENABLED\nThis structure enables the following without schema changes:\nMost objectives completed in a week / month / year\nThis year vs last year comparisons\nBest cycle performance\nYear-in-Review summaries\nPersonal performance deltas over time\nHistorical leaderboard snapshots\nNo additional data structures are required to support future “Year in Review” or “Performance Summary” features.\nSUMMARY RULE\nThe system uses a single source of truth for lifetime stats and increment-on-event period stats to support all current and future leaderboard, analytics, and review features without requiring data backfills or expensive recomputation."
            }
          ],
          "ui_refs": [
            "[UI: Discord Role The Core]",
            "[UI: Discord channel-logs]",
            "[UI: Leaderboard-access-button]",
            "[UI: Leaderboard-all-time-button]",
            "[UI: Leaderboard-all-time]",
            "[UI: Leaderboard-current-cycle-button]",
            "[UI: Leaderboard-current-cycle]",
            "[UI: Leaderboard-top 3-announcement-text]"
          ]
        }
      ]
    }
  ]
}
